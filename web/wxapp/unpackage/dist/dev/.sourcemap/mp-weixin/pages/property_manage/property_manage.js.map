{"version":3,"file":"property_manage.js","sources":["pages/property_manage/property_manage.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvcGVydHlfbWFuYWdlL3Byb3BlcnR5X21hbmFnZS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"pm\">\r\n    <TopHeader title=\"房源管理\">\n      <template #left>\n        <view class=\"icon-btn\" @tap=\"goBack\">\n          <text class=\"material-symbols-outlined\">arrow_back</text>\n        </view>\n      </template>\n    </TopHeader>\n\r\n    <view class=\"toolbar\">\r\n      <view class=\"search-box\">\r\n        <text class=\"material-symbols-outlined search-icon\">search</text>\r\n        <input\r\n          v-model=\"keyword\"\r\n          class=\"search-input\"\r\n          type=\"text\"\r\n          confirm-type=\"search\"\r\n          placeholder=\"搜索标题/小区...\"\r\n          placeholder-class=\"placeholder\"\r\n          @confirm=\"onSearchConfirm\"\r\n        />\r\n        <view v-if=\"keyword\" class=\"clear-btn\" @tap=\"clearKeyword\">\r\n          <text class=\"material-symbols-outlined\">close</text>\r\n        </view>\r\n      </view>\r\n\r\n      <scroll-view scroll-x=\"true\" class=\"tabs\">\r\n        <view class=\"tab-row\">\r\n          <view\r\n            v-for=\"(t, idx) in saleStatusTabs\"\r\n            :key=\"idx\"\r\n            class=\"tab\"\r\n            :class=\"{ active: saleStatus === t.value }\"\r\n            @tap=\"onSaleStatus(t.value)\"\r\n          >\r\n            {{ t.label }}\r\n          </view>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <scroll-view\n      scroll-y=\"true\"\n      class=\"list\"\n      lower-threshold=\"120\"\n      @scrolltolower=\"loadMore\"\n    >\n      <view class=\"list-content\">\r\n        <view\r\n          class=\"card\"\r\n          v-for=\"(item, index) in list\"\r\n          :key=\"item.id || index\"\r\n        >\r\n          <view class=\"card-main\" @tap=\"goDetail(item)\">\r\n            <view class=\"cover-box\">\n              <image\n                v-if=\"normalizeImage(item.image)\"\n                class=\"cover\"\n                :src=\"normalizeImage(item.image)\"\n                mode=\"aspectFill\"\n              ></image>\n              <view v-else class=\"cover cover-empty\">\n                <text class=\"material-symbols-outlined\">image</text>\n              </view>\n              <view class=\"status-pill\" :class=\"statusPillClass(item)\">\n                {{ item.sale_status_label || '-' }}\n              </view>\n            </view>\n            <view class=\"info\">\r\n              <view class=\"title\">{{ item.title || '-' }}</view>\r\n              <view class=\"sub\">\r\n                <text class=\"price\"\r\n                  >¥{{ item.price || '-' }}{{ item.price_unit || '' }}</text\r\n                >\r\n                <text class=\"sep\">·</text>\r\n                <text class=\"meta\">{{\r\n                  (item.rooms || 0) + '室' + (item.halls || 0) + '厅'\r\n                }}</text>\r\n                <text class=\"sep\">·</text>\r\n                <text class=\"meta\">{{ item.area || '-' }}㎡</text>\r\n              </view>\r\n              <view class=\"tags\">\r\n                <text\r\n                  class=\"tag\"\r\n                  v-for=\"(tag, tIdx) in ensureTags(item.tags).slice(0, 4)\"\r\n                  :key=\"tIdx\"\r\n                  >{{ tag }}</text\r\n                >\r\n              </view>\r\n              <view class=\"addr\"\r\n                >{{ (item.community_name || '') + (item.address ? ' · ' + item.address : '') }}</view\r\n              >\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"actions\">\r\n            <button class=\"btn ghost\" @tap.stop=\"goEdit(item)\">\r\n              <text class=\"material-symbols-outlined btn-ic\">edit</text>\r\n              <text>编辑</text>\r\n            </button>\r\n\r\n            <button class=\"btn danger\" @tap.stop=\"confirmDelete(item)\">\r\n              <text class=\"material-symbols-outlined btn-ic\">delete</text>\r\n              <text>删除</text>\r\n            </button>\r\n\r\n            <button\r\n              class=\"btn\"\r\n              :class=\"toggleBtnClass(item)\"\r\n              @tap.stop=\"confirmToggleSaleStatus(item)\"\r\n              :disabled=\"String(item.sale_status) === 'sold'\"\r\n            >\r\n              <text class=\"material-symbols-outlined btn-ic\">{{\r\n                String(item.sale_status) === 'off_market' ? 'publish' : 'unpublished'\r\n              }}</text>\r\n              <text>{{\r\n                String(item.sale_status) === 'sold'\r\n                  ? '已售'\r\n                  : String(item.sale_status) === 'off_market'\r\n                  ? '上架'\r\n                  : '下架'\r\n              }}</text>\r\n            </button>\r\n          </view>\r\n        </view>\r\n\r\n        <view v-if=\"!loading && list.length === 0\" class=\"empty-wrap\">\n          <text class=\"material-symbols-outlined empty-icon\">home_work</text>\n          <view class=\"empty-title\">暂无可维护房源</view>\n          <view class=\"empty-desc\">你可以点击右下角新增房源</view>\n        </view>\n\r\n        <view v-if=\"loading\" class=\"loading-row\">\r\n          <text>加载中...</text>\r\n        </view>\r\n        <view v-else-if=\"finished && list.length > 0\" class=\"loading-row muted\">\r\n          <text>没有更多了</text>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"bottom-spacer\"></view>\n    </scroll-view>\n\n    <!-- 右下角悬浮新增 -->\n    <view class=\"fab\" @tap=\"goAdd\">\n      <text class=\"material-symbols-outlined fab-ic\">add</text>\n    </view>\n  </view>\n</template>\n\r\n<script>\r\nimport TopHeader from '@/components/TopHeader.vue'\r\nimport $store from '@/store'\r\nimport propertyApi from '@/api/property'\r\n\r\nexport default {\r\n  components: { TopHeader },\r\n  data() {\n    return {\n      loading: false,\n      finished: false,\r\n      page: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      list: [],\r\n      keyword: '',\r\n      saleStatus: '',\r\n      saleStatusTabs: [\r\n        { label: '全部', value: '' },\r\n        { label: '在售', value: 'on_sale' },\r\n        { label: '已售', value: 'sold' },\r\n        { label: '下架', value: 'off_market' },\r\n      ],\r\n      inited: false,\r\n    }\r\n  },\r\n  onShow() {\r\n    this.ensurePermissionAndLoad()\r\n  },\r\n  methods: {\n    normalizeImage(url) {\n      const u = String(url || '').trim()\n      if (!u) return ''\n      if (u.indexOf('/static/images/') === 0) return ''\n      return u\n    },\n    ensureTags(v) {\n      if (Array.isArray(v)) return v\n      if (!v) return []\r\n      return String(v)\r\n        .split(',')\r\n        .map((s) => String(s || '').trim())\r\n        .filter(Boolean)\r\n    },\r\n    statusPillClass(item) {\r\n      const ss = String(item && item.sale_status)\r\n      if (ss === 'sold') return 'sold'\r\n      if (ss === 'off_market') return 'off'\r\n      return 'on'\r\n    },\r\n    toggleBtnClass(item) {\r\n      const ss = String(item && item.sale_status)\r\n      if (ss === 'sold') return 'disabled'\r\n      if (ss === 'off_market') return 'primary'\r\n      return 'warn'\r\n    },\r\n    async ensurePermissionAndLoad() {\r\n      const userStore = $store('user')\r\n      const token = uni.getStorageSync('token')\r\n      if (!token && !userStore.isLogin) {\r\n        uni.reLaunch({ url: '/pages/login/login' })\r\n        return\r\n      }\r\n      try {\n        if (!userStore.userInfo || !userStore.userInfo.id) {\n          await userStore.getInfo()\n        }\n        // 兼容：老版本缓存的 userInfo 可能没有 can_manage_properties，需要强制刷新一次\n        const ui = userStore.userInfo || {}\n        if (ui.id && typeof ui.can_manage_properties === 'undefined') {\n          await userStore.getInfo()\n        }\n      } catch (e) {}\n      const u = userStore.userInfo || {}\n      const canManage = Number(u.can_manage_properties) === 1\n      this.currentUserId = Number(u.id || 0) || 0\n      if (!canManage) {\n        uni.showModal({\n          title: '提示',\n          content: '暂无房源维护权限，请联系后台管理员开启。',\n          showCancel: false,\r\n          success: () => {\r\n            uni.navigateBack()\r\n          },\r\n        })\r\n        return\r\n      }\r\n\r\n      if (!this.inited) this.inited = true\n      this.reload()\n    },\n    goBack() {\r\n      uni.navigateBack()\r\n    },\r\n    goAdd() {\r\n      uni.navigateTo({ url: '/pages/property_manage/property_edit' })\r\n    },\r\n    goEdit(item) {\r\n      const id = Number(item && item.id) || 0\r\n      if (!id) return\r\n      uni.navigateTo({ url: `/pages/property_manage/property_edit?id=${id}` })\r\n    },\r\n    goDetail(item) {\r\n      const id = Number(item && item.id) || 0\r\n      if (!id) return\r\n      uni.navigateTo({ url: `/pages/property_detail/property_detail?id=${id}` })\r\n    },\r\n    clearKeyword() {\r\n      this.keyword = ''\r\n      this.reload()\r\n    },\r\n    onSearchConfirm() {\r\n      this.reload()\r\n    },\r\n    onSaleStatus(v) {\r\n      this.saleStatus = v\r\n      this.reload()\r\n    },\r\n    async reload() {\r\n      if (this.loading) return\r\n      this.page = 1\r\n      this.total = 0\r\n      this.list = []\r\n      this.finished = false\r\n      await this.fetchList()\r\n    },\r\n    async loadMore() {\r\n      await this.fetchList()\r\n    },\r\n    async fetchList() {\r\n      if (this.loading || this.finished) return\r\n      this.loading = true\r\n      try {\r\n        const res = await propertyApi.getManageList({\r\n          page: this.page,\r\n          pageSize: this.pageSize,\r\n          keyword: String(this.keyword || '').trim(),\r\n          sale_status: this.saleStatus,\r\n        })\r\n        if (!res || res.code !== 0) {\r\n          if (res && Number(res.code) === 403) {\r\n            uni.showToast({ title: '暂无权限', icon: 'none' })\r\n          }\r\n          return\r\n        }\r\n        const data = res.data || {}\r\n        const items = Array.isArray(data.items) ? data.items : []\r\n        const total = Number(data.total || 0)\r\n        this.total = total\r\n        if (this.page === 1) this.list = items\r\n        else this.list = this.list.concat(items)\r\n\r\n        if (items.length === 0 || (total > 0 && this.list.length >= total)) {\r\n          this.finished = true\r\n        } else {\r\n          this.page += 1\r\n        }\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    confirmDelete(item) {\r\n      const id = Number(item && item.id) || 0\r\n      if (!id) return\r\n      uni.showModal({\r\n        title: '确认删除',\r\n        content: '确定要删除该房源吗？（软删除，可在后台恢复）',\r\n        confirmText: '删除',\r\n        confirmColor: '#ef4444',\r\n        success: async (res) => {\r\n          if (!res.confirm) return\r\n          const out = await propertyApi.delManage({ id })\r\n          if (!out || out.code !== 0) return\r\n          uni.showToast({ title: '已删除', icon: 'none' })\r\n          this.reload()\r\n        },\r\n      })\r\n    },\r\n    confirmToggleSaleStatus(item) {\r\n      const id = Number(item && item.id) || 0\r\n      if (!id) return\r\n      const cur = String(item && item.sale_status)\r\n      if (cur === 'sold') return\r\n      const next = cur === 'off_market' ? 'on_sale' : 'off_market'\r\n      const nextLabel = next === 'on_sale' ? '上架' : '下架'\r\n      uni.showModal({\r\n        title: '确认操作',\r\n        content: `确定要${nextLabel}该房源吗？`,\r\n        confirmText: nextLabel,\r\n        success: async (res) => {\r\n          if (!res.confirm) return\r\n          const out = await propertyApi.saveManage({ id, sale_status: next })\r\n          if (!out || out.code !== 0) return\r\n          uni.showToast({ title: '已更新', icon: 'none' })\r\n          this.reload()\r\n        },\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.pm {\r\n  height: 100vh;\r\n  background-color: #f6f7f8;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.icon-btn {\r\n  width: 72rpx;\r\n  height: 72rpx;\r\n  border-radius: 40rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1px solid rgba(226, 232, 240, 0.9);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  color: #0f172a;\r\n}\r\n\r\n.icon-btn.primary {\r\n  background: linear-gradient(135deg, #2d9cf0, #2563eb);\r\n  border: none;\r\n  color: #ffffff;\r\n  box-shadow: 0 12rpx 28rpx rgba(37, 99, 235, 0.22);\r\n}\r\n\r\n.toolbar {\r\n  padding: 14rpx 24rpx 10rpx;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.search-box {\r\n  background-color: #ffffff;\r\n  border-radius: 22rpx;\r\n  border: 1px solid #e2e8f0;\r\n  height: 76rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 18rpx;\r\n  box-sizing: border-box;\r\n  gap: 10rpx;\r\n}\r\n\r\n.search-icon {\r\n  font-size: 40rpx !important;\r\n  color: #94a3b8;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  height: 76rpx;\r\n  font-size: 28rpx;\r\n  color: #0f172a;\r\n}\r\n\r\n.placeholder {\r\n  color: #94a3b8;\r\n}\r\n\r\n.clear-btn {\r\n  width: 52rpx;\r\n  height: 52rpx;\r\n  border-radius: 30rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #64748b;\r\n  background-color: #f1f5f9;\r\n}\r\n\r\n.tabs {\r\n  width: 100%;\r\n}\r\n\r\n.tab-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  padding-bottom: 6rpx;\r\n}\r\n\r\n.tab {\r\n  padding: 14rpx 22rpx;\r\n  border-radius: 999rpx;\r\n  background-color: #ffffff;\r\n  border: 1px solid #e2e8f0;\r\n  color: #334155;\r\n  font-size: 24rpx;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tab.active {\r\n  background-color: #eaf3ff;\r\n  border-color: rgba(37, 99, 235, 0.25);\r\n  color: #2563eb;\r\n  font-weight: 700;\r\n}\r\n\r\n.list {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.list-content {\r\n  padding: 0 24rpx 24rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.card {\r\n  background-color: #ffffff;\r\n  border-radius: 28rpx;\r\n  border: 1px solid #eef2f7;\r\n  overflow: hidden;\r\n  margin-bottom: 18rpx;\r\n  box-shadow: 0 10rpx 24rpx rgba(15, 23, 42, 0.05);\r\n}\r\n\r\n.card-main {\r\n  padding: 18rpx;\r\n  display: flex;\r\n  gap: 18rpx;\r\n}\r\n\r\n.cover-box {\r\n  width: 220rpx;\r\n  height: 168rpx;\r\n  border-radius: 18rpx;\r\n  overflow: hidden;\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  background-color: #f1f5f9;\r\n}\r\n\r\n.cover {\n  width: 100%;\n  height: 100%;\n}\n.cover-empty {\n  background: linear-gradient(135deg, #eef2f7, #e2e8f0);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .material-symbols-outlined {\n    font-size: 48rpx;\n    color: #94a3b8;\n  }\n}\n\r\n.status-pill {\r\n  position: absolute;\r\n  left: 12rpx;\r\n  top: 12rpx;\r\n  padding: 8rpx 14rpx;\r\n  border-radius: 999rpx;\r\n  font-size: 22rpx;\r\n  color: #ffffff;\r\n  background: rgba(15, 23, 42, 0.7);\r\n  backdrop-filter: blur(8px);\r\n}\r\n\r\n.status-pill.on {\r\n  background: rgba(34, 197, 94, 0.85);\r\n}\r\n.status-pill.sold {\r\n  background: rgba(234, 88, 12, 0.9);\r\n}\r\n.status-pill.off {\r\n  background: rgba(148, 163, 184, 0.9);\r\n}\r\n\r\n.info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.title {\r\n  font-size: 30rpx;\r\n  font-weight: 800;\r\n  color: #0f172a;\r\n  line-height: 1.25;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.sub {\r\n  margin-top: 10rpx;\r\n  font-size: 24rpx;\r\n  color: #64748b;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.price {\r\n  color: #0f172a;\r\n  font-weight: 800;\r\n}\r\n\r\n.sep {\r\n  color: #cbd5e1;\r\n}\r\n\r\n.meta {\r\n  color: #64748b;\r\n}\r\n\r\n.tags {\r\n  margin-top: 10rpx;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8rpx;\r\n}\r\n\r\n.tag {\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 999rpx;\r\n  background-color: #f1f5f9;\r\n  color: #334155;\r\n  font-size: 22rpx;\r\n}\r\n\r\n.addr {\r\n  margin-top: 10rpx;\r\n  font-size: 24rpx;\r\n  color: #94a3b8;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  padding: 0 18rpx 18rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.btn {\r\n  flex: 1;\r\n  height: 72rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 26rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8rpx;\r\n  border: 1px solid #e2e8f0;\r\n  background-color: #ffffff;\r\n  color: #0f172a;\r\n}\r\n\r\n.btn::after {\r\n  border: none;\r\n}\r\n\r\n.btn-ic {\r\n  font-size: 30rpx !important;\r\n}\r\n\r\n.btn.ghost {\r\n  background-color: #f8fafc;\r\n  color: #2563eb;\r\n  border-color: rgba(37, 99, 235, 0.22);\r\n}\r\n\r\n.btn.danger {\r\n  background-color: #fff1f2;\r\n  color: #ef4444;\r\n  border-color: rgba(239, 68, 68, 0.22);\r\n}\r\n\r\n.btn.primary {\r\n  background: linear-gradient(135deg, #2d9cf0, #2563eb);\r\n  border: none;\r\n  color: #ffffff;\r\n}\r\n\r\n.btn.warn {\r\n  background: linear-gradient(135deg, #f97316, #ea580c);\r\n  border: none;\r\n  color: #ffffff;\r\n}\r\n\r\n.btn.disabled {\r\n  background-color: #f1f5f9;\r\n  color: #94a3b8;\r\n  border-color: #e2e8f0;\r\n}\r\n\r\n.empty-wrap {\r\n  padding: 120rpx 0 60rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  color: #94a3b8;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 86rpx !important;\r\n  color: #cbd5e1;\r\n}\r\n\r\n.empty-title {\r\n  margin-top: 16rpx;\r\n  font-size: 30rpx;\r\n  font-weight: 800;\r\n  color: #334155;\r\n}\r\n\r\n.empty-desc {\r\n  margin-top: 8rpx;\r\n  font-size: 26rpx;\r\n  color: #94a3b8;\r\n}\r\n\r\n.loading-row {\r\n  text-align: center;\r\n  padding: 24rpx 0;\r\n  color: #334155;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.loading-row.muted {\r\n  color: #94a3b8;\r\n}\r\n\r\n.bottom-spacer {\n  height: calc(env(safe-area-inset-bottom) + 24rpx);\n}\n\n.fab {\n  position: fixed;\n  right: 24rpx;\n  bottom: calc(env(safe-area-inset-bottom) + 140rpx);\n  width: 104rpx;\n  height: 104rpx;\n  border-radius: 52rpx;\n  background: linear-gradient(135deg, #2d9cf0, #2563eb);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 200;\n  box-shadow: 0 18rpx 34rpx rgba(37, 99, 235, 0.26);\n}\n\n.fab:active {\n  transform: scale(0.98);\n  opacity: 0.92;\n}\n\n.fab-ic {\n  color: #ffffff;\n  font-size: 52rpx !important;\n}\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/property_manage/property_manage.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","components","TopHeader","data","loading","finished","page","pageSize","total","list","keyword","saleStatus","saleStatusTabs","label","value","inited","onShow","this","ensurePermissionAndLoad","methods","normalizeImage","url","u","String","trim","indexOf","ensureTags","v","Array","isArray","split","map","s","filter","Boolean","statusPillClass","item","ss","sale_status","toggleBtnClass","userStore","$store","uni","getStorageSync","isLogin","reLaunch","userInfo","id","getInfo","ui","can_manage_properties","e","canManage","Number","currentUserId","reload","showModal","title","content","showCancel","success","navigateBack","goBack","goAdd","navigateTo","goEdit","index$1","goDetail","clearKeyword","onSearchConfirm","onSaleStatus","fetchList","loadMore","res","propertyApi","getManageList","code","showToast","icon","items","concat","length","confirmDelete","confirmText","confirmColor","async","confirm","out","delManage","confirmToggleSaleStatus","cur","next","nextLabel","saveManage","wx","createPage","MiniProgramPage"],"mappings":"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"}