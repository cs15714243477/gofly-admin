{"version":3,"file":"record_call.js","sources":["pages/records/record_call.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVjb3Jkcy9yZWNvcmRfY2FsbC52dWU"],"sourcesContent":["<template>\n  <view class=\"record-page\">\n    <TopHeader title=\"通话记录\" />\n    <scroll-view scroll-y class=\"list\">\n      <view v-if=\"loading && items.length === 0\" class=\"hint\">加载中...</view>\n      <view v-else-if=\"!loading && items.length === 0\" class=\"hint\"\n        >暂无通话记录</view\n      >\n      <view\n        class=\"card\"\n        v-for=\"(it, idx) in items\"\n        :key=\"idx\"\n        @click=\"callItem(it)\"\n      >\n        <view class=\"row\">\n          <text class=\"title\">{{ it.name || it.title || \"通话记录\" }}</text>\n          <text class=\"tag\" :class=\"it.type === '呼入' ? 'in' : 'out'\">{{\n            it.type || \"呼出\"\n          }}</text>\n        </view>\n        <view class=\"sub\"\n          >{{ it.time || \"-\" }} · {{ it.phone || \"暂无号码\" }}</view\n        >\n      </view>\n      <view class=\"bottom-spacer\"></view>\n    </scroll-view>\n    <BottomTabBar active=\"me\" />\n  </view>\n</template>\n\n<script>\nimport TopHeader from \"@/components/TopHeader.vue\";\nimport BottomTabBar from \"@/components/BottomTabBar.vue\";\nimport userApi from \"@/api/user\";\n\nexport default {\n  components: { TopHeader, BottomTabBar },\n  data() {\n    return {\n      loading: false,\n      items: [],\n    };\n  },\n  onShow() {\n    this.loadData();\n  },\n  methods: {\n    async loadData() {\n      this.loading = true;\n      try {\n        const res = await userApi.getWorkbenchRecords(\n          { record_type: \"call\", page: 1, page_size: 50 },\n          true,\n        );\n        const data = (res && res.code === 0 && res.data) || {};\n        this.items = Array.isArray(data.items) ? data.items : [];\n      } finally {\n        this.loading = false;\n      }\n    },\n    callItem(it) {\n      const phone = String((it && it.phone) || \"\").trim();\n      if (!phone) {\n        uni.showToast({ title: \"暂无可拨打号码\", icon: \"none\" });\n        return;\n      }\n      uni.makePhoneCall({ phoneNumber: phone });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.record-page {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f6f7f8;\n}\n.list {\n  flex: 1;\n  overflow: hidden;\n  padding: 24rpx 16rpx;\n  box-sizing: border-box;\n}\n.card {\n  background: #fff;\n  border-radius: 24rpx;\n  padding: 20rpx;\n  border: 1px solid #f1f5f9;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.02);\n  margin-bottom: 16rpx;\n}\n.row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 16rpx;\n}\n.title {\n  font-size: 30rpx;\n  font-weight: 800;\n  color: #0f172a;\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.tag {\n  font-size: 22rpx;\n  font-weight: 900;\n  padding: 8rpx 14rpx;\n  border-radius: 999rpx;\n}\n.tag.out {\n  color: #2563eb;\n  background: rgba(37, 99, 235, 0.12);\n  border: 1rpx solid rgba(37, 99, 235, 0.18);\n}\n.tag.in {\n  color: #16a34a;\n  background: rgba(34, 197, 94, 0.12);\n  border: 1rpx solid rgba(34, 197, 94, 0.18);\n}\n.sub {\n  margin-top: 10rpx;\n  font-size: 24rpx;\n  color: #64748b;\n}\n.hint {\n  padding: 50rpx 0;\n  text-align: center;\n  font-size: 24rpx;\n  color: #94a3b8;\n}\n.bottom-spacer {\n  height: 40rpx;\n}\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/records/record_call.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","components","TopHeader","BottomTabBar","data","loading","items","onShow","this","loadData","methods","res","userApi","getWorkbenchRecords","record_type","page","page_size","code","Array","isArray","callItem","it","phone","String","trim","uni","makePhoneCall","phoneNumber","index$1","showToast","title","icon","wx","createPage","MiniProgramPage"],"mappings":"sFAmCKA,EAAU,CACbC,WAAY,CAAEC,UALE,IAAW,gCAKFC,aAJN,IAAW,oCAK9BC,KAAO,KACE,CACLC,SAAS,EACTC,MAAO,KAGX,MAAAC,GACEC,KAAKC,UACN,EACDC,QAAS,CACP,cAAMD,GACJD,KAAKH,SAAU,EACX,IACI,MAAAM,QAAYC,EAAAA,QAAQC,oBACxB,CAAEC,YAAa,OAAQC,KAAM,EAAGC,UAAW,KAC3C,GAEIZ,EAAQO,GAAoB,IAAbA,EAAIM,MAAcN,EAAIP,MAAS,GAC/CI,KAAAF,MAAQY,MAAMC,QAAQf,EAAKE,OAASF,EAAKE,MAAQ,EACxD,CAAU,QACRE,KAAKH,SAAU,CACjB,CACD,EACD,QAAAe,CAASC,GACP,MAAMC,EAAQC,OAAQF,GAAMA,EAAGC,OAAU,IAAIE,OACxCF,EAILG,EAAAA,QAAIC,cAAc,CAAEC,YAAaL,IAH/BG,EAAGG,QAACC,UAAU,CAAEC,MAAO,UAAWC,KAAM,QAI3C,wgBClELC,GAAGC,WAAWC"}