{"version":3,"file":"unlock_details.js","sources":["pages/unlock_details/unlock_details.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdW5sb2NrX2RldGFpbHMvdW5sb2NrX2RldGFpbHMudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"unlock-container\">\r\n\t\t<!-- 顶部悬浮操作 -->\r\n\t\t<view class=\"float-header\" :style=\"{ paddingTop: headerTop + 'px' }\">\r\n\t\t\t<view class=\"header-left\">\r\n\t\t\t\t<view class=\"circle-btn\" @click=\"goBack\">\r\n\t\t\t\t\t<text class=\"material-symbols-outlined\">arrow_back</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"main-content\">\r\n\t\t\t<!-- 顶部封面 -->\n\t\t\t<view class=\"cover-section\">\n\t\t\t\t<image\n\t\t\t\t\tv-if=\"coverImage\"\n\t\t\t\t\t:src=\"coverImage\"\n\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\tclass=\"cover-image\"\n\t\t\t\t></image>\n\t\t\t\t<view v-else class=\"cover-image cover-image-empty\">\n\t\t\t\t\t<text class=\"material-symbols-outlined\">image</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cover-mask\"></view>\n\t\t\t\t<view class=\"cover-info\">\n\t\t\t\t\t<view class=\"verified-tag\">\n\t\t\t\t\t\t<text class=\"material-symbols-outlined tag-icon\">verified_user</text>\n\t\t\t\t\t\t<text>已核验</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"building-name\">房源ID：{{ propertyId }}</view>\n\t\t\t\t\t<view class=\"scene-link\">\n\t\t\t\t\t\t<text class=\"material-symbols-outlined scene-icon\">image</text>\n\t\t\t\t\t\t<text>房源实景图</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 核心操作区 -->\r\n\t\t\t<view class=\"card-section\">\r\n\t\t\t\t<view class=\"password-card\">\r\n\t\t\t\t\t<view class=\"card-bg-decor\"></view>\r\n\t\t\t\t\t<text class=\"card-label\">动态密码</text>\n\t\t\t\t\t<view class=\"password-row\">\n\t\t\t\t\t\t<text class=\"password-text\">{{ passcodeDisplay }}</text>\n\t\t\t\t\t\t<view class=\"copy-btn\" @click=\"copyPassword\">\n\t\t\t\t\t\t\t<text class=\"material-symbols-outlined\">content_copy</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 倒计时 -->\r\n\t\t\t\t\t<view class=\"timer-box\">\r\n\t\t\t\t\t\t<view class=\"timer-left\">\r\n\t\t\t\t\t\t\t<view class=\"progress-circle\">\r\n\t\t\t\t\t\t\t\t<view class=\"progress-mask\"></view>\r\n\t\t\t\t\t\t\t\t<text class=\"material-symbols-outlined timer-icon\">timer</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"timer-info\">\n\t\t\t\t\t\t\t\t<text class=\"timer-title\">本次密码有效时间</text>\n\t\t\t\t\t\t\t\t<text class=\"timer-val\">{{ remainLabel }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<button class=\"extend-btn\" @click=\"extendPasscode\">延时</button>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 时间详情 -->\n\t\t\t\t\t<view class=\"time-details\">\n\t\t\t\t\t\t<view class=\"time-item\">\n\t\t\t\t\t\t\t<text class=\"time-lab\">申请时间</text>\n\t\t\t\t\t\t\t<text class=\"time-val\">{{ formatTime(startDate) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"time-divider\"></view>\n\t\t\t\t\t\t<view class=\"time-item\">\n\t\t\t\t\t\t\t<text class=\"time-lab\">截止时间</text>\n\t\t\t\t\t\t\t<text class=\"time-val accent\">{{ formatTime(endDate) }}</text>\n\t\t\t\t\t\t\t<view class=\"active-dot\"></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\r\n\t\t\t\t<!-- 开锁注意 -->\r\n\t\t\t\t<view class=\"notice-card\">\r\n\t\t\t\t\t<view class=\"notice-icon-box\">\r\n\t\t\t\t\t\t<text class=\"material-symbols-outlined\">touch_app</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"notice-content\">\r\n\t\t\t\t\t\t<view class=\"notice-title\">开锁注意</view>\r\n\t\t\t\t\t\t<view class=\"notice-text\">\r\n\t\t\t\t\t\t\t按<text class=\"keyboard-btn\">#</text>号键激活，输入密码后即可开锁。请确保操作时面板已亮起。\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"notice-tip\">\n\t\t\t\t\t\t\t若门锁无反应，请尝试使用USB应急电源接口供电。\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"notice-tip\">\n\t\t\t\t\t\t\t提示：部分门锁需要在门锁附近完成一次蓝牙连接/蓝牙开锁后，云端数据（如状态/记录）才会同步更新。\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 操作按钮组 -->\n\t\t\t\t<view class=\"btn-row\">\n\t\t\t\t\t<button class=\"action-btn\" @click=\"refreshPasscode\">\n\t\t\t\t\t\t<text class=\"material-symbols-outlined btn-icon rotate\">refresh</text>\n\t\t\t\t\t\t<text>换新密码</text>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class=\"action-btn\">\n\t\t\t\t\t\t<text class=\"material-symbols-outlined btn-icon\">report_problem</text>\n\t\t\t\t\t\t<text>故障上报</text>\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\n\n<script>\n\timport propertyApi from '@/api/property'\n\timport ttlockApi from '@/api/ttlock'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tstatusBarHeight: 0,\n\t\t\t\theaderTop: 0,\n\t\t\t\tpropertyId: 0,\n\t\t\t\tcoverImage: '',\n\t\t\t\tpasscode: '',\n\t\t\t\tstartDate: 0,\n\t\t\t\tendDate: 0,\n\t\t\t\tremainSeconds: 0,\n\t\t\t\ttimer: null,\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tpasscodeDisplay() {\n\t\t\t\tconst raw = String(this.passcode || '').trim()\n\t\t\t\tif (!raw) return '——'\n\t\t\t\tconst pure = raw.replace(/\\s+/g, '')\n\t\t\t\tif (/^\\d{6}$/.test(pure)) return `${pure.slice(0, 3)} ${pure.slice(3)}`\n\t\t\t\treturn raw\n\t\t\t},\n\t\t\tremainLabel() {\n\t\t\t\tif (!this.endDate) return '—'\n\t\t\t\tconst s = Number(this.remainSeconds || 0)\n\t\t\t\tif (!Number.isFinite(s) || s <= 0) return '已过期'\n\t\t\t\tconst h = Math.floor(s / 3600)\n\t\t\t\tconst m = Math.floor((s % 3600) / 60)\n\t\t\t\tconst ss = Math.floor(s % 60)\n\t\t\t\treturn `${h}小时${m}分${ss}秒`\n\t\t\t},\n\t\t},\n\t\tonLoad(options) {\n\t\t\tconst pid = Number((options && (options.property_id || options.id)) || 0)\n\t\t\tthis.propertyId = Number.isFinite(pid) ? pid : 0\n\n\t\t\tconst info = uni.getSystemInfoSync()\n\t\t\tthis.statusBarHeight = info.statusBarHeight\n\t\t\t// #ifdef MP-WEIXIN\n\t\t\ttry {\n\t\t\t\tif (typeof wx !== 'undefined' && wx.getMenuButtonBoundingClientRect) {\r\n\t\t\t\t\tconst rect = wx.getMenuButtonBoundingClientRect()\r\n\t\t\t\t\tthis.headerTop = Number(rect.top || this.statusBarHeight) + 6\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.headerTop = this.statusBarHeight + 12\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.headerTop = this.statusBarHeight + 12\r\n\t\t\t}\r\n\t\t\t// #endif\n\t\t\t// #ifndef MP-WEIXIN\n\t\t\tthis.headerTop = this.statusBarHeight + 12\n\t\t\t// #endif\n\n\t\t\tthis.loadPasscode()\n\t\t\tthis.loadPropertyCover()\n\t\t},\n\t\tonUnload() {\n\t\t\tthis.clearTimer()\n\t\t},\n\t\tmethods: {\n\t\t\tnormalizeImage(url) {\n\t\t\t\tconst imageUrl = String(url || '').trim()\n\t\t\t\tif (!imageUrl) return ''\n\t\t\t\tif (imageUrl.indexOf('/static/images/') === 0) return ''\n\t\t\t\treturn imageUrl\n\t\t\t},\n\t\t\tasync loadPropertyCover() {\n\t\t\t\tif (!this.propertyId) return\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await propertyApi.getDetail({ id: this.propertyId, public: 0 })\n\t\t\t\t\tif (!res || res.code !== 0) return\n\t\t\t\t\tconst data = res.data || {}\n\t\t\t\t\tconst p = data.property || {}\n\t\t\t\t\tconst videoPoster = this.normalizeImage(p.cover_image)\n\t\t\t\t\tconst videoUrl = String(p.video_url || '').trim()\n\t\t\t\t\tconst imgs = Array.isArray(data.images)\n\t\t\t\t\t\t? data.images\n\t\t\t\t\t\t: Array.isArray(p.images)\n\t\t\t\t\t\t\t? p.images\n\t\t\t\t\t\t\t: []\n\t\t\t\t\tconst normalizedImgs = imgs.map((u) => this.normalizeImage(u)).filter(Boolean)\n\t\t\t\t\tconst coverCandidates = []\n\t\t\t\t\t// 与房源详情轮播图逻辑对齐：有视频时优先封面图，其次首张图片\n\t\t\t\t\tif (videoUrl && videoPoster) coverCandidates.push(videoPoster)\n\t\t\t\t\tif (normalizedImgs.length) coverCandidates.push(normalizedImgs[0])\n\t\t\t\t\tif (!coverCandidates.length && videoPoster) coverCandidates.push(videoPoster)\n\t\t\t\t\tthis.coverImage = coverCandidates[0] || ''\n\t\t\t\t} catch (e) {}\n\t\t\t},\n\t\t\tgoBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t},\n\t\t\tclearTimer() {\n\t\t\t\tif (this.timer) {\n\t\t\t\t\tclearInterval(this.timer)\n\t\t\t\t\tthis.timer = null\n\t\t\t\t}\n\t\t\t},\n\t\t\tstartTimer() {\n\t\t\t\tthis.clearTimer()\n\t\t\t\tthis.timer = setInterval(() => {\n\t\t\t\t\tif (!this.endDate) return\n\t\t\t\t\tconst remain = Math.floor((this.endDate - Date.now()) / 1000)\n\t\t\t\t\tthis.remainSeconds = remain > 0 ? remain : 0\n\t\t\t\t}, 1000)\n\t\t\t},\n\t\t\tformatTime(ts) {\n\t\t\t\tconst t = Number(ts || 0)\n\t\t\t\tif (!t) return '--:--'\n\t\t\t\tconst d = new Date(t)\n\t\t\t\tconst hh = String(d.getHours()).padStart(2, '0')\n\t\t\t\tconst mm = String(d.getMinutes()).padStart(2, '0')\n\t\t\t\treturn `${hh}:${mm}`\n\t\t\t},\n\t\t\tasync loadPasscode() {\n\t\t\t\tif (!this.propertyId) {\n\t\t\t\t\tuni.showToast({ title: '缺少房源ID，无法获取密码', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst res = await ttlockApi.getPropertyPasscode({ property_id: this.propertyId })\n\t\t\t\tif (!res || res.code !== 0) return\n\t\t\t\tconst data = res.data || {}\n\n\t\t\t\tthis.passcode = String(data.keyboardPwd || data.keyboard_pwd || '').trim()\n\t\t\t\tthis.startDate = Number(data.startDate || data.start_date || 0) || 0\n\t\t\t\tthis.endDate = Number(data.endDate || data.end_date || 0) || 0\n\t\t\t\tthis.remainSeconds = this.endDate ? Math.max(0, Math.floor((this.endDate - Date.now()) / 1000)) : 0\n\t\t\t\tthis.startTimer()\n\t\t\t},\n\t\t\tasync refreshPasscode() {\n\t\t\t\tconst prev = String(this.passcode || '').trim()\n\t\t\t\tawait this.loadPasscode()\n\t\t\t\tconst next = String(this.passcode || '').trim()\n\t\t\t\tif (next && next !== prev) {\n\t\t\t\t\tuni.showToast({ title: '已更换新密码', icon: 'success' })\n\t\t\t\t} else if (next) {\n\t\t\t\t\tuni.showToast({ title: '密码已刷新', icon: 'none' })\n\t\t\t\t}\n\t\t\t},\n\t\t\textendPasscode() {\n\t\t\t\tuni.showToast({ title: '暂不支持延时，可点击“换新密码”重新生成', icon: 'none' })\n\t\t\t},\n\t\t\tcopyPassword() {\n\t\t\t\tconst raw = String(this.passcode || '').trim()\n\t\t\t\tconst pure = raw.replace(/\\s+/g, '')\n\t\t\t\tif (!pure) {\n\t\t\t\t\tuni.showToast({ title: '暂无可复制的密码', icon: 'none' })\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tuni.setClipboardData({\n\t\t\t\t\tdata: pure,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '复制成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\r\n<style lang=\"scss\">\r\n\t.unlock-container {\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f6f7f8;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.float-header {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 100;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\tpadding: 0 32rpx;\r\n\t\tpointer-events: none;\r\n\t\tpadding-bottom: 8rpx;\r\n\r\n\t\t.header-left {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 24rpx;\r\n\t\t\tpointer-events: auto;\r\n\t\t}\r\n\r\n\t\t.circle-btn {\r\n\t\t\twidth: 80rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tbackground-color: rgba(0, 0, 0, 0.2);\r\n\t\t\tbackdrop-filter: blur(10px);\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tcolor: #ffffff;\r\n\t\t\t\r\n\t\t\t.material-symbols-outlined {\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.main-content {\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 0;\r\n\t}\r\n\r\n\t.cover-section {\r\n\t\twidth: 100%;\r\n\t\theight: 480rpx;\r\n\t\tposition: relative;\r\n\t\t\r\n\t\t.cover-image {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\t.cover-image-empty {\n\t\t\tbackground: linear-gradient(135deg, #0ea5e9, #1e3a8a);\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\t.material-symbols-outlined {\n\t\t\t\tfont-size: 72rpx;\n\t\t\t\tcolor: rgba(255, 255, 255, 0.45);\n\t\t\t}\n\t\t}\n\t\t\r\n\t\t.cover-mask {\r\n\t\t\tposition: absolute;\r\n\t\t\tinset: 0;\r\n\t\t\tbackground: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, transparent 40%, rgba(0,0,0,0.8) 100%);\r\n\t\t}\r\n\t\t\r\n\t\t.cover-info {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: 72rpx;\r\n\t\t\tleft: 32rpx;\r\n\t\t\tright: 32rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 12rpx;\r\n\t\t\tcolor: #ffffff;\r\n\t\t\t\r\n\t\t\t.verified-tag {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: 8rpx;\r\n\t\t\t\tbackground-color: rgba(45, 156, 240, 0.9);\r\n\t\t\t\tpadding: 4rpx 16rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\talign-self: flex-start;\r\n\t\t\t\t\r\n\t\t\t\t.tag-icon { font-size: 24rpx; font-variation-settings: 'FILL' 1; }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.building-name {\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\ttext-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.5);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.scene-link {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: 8rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: rgba(255, 255, 255, 0.9);\r\n\t\t\t\t\r\n\t\t\t\t.scene-icon { font-size: 28rpx; }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.card-section {\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t\tmargin-top: -48rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 20;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t\tflex: 1;\r\n\t\tmin-height: 0;\r\n\t}\r\n\r\n\t.password-card {\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 40rpx;\r\n\t\tpadding: 36rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.05);\r\n\t\tborder: 1px solid rgba(255, 255, 255, 0.5);\r\n\r\n\t\t.card-bg-decor {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\twidth: 75%;\r\n\t\t\theight: 160rpx;\r\n\t\t\tbackground-color: rgba(245, 158, 11, 0.05);\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tfilter: blur(60rpx);\r\n\t\t}\r\n\r\n\t\t.card-label {\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #94a3b8;\r\n\t\t\tletter-spacing: 4rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t}\r\n\r\n\t\t.password-row {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tgap: 16rpx;\r\n\t\t\tmargin-bottom: 24rpx;\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t.password-text {\r\n\t\t\t\tfont-size: 84rpx;\r\n\t\t\t\tfont-weight: 900;\r\n\t\t\t\tcolor: #f59e0b;\r\n\t\t\t\tletter-spacing: 12rpx;\r\n\t\t\t\tfont-family: 'Inter', sans-serif;\r\n\t\t\t}\r\n\r\n\t\t\t.copy-btn {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: -24rpx;\r\n\t\t\t\tpadding: 16rpx;\r\n\t\t\t\tcolor: #cbd5e1;\r\n\t\t\t\t\r\n\t\t\t\t&:active { color: #f59e0b; }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.timer-box {\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #f8fafc;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tpadding: 24rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\tborder: 1px solid #f1f5f9;\r\n\r\n\t\t\t.timer-left {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: 24rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.progress-circle {\r\n\t\t\t\twidth: 72rpx;\r\n\t\t\t\theight: 72rpx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tborder: 6rpx solid #e2e8f0;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\r\n\t\t\t\t.progress-mask {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tborder: 6rpx solid #f59e0b;\r\n\t\t\t\t\tborder-bottom-color: transparent;\r\n\t\t\t\t\tborder-left-color: transparent;\r\n\t\t\t\t\ttransform: rotate(45deg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.timer-icon { color: #f59e0b; font-size: 36rpx; }\r\n\t\t\t}\r\n\r\n\t\t\t.timer-info {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: 4rpx;\r\n\r\n\t\t\t\t.timer-title { font-size: 28rpx; font-weight: bold; color: #0f172a; }\r\n\t\t\t\t.timer-val { font-size: 24rpx; color: #64748b; font-weight: 500; }\r\n\t\t\t}\r\n\r\n\t\t\t.extend-btn {\r\n\t\t\t\theight: 52rpx;\r\n\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\tbackground-color: rgba(45, 156, 240, 0.1);\r\n\t\t\t\tcolor: #2d9cf0;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\tborder: none;\r\n\t\t\t\t\r\n\t\t\t\t&::after { border: none; }\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.time-details {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tbackground-color: #f8fafc;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\tborder: 1px solid #f1f5f9;\r\n\r\n\t\t\t.time-item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tpadding: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: 4rpx;\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t.time-divider {\r\n\t\t\t\twidth: 1px;\r\n\t\t\t\theight: 56rpx;\r\n\t\t\t\tbackground-color: #e2e8f0;\r\n\t\t\t\talign-self: center;\r\n\t\t\t}\r\n\r\n\t\t\t.time-lab { font-size: 20rpx; font-weight: bold; color: #94a3b8; }\r\n\t\t\t.time-val { font-size: 28rpx; font-weight: bold; color: #334155; }\r\n\t\t\t.accent { color: #f59e0b; }\r\n\t\t\t\r\n\t\t\t.active-dot {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 16rpx;\r\n\t\t\t\tright: 16rpx;\r\n\t\t\t\twidth: 12rpx;\r\n\t\t\t\theight: 12rpx;\r\n\t\t\t\tbackground-color: #f59e0b;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.notice-card {\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 24rpx;\r\n\t\tpadding: 28rpx;\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tborder: 1px solid #f1f5f9;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.02);\r\n\r\n\t\t.notice-icon-box {\r\n\t\t\twidth: 76rpx;\r\n\t\t\theight: 76rpx;\r\n\t\t\tbackground-color: rgba(45, 156, 240, 0.1);\r\n\t\t\tcolor: #2d9cf0;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tflex-shrink: 0;\r\n\t\t\tbox-shadow: 0 0 20rpx rgba(45, 156, 240, 0.1);\r\n\t\t\t\r\n\t\t\t.material-symbols-outlined { font-size: 40rpx; }\r\n\t\t}\r\n\r\n\t\t.notice-content {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 12rpx;\r\n\r\n\t\t\t.notice-title { font-size: 28rpx; font-weight: bold; color: #1e293b; }\r\n\t\t\t\r\n\t\t\t.notice-text {\r\n\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\tcolor: #64748b;\r\n\t\t\t\tline-height: 1.5;\r\n\t\t\t\t\r\n\t\t\t\t.keyboard-btn {\r\n\t\t\t\t\tbackground-color: #f1f5f9;\r\n\t\t\t\t\tpadding: 2rpx 12rpx;\r\n\t\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: #1e293b;\r\n\t\t\t\t\tmargin: 0 8rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.notice-tip {\r\n\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\tcolor: #94a3b8;\r\n\t\t\t\tfont-style: italic;\r\n\t\t\t\tpadding-top: 12rpx;\r\n\t\t\t\tborder-top: 1rpx dashed #e2e8f0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.btn-row {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tpadding-top: 8rpx;\r\n\r\n\t\t.action-btn {\r\n\t\t\tflex: 1;\r\n\t\t\theight: 88rpx;\r\n\t\t\tbackground-color: #ffffff;\r\n\t\t\tborder: 1px solid #e2e8f0;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tgap: 16rpx;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #475569;\r\n\t\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.02);\r\n\t\t\t\r\n\t\t\t&::after { border: none; }\r\n\r\n\t\t\t.btn-icon { font-size: 36rpx; color: #94a3b8; }\r\n\t\t\t\r\n\t\t\t&:active {\r\n\t\t\t\tborder-color: #2d9cf0;\r\n\t\t\t\tcolor: #2d9cf0;\r\n\t\t\t\t.btn-icon { color: #2d9cf0; }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.rotate {\r\n\t\t\t\ttransition: transform 0.5s;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t&:active .rotate { transform: rotate(180deg); }\r\n\t\t}\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/unlock_details/unlock_details.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","data","statusBarHeight","headerTop","propertyId","coverImage","passcode","startDate","endDate","remainSeconds","timer","computed","passcodeDisplay","raw","String","this","trim","pure","replace","test","slice","remainLabel","s","Number","isFinite","Math","floor","onLoad","options","pid","property_id","id","info","uni","index$1","getSystemInfoSync","wx","wx$1","getMenuButtonBoundingClientRect","rect","top","e","loadPasscode","loadPropertyCover","onUnload","clearTimer","methods","normalizeImage","url","imageUrl","indexOf","res","propertyApi","getDetail","public","code","p","property","videoPoster","cover_image","videoUrl","video_url","normalizedImgs","Array","isArray","images","map","u","filter","Boolean","coverCandidates","push","length","goBack","navigateBack","clearInterval","startTimer","setInterval","remain","Date","now","formatTime","ts","t","d","getHours","padStart","getMinutes","showToast","title","icon","ttlockApi","getPropertyPasscode","keyboardPwd","keyboard_pwd","start_date","end_date","max","refreshPasscode","prev","next","extendPasscode","copyPassword","setClipboardData","success","createPage","MiniProgramPage"],"mappings":"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"}