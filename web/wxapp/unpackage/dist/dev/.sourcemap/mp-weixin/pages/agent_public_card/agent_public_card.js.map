{"version":3,"file":"agent_public_card.js","sources":["pages/agent_public_card/agent_public_card.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWdlbnRfcHVibGljX2NhcmQvYWdlbnRfcHVibGljX2NhcmQudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<TopHeader title=\"经纪人名片\" />\n\n\t\t<view class=\"content\">\n\t\t\t<view class=\"card\" :style=\"{ background: currentStyle.bg }\">\n\t\t\t\t<view class=\"decor-1\"></view>\n\t\t\t\t<view class=\"decor-2\" :style=\"{ backgroundColor: currentStyle.decor2 }\"></view>\n\n\t\t\t\t<view class=\"inner\">\n\t\t\t\t\t<view class=\"top-row\">\n\t\t\t\t\t\t<view class=\"store\">\n\t\t\t\t\t\t\t<text class=\"material-symbols-outlined store-icon\">apartment</text>\n\t\t\t\t\t\t\t<text class=\"store-name\">{{ agent.store_name || '未绑定门店' }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"badge\" :style=\"{ backgroundColor: currentStyle.badgeBg }\">\n\t\t\t\t\t\t\t<text class=\"material-symbols-outlined badge-icon\">verified</text>\n\t\t\t\t\t\t\t<text>{{ currentStyle.badge }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"mid\">\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"safeImage(agent.avatar)\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"name\">{{ agent.name || '-' }}</view>\n\t\t\t\t\t\t<view class=\"title\">{{ agent.title || '置业顾问' }}</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"bottom\">\n\t\t\t\t\t\t<view class=\"line\" v-if=\"agent.store_address\">\n\t\t\t\t\t\t\t<text class=\"label\">门店地址：</text>\n\t\t\t\t\t\t\t<text class=\"val\">{{ agent.store_address }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"line\" v-if=\"agent.introduction\">\n\t\t\t\t\t\t\t<text class=\"label\">简介：</text>\n\t\t\t\t\t\t\t<text class=\"val\">{{ agent.introduction }}</text>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t<view class=\"actions\">\n\t\t\t\t\t\t\t<button class=\"btn primary\" @click=\"callAgent\" :disabled=\"!agent.mobile\">\n\t\t\t\t\t\t\t\t<text class=\"material-symbols-outlined\">call</text>\n\t\t\t\t\t\t\t\t<text>电话联系</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class=\"btn ghost\" @click=\"copyMobile\" :disabled=\"!agent.mobile\">\n\t\t\t\t\t\t\t\t<text class=\"material-symbols-outlined\">content_copy</text>\n\t\t\t\t\t\t\t\t<text>复制电话</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view v-if=\"loading\" class=\"hint\">加载中...</view>\n\t\t\t<view v-else-if=\"!loading && !agent.id\" class=\"hint\">暂无经纪人信息</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport TopHeader from '@/components/TopHeader.vue'\n\timport userApi from '@/api/user'\n\n\tfunction parseScene(scene = '') {\n\t\tconst s = String(scene || '').trim()\n\t\t// 兼容 a1_s0 / a=1&s=0\n\t\tif (s.includes('=') && s.includes('&')) {\n\t\t\tconst out = {}\n\t\t\ts.split('&').forEach((pair) => {\n\t\t\t\tconst [k, v] = pair.split('=')\n\t\t\t\tif (k) out[k] = v\n\t\t\t})\n\t\t\treturn {\n\t\t\t\tagentId: Number(out.a || out.agent_id || 0),\n\t\t\t\tstyle: Number(out.s || 0)\n\t\t\t}\n\t\t}\n\t\tconst m = s.match(/a(\\d+)_s(\\d+)/)\n\t\tif (m) return { agentId: Number(m[1] || 0), style: Number(m[2] || 0) }\n\t\tconst m2 = s.match(/a(\\d+)/)\n\t\tif (m2) return { agentId: Number(m2[1] || 0), style: 0 }\n\t\treturn { agentId: 0, style: 0 }\n\t}\n\n\texport default {\n\t\tcomponents: { TopHeader },\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tloading: true,\n\t\t\t\tagent: {},\n\t\t\t\tstyleIndex: 0,\n\t\t\t\tstyles: [\n\t\t\t\t\t{ bg: 'linear-gradient(135deg, #2d9cf0, #1e40af)', decor2: 'rgba(249, 115, 22, 0.2)', badge: 'PRO', badgeBg: '#f97316' },\n\t\t\t\t\t{ bg: 'linear-gradient(135deg, #06b6d4, #2563eb)', decor2: 'rgba(255, 255, 255, 0.12)', badge: 'TOP', badgeBg: '#22c55e' },\n\t\t\t\t\t{ bg: 'linear-gradient(135deg, #111827, #334155)', decor2: 'rgba(45, 156, 240, 0.18)', badge: 'VIP', badgeBg: '#2d9cf0' }\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tcurrentStyle() {\n\t\t\t\treturn this.styles[this.styleIndex] || this.styles[0]\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\tconst scene = options && options.scene ? decodeURIComponent(options.scene) : ''\n\t\t\tconst agentId = Number(options.agent_id || 0)\n\t\t\tconst parsed = parseScene(scene)\n\t\t\tthis.styleIndex = Math.max(0, Number(options.style || parsed.style || 0))\n\t\t\tconst id = agentId || parsed.agentId\n\t\t\tthis.fetchAgent(id)\n\t\t},\n\t\tmethods: {\n\t\t\tsafeImage(url) {\n\t\t\t\tconst u = String(url || '').trim()\n\t\t\t\treturn u || '/static/images/img_155372af18.png'\n\t\t\t},\n\t\t\tasync fetchAgent(agentId) {\n\t\t\t\tthis.loading = true\n\t\t\t\ttry {\n\t\t\t\t\tif (!agentId) {\n\t\t\t\t\t\tthis.agent = {}\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconst res = await userApi.getAgentCard({ agent_id: agentId }, true)\n\t\t\t\t\tif (!res || res.code !== 0) {\n\t\t\t\t\t\tthis.agent = {}\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthis.agent = res.data || {}\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallAgent() {\n\t\t\t\tconst mobile = String((this.agent && this.agent.mobile) || '').trim()\n\t\t\t\tif (!mobile) return\n\t\t\t\tuni.makePhoneCall({ phoneNumber: mobile })\n\t\t\t},\n\t\t\tcopyMobile() {\n\t\t\t\tconst mobile = String((this.agent && this.agent.mobile) || '').trim()\n\t\t\t\tif (!mobile) return\n\t\t\t\tuni.setClipboardData({\n\t\t\t\t\tdata: mobile,\n\t\t\t\t\tsuccess: () => uni.showToast({ title: '已复制', icon: 'none' })\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.page {\n\t\tmin-height: 100vh;\n\t\tbackground: #f6f7f8;\n\t}\n\n\t.content {\n\t\tpadding: 24rpx;\n\t}\n\n\t.card {\n\t\tposition: relative;\n\t\tborder-radius: 40rpx;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 40rpx 80rpx rgba(0, 0, 0, 0.18);\n\t\tborder: 1rpx solid rgba(255, 255, 255, 0.08);\n\t}\n\n\t.decor-1 {\n\t\tposition: absolute;\n\t\ttop: -80rpx;\n\t\tright: -80rpx;\n\t\twidth: 256rpx;\n\t\theight: 256rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: rgba(255, 255, 255, 0.08);\n\t}\n\n\t.decor-2 {\n\t\tposition: absolute;\n\t\tbottom: -90rpx;\n\t\tleft: -90rpx;\n\t\twidth: 320rpx;\n\t\theight: 320rpx;\n\t\tborder-radius: 50%;\n\t\tbackground: rgba(249, 115, 22, 0.2);\n\t}\n\n\t.inner {\n\t\tposition: relative;\n\t\tz-index: 2;\n\t\tpadding: 40rpx;\n\t\tcolor: #fff;\n\t}\n\n\t.top-row {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t}\n\n\t.store {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\t.store-icon { font-size: 34rpx; opacity: 0.9; }\n\t\t.store-name { font-size: 28rpx; font-weight: 800; opacity: 0.95; }\n\t}\n\n\t.badge {\n\t\tpadding: 6rpx 16rpx;\n\t\tborder-radius: 40rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tfont-size: 22rpx;\n\t\tfont-weight: 800;\n\t\t.badge-icon { font-size: 26rpx; }\n\t}\n\n\t.mid {\n\t\tpadding: 50rpx 0 30rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\t.avatar {\n\t\t\twidth: 180rpx;\n\t\t\theight: 180rpx;\n\t\t\tborder-radius: 50%;\n\t\t\tborder: 6rpx solid rgba(255, 255, 255, 0.25);\n\t\t\tbackground: rgba(255, 255, 255, 0.06);\n\t\t}\n\t\t.name { font-size: 44rpx; font-weight: 900; }\n\t\t.title { font-size: 28rpx; font-weight: 600; opacity: 0.86; }\n\t}\n\n\t.bottom {\n\t\tbackground: rgba(255, 255, 255, 0.10);\n\t\tborder: 1rpx solid rgba(255, 255, 255, 0.08);\n\t\tborder-radius: 28rpx;\n\t\tpadding: 22rpx 22rpx;\n\t\t.line {\n\t\t\tdisplay: flex;\n\t\t\tgap: 8rpx;\n\t\t\tline-height: 1.5;\n\t\t\tmargin-bottom: 12rpx;\n\t\t}\n\t\t.label { font-size: 24rpx; opacity: 0.78; }\n\t\t.val { font-size: 26rpx; font-weight: 600; opacity: 0.92; }\n\t}\n\n\t.actions {\n\t\tmargin-top: 8rpx;\n\t\tdisplay: flex;\n\t\tgap: 16rpx;\n\t\t.btn {\n\t\t\tflex: 1;\n\t\t\theight: 84rpx;\n\t\t\tborder-radius: 22rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tgap: 10rpx;\n\t\t\tfont-size: 30rpx;\n\t\t\tfont-weight: 800;\n\t\t\tborder: none;\n\t\t\t&::after { border: none; }\n\t\t}\n\t\t.primary {\n\t\t\tbackground: rgba(255, 255, 255, 0.95);\n\t\t\tcolor: #0f172a;\n\t\t}\n\t\t.ghost {\n\t\t\tbackground: rgba(255, 255, 255, 0.14);\n\t\t\tcolor: #ffffff;\n\t\t}\n\t}\n\n\t.hint {\n\t\tpadding: 28rpx 0;\n\t\ttext-align: center;\n\t\tcolor: #64748b;\n\t\tfont-size: 26rpx;\n\t}\n</style>\n\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/agent_public_card/agent_public_card.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","components","TopHeader","data","loading","agent","styleIndex","styles","bg","decor2","badge","badgeBg","computed","currentStyle","this","onLoad","options","scene","decodeURIComponent","agentId","Number","agent_id","parsed","s","String","trim","includes","out","split","forEach","pair","k","v","a","style","m","match","m2","parseScene","Math","max","id","fetchAgent","methods","safeImage","url","res","userApi","getAgentCard","code","callAgent","mobile","uni","makePhoneCall","phoneNumber","copyMobile","setClipboardData","success","index$1","showToast","title","icon","wx","createPage","MiniProgramPage"],"mappings":"sFAkFC,MAAKA,EAAU,CACdC,WAAY,CAAEC,UAzBG,IAAW,iCA0B5BC,KAAO,KACC,CACNC,SAAS,EACTC,MAAO,CAAE,EACTC,WAAY,EACZC,OAAQ,CACP,CAAEC,GAAI,4CAA6CC,OAAQ,0BAA2BC,MAAO,MAAOC,QAAS,WAC7G,CAAEH,GAAI,4CAA6CC,OAAQ,4BAA6BC,MAAO,MAAOC,QAAS,WAC/G,CAAEH,GAAI,4CAA6CC,OAAQ,2BAA4BC,MAAO,MAAOC,QAAS,cAIjHC,SAAU,CACT,YAAAC,GACC,OAAOC,KAAKP,OAAOO,KAAKR,aAAeQ,KAAKP,OAAO,EACpD,GAED,MAAAQ,CAAOC,GACN,MAAMC,EAAQD,GAAWA,EAAQC,MAAQC,mBAAmBF,EAAQC,OAAS,GACvEE,EAAUC,OAAOJ,EAAQK,UAAY,GACrCC,EA3CR,SAAoBL,EAAQ,IAC3B,MAAMM,EAAIC,OAAOP,GAAS,IAAIQ,OAE9B,GAAIF,EAAEG,SAAS,MAAQH,EAAEG,SAAS,KAAM,CACvC,MAAMC,EAAM,CAAC,EAKN,OAJPJ,EAAEK,MAAM,KAAKC,SAASC,IACrB,MAAOC,EAAGC,GAAKF,EAAKF,MAAM,KACtBG,IAAGJ,EAAII,GAAKC,EAAA,IAEV,CACNb,QAASC,OAAOO,EAAIM,GAAKN,EAAIN,UAAY,GACzCa,MAAOd,OAAOO,EAAIJ,GAAK,GAEzB,CACM,MAAAY,EAAIZ,EAAEa,MAAM,iBACd,GAAAD,EAAG,MAAO,CAAEhB,QAASC,OAAOe,EAAE,IAAM,GAAID,MAAOd,OAAOe,EAAE,IAAM,IAC5D,MAAAE,EAAKd,EAAEa,MAAM,UACf,OAAAC,EAAW,CAAElB,QAASC,OAAOiB,EAAG,IAAM,GAAIH,MAAO,GAC9C,CAAEf,QAAS,EAAGe,MAAO,EAC7B,CAwBiBI,CAAWrB,GACrBH,KAAAR,WAAaiC,KAAKC,IAAI,EAAGpB,OAAOJ,EAAQkB,OAASZ,EAAOY,OAAS,IAChE,MAAAO,EAAKtB,GAAWG,EAAOH,QAC7BL,KAAK4B,WAAWD,EAChB,EACDE,QAAS,CACRC,UAAUC,GACCrB,OAAOqB,GAAO,IAAIpB,QAChB,oCAEb,gBAAMiB,CAAWvB,GAChBL,KAAKV,SAAU,EACX,IACH,IAAKe,EAEJ,YADAL,KAAKT,MAAQ,CAAC,GAGT,MAAAyC,QAAYC,UAAQC,aAAa,CAAE3B,SAAUF,IAAW,GAC9D,IAAK2B,GAAoB,IAAbA,EAAIG,KAEf,YADAnC,KAAKT,MAAQ,CAAC,GAGVS,KAAAT,MAAQyC,EAAI3C,MAAQ,CAAC,CAC3B,CAAU,QACTW,KAAKV,SAAU,CAChB,CACA,EACD,SAAA8C,GACO,MAAAC,EAAS3B,OAAQV,KAAKT,OAASS,KAAKT,MAAM8C,QAAW,IAAI1B,OAC1D0B,GACLC,EAAAA,QAAIC,cAAc,CAAEC,YAAaH,GACjC,EACD,UAAAI,GACO,MAAAJ,EAAS3B,OAAQV,KAAKT,OAASS,KAAKT,MAAM8C,QAAW,IAAI1B,OAC1D0B,GACLC,EAAAA,QAAII,iBAAiB,CACpBrD,KAAMgD,EACNM,QAAS,IAAML,EAAGM,QAACC,UAAU,CAAEC,MAAO,MAAOC,KAAM,UAErD,guBC9IHC,GAAGC,WAAWC"}