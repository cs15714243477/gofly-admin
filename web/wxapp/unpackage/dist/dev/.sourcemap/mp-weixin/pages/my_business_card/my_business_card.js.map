{"version":3,"file":"my_business_card.js","sources":["pages/my_business_card/my_business_card.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXlfYnVzaW5lc3NfY2FyZC9teV9idXNpbmVzc19jYXJkLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"card-container\">\n    <!-- 顶部导航 -->\n    <TopHeader title=\"获客\" />\n\n    <!-- 选项卡切换 -->\n    <view class=\"tabs-box\">\n      <view class=\"tabs-inner\">\n        <view\n          class=\"tab-item\"\n          :class=\"{ active: currentTab === 0 }\"\n          @click=\"currentTab = 0\"\n          >名片预览</view\n        >\n        <view\n          class=\"tab-item\"\n          :class=\"{ active: currentTab === 1 }\"\n          @click=\"currentTab = 1\"\n          >编辑资料</view\n        >\n      </view>\n    </view>\n\n    <view class=\"main-content\">\n      <!-- 名片预览内容 -->\n      <view v-if=\"currentTab === 0\" class=\"preview-content\">\n        <view class=\"pagination-dots\">\n          <view\n            v-for=\"(_, i) in previewCards\"\n            :key=\"i\"\n            class=\"dot\"\n            :class=\"{ active: currentPreview === i }\"\n          ></view>\n        </view>\n\n        <swiper\n          class=\"card-swiper\"\n          circular\n          :indicator-dots=\"false\"\n          :current=\"currentPreview\"\n          @change=\"onPreviewChange\"\n        >\n          <swiper-item v-for=\"(c, idx) in previewCards\" :key=\"idx\">\n            <view class=\"card-slide\">\n              <view class=\"business-card\" :style=\"{ background: c.bg }\">\n                <view class=\"card-decor-1\"></view>\n                <view\n                  class=\"card-decor-2\"\n                  :style=\"{ backgroundColor: c.decor2 }\"\n                ></view>\n\n                <view class=\"card-inner\">\n                  <view class=\"card-top\">\n                    <view class=\"company-info\">\n                      <view class=\"company-logo\">\n                        <text class=\"material-symbols-outlined\">apartment</text>\n                      </view>\n                      <text class=\"company-name\">{{\n                        c.store || \"未绑定门店\"\n                      }}</text>\n                    </view>\n                    <view\n                      class=\"pro-tag\"\n                      :style=\"{ backgroundColor: c.badgeBg }\"\n                    >\n                      <text class=\"material-symbols-outlined pro-icon\"\n                        >verified</text\n                      >\n                      <text>{{ c.badge }}</text>\n                    </view>\n                  </view>\n\n                  <view class=\"card-middle\">\n                    <image\n                      v-if=\"safeImage(c.avatar)\"\n                      class=\"card-avatar\"\n                      :src=\"safeImage(c.avatar)\"\n                      mode=\"aspectFill\"\n                    ></image>\n                    <view v-else class=\"card-avatar card-avatar-empty\">\n                      <text class=\"material-symbols-outlined\">person</text>\n                    </view>\n                    <view class=\"card-user\">\n                      <text class=\"card-name\">{{ c.name }}</text>\n                      <text class=\"card-role\">{{ c.role }}</text>\n                    </view>\n                    <view class=\"card-tags\">\n                      <text\n                        class=\"card-tag\"\n                        v-for=\"(t, tIdx) in c.tags\"\n                        :key=\"tIdx\"\n                        >{{ t }}</text\n                      >\n                    </view>\n                  </view>\n\n                  <view class=\"card-bottom\">\n                    <view class=\"contact-info\">\n                      <view class=\"contact-item\">\n                        <view class=\"contact-icon\">\n                          <text class=\"material-symbols-outlined\">call</text>\n                        </view>\n                        <view class=\"contact-text\">\n                          <text class=\"contact-label\">Phone</text>\n                          <text class=\"contact-val\">{{ c.phone }}</text>\n                        </view>\n                      </view>\n                    </view>\n                    <view class=\"extra-info\">\n                      <view class=\"extra-text\">\n                        <text class=\"extra-line\">\n                          <text class=\"extra-label\">微信号：</text>\n                          <text class=\"extra-val\">{{ c.wechat }}</text>\n                        </text>\n                        <text class=\"extra-line\">\n                          <text class=\"extra-label\">门店：</text>\n                          <text class=\"extra-val\">{{ c.store }}</text>\n                        </text>\n                      </view>\n                      <view class=\"qr-code\" @click=\"previewQrCode\">\n                        <image\n                          v-if=\"qrCodeUrl\"\n                          class=\"qr-image\"\n                          :src=\"qrCodeUrl\"\n                          mode=\"aspectFill\"\n                        ></image>\n                        <text v-else class=\"material-symbols-outlined\"\n                          >qr_code_2</text\n                        >\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </swiper-item>\n        </swiper>\n\n        <text class=\"swipe-tip\">左右滑动切换名片样式</text>\n      </view>\n\n      <!-- 编辑资料内容 -->\n      <scroll-view v-if=\"currentTab === 1\" scroll-y=\"true\" class=\"edit-scroll\">\n        <view class=\"edit-content\">\n          <view class=\"form-group\">\n            <view class=\"form-item\" @click=\"changeAvatar\">\n              <text class=\"label\">头像</text>\n              <view class=\"val-box\">\n                <image\n                  v-if=\"safeImage(profile.avatar)\"\n                  class=\"avatar\"\n                  :src=\"safeImage(profile.avatar)\"\n                  mode=\"aspectFill\"\n                ></image>\n                <view v-else class=\"avatar avatar-empty\">\n                  <text class=\"material-symbols-outlined\">person</text>\n                </view>\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n            </view>\n            <view class=\"form-item\">\n              <text class=\"label\">姓名</text>\n              <view class=\"val-box\">\n                <input\n                  class=\"val-input\"\n                  v-model=\"profile.name\"\n                  placeholder=\"请输入姓名\"\n                  placeholder-class=\"val-placeholder\"\n                />\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n            </view>\n            <view\n              class=\"form-item\"\n              @click=\"showUneditable('手机号由平台绑定，不支持修改')\"\n            >\n              <text class=\"label\">电话</text>\n              <view class=\"val-box\">\n                <text class=\"val\">{{ profile.phone }}</text>\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n            </view>\n            <view class=\"form-item\">\n              <text class=\"label\">微信号</text>\n              <view class=\"val-box\">\n                <input\n                  class=\"val-input\"\n                  v-model=\"profile.wechat\"\n                  placeholder=\"选填：用于名片展示\"\n                  placeholder-class=\"val-placeholder\"\n                />\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n            </view>\n            <view class=\"form-item no-border\">\n              <text class=\"label\">职位</text>\n              <view class=\"val-box\">\n                <input\n                  class=\"val-input\"\n                  v-model=\"profile.role\"\n                  placeholder=\"如：资深置业顾问\"\n                  placeholder-class=\"val-placeholder\"\n                />\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n            </view>\n          </view>\n\n          <view class=\"notice-section\">\n            <view class=\"form-group\">\n              <picker\n                mode=\"selector\"\n                :range=\"storeOptions\"\n                range-key=\"name\"\n                @change=\"onStorePickerChange\"\n              >\n                <view class=\"form-item\">\n                  <text class=\"label\">门店</text>\n                  <view class=\"val-box\">\n                    <text class=\"val\">{{ profile.store || \"请选择门店\" }}</text>\n                    <text class=\"material-symbols-outlined arrow-icon\"\n                      >chevron_right</text\n                    >\n                  </view>\n                </view>\n              </picker>\n              <view class=\"form-item no-border\" v-if=\"profile.store_address\">\n                <text class=\"label\">门店地址</text>\n                <text class=\"val small\">{{ profile.store_address }}</text>\n              </view>\n            </view>\n            <text class=\"tip-text\"\n              >* 门店可修改，建议选择与你当前服务区域一致的门店。</text\n            >\n          </view>\n\n          <view class=\"form-group bio-group\">\n            <text class=\"label\">自我介绍</text>\n            <textarea\n              v-model=\"profile.intro\"\n              class=\"bio-textarea\"\n              placeholder=\"介绍一下你的从业经历和服务理念...\"\n            ></textarea>\n          </view>\n\n          <view class=\"form-group tags-group\">\n            <view class=\"tags-header\">\n              <text class=\"label\">擅长领域</text>\n              <view class=\"add-tag-btn\" @click=\"openAddTag\">\n                <text class=\"material-symbols-outlined add-icon\">add</text>\n                <text>添加标签</text>\n              </view>\n            </view>\n            <view class=\"tags-row\">\n              <view\n                class=\"tag active\"\n                v-for=\"(t, idx) in profile.tags\"\n                :key=\"'active-' + idx\"\n                @click=\"removeTag(idx)\"\n              >\n                <text>{{ t }}</text>\n                <text class=\"material-symbols-outlined close-icon\">close</text>\n              </view>\n              <view\n                class=\"tag\"\n                v-for=\"(t, idx) in suggestTags\"\n                :key=\"'suggest-' + idx\"\n                @click=\"addTag(t)\"\n              >\n                <text>{{ t }}</text>\n                <text class=\"material-symbols-outlined add-icon\">add</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"form-group recommend-group\">\n            <view class=\"tags-header\">\n              <text class=\"label\">名片推荐房源</text>\n              <view class=\"add-tag-btn\" @click=\"openRecommendPopup\">\n                <text class=\"material-symbols-outlined add-icon\"\n                  >edit_square</text\n                >\n                <text>设置</text>\n              </view>\n            </view>\n            <view\n              class=\"recommend-tags\"\n              v-if=\"selectedRecommendProperties.length > 0\"\n            >\n              <view\n                class=\"recommend-tag\"\n                v-for=\"item in selectedRecommendProperties\"\n                :key=\"'sel-' + item.id\"\n              >\n                {{ item.title || \"-\" }}\n              </view>\n            </view>\n            <view class=\"recommend-empty\" v-else>未设置经纪人推荐房源</view>\n            <text class=\"tip-text\"\n              >* 最多可设置\n              {{ recommendMaxCount }} 套，分享名片页会优先展示。</text\n            >\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 底部操作（占位在页面内，避免出现页面滚动） -->\n    <view class=\"footer share-footer\" v-if=\"currentTab === 0\">\n      <view class=\"share-options\">\n        <button class=\"share-item share-btn\" open-type=\"share\">\n          <view class=\"share-icon green\">\n            <text class=\"material-symbols-outlined\">chat_bubble</text>\n          </view>\n          <text class=\"share-label\">发送给朋友</text>\n        </button>\n        <view class=\"share-item\" @click=\"saveCardImage\">\n          <view class=\"share-icon blue\">\n            <text class=\"material-symbols-outlined\">image</text>\n          </view>\n          <text class=\"share-label\">保存图片</text>\n        </view>\n        <view class=\"share-item\" @click=\"copyCardLink\">\n          <view class=\"share-icon orange\">\n            <text class=\"material-symbols-outlined\">link</text>\n          </view>\n          <text class=\"share-label\">复制链接</text>\n        </view>\n        <view class=\"share-item\" @click=\"showMoreActions\">\n          <view class=\"share-icon grey\">\n            <text class=\"material-symbols-outlined\">more_horiz</text>\n          </view>\n          <text class=\"share-label\">更多</text>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"footer\" v-if=\"currentTab === 1\">\n      <button class=\"save-btn\" :disabled=\"saving\" @click=\"saveProfile\">\n        <text class=\"material-symbols-outlined\">save</text>\n        <text>{{ saving ? \"保存中...\" : \"保存修改\" }}</text>\n      </button>\n    </view>\n\n    <!-- 添加标签弹窗（简单实现，避免额外依赖组件） -->\n    <view class=\"mask-popup\" v-if=\"tagPopupVisible\" @click=\"closeAddTag\">\n      <view class=\"popup-card\" @click.stop>\n        <view class=\"popup-title\">添加标签</view>\n        <input\n          class=\"popup-input\"\n          v-model=\"newTagText\"\n          placeholder=\"如：学区房专家\"\n          placeholder-class=\"val-placeholder\"\n          maxlength=\"12\"\n        />\n        <view class=\"popup-actions\">\n          <button class=\"popup-btn ghost\" @click=\"closeAddTag\">取消</button>\n          <button class=\"popup-btn primary\" @click=\"confirmAddTag\">确定</button>\n        </view>\n      </view>\n    </view>\n\n    <view\n      class=\"mask-popup\"\n      v-if=\"recommendPopupVisible\"\n      @click=\"closeRecommendPopup\"\n    >\n      <view class=\"popup-card recommend-popup-card\" @click.stop>\n        <view class=\"popup-title\">设置名片推荐房源</view>\n        <view class=\"popup-subtitle\">最多选择 {{ recommendMaxCount }} 套</view>\n        <scroll-view scroll-y=\"true\" class=\"recommend-popup-list\">\n          <view\n            class=\"recommend-popup-item\"\n            v-for=\"item in recommendCandidates\"\n            :key=\"'cand-' + item.id\"\n            @click=\"toggleRecommendItem(item)\"\n          >\n            <view class=\"recommend-popup-main\">\n              <view class=\"recommend-popup-title\">{{ item.title || \"-\" }}</view>\n              <view class=\"recommend-popup-meta\">{{\n                formatRecommendMeta(item)\n              }}</view>\n            </view>\n            <text\n              class=\"material-symbols-outlined check-icon\"\n              :class=\"{ active: isRecommendSelected(item.id) }\"\n            >\n              {{\n                isRecommendSelected(item.id)\n                  ? \"check_circle\"\n                  : \"radio_button_unchecked\"\n              }}\n            </text>\n          </view>\n        </scroll-view>\n        <view class=\"popup-actions\">\n          <button class=\"popup-btn ghost\" @click=\"closeRecommendPopup\">\n            取消\n          </button>\n          <button\n            class=\"popup-btn primary\"\n            :disabled=\"savingRecommend\"\n            @click=\"saveRecommendConfig\"\n          >\n            {{ savingRecommend ? \"保存中...\" : \"保存\" }}\n          </button>\n        </view>\n      </view>\n    </view>\n\n    <!-- 底部导航（与首页一致） -->\n    <BottomTabBar active=\"marketing\" />\n\n    <!-- 生成名片图片用：隐藏 canvas -->\n    <canvas\n      canvas-id=\"cardCanvas\"\n      id=\"cardCanvas\"\n      class=\"hidden-canvas\"\n      :style=\"{ width: canvasWidth + 'px', height: canvasHeight + 'px' }\"\n      :width=\"canvasWidth * canvasScale\"\n      :height=\"canvasHeight * canvasScale\"\n    ></canvas>\n  </view>\n</template>\n\n<script>\nimport BottomTabBar from \"@/components/BottomTabBar.vue\";\nimport TopHeader from \"@/components/TopHeader.vue\";\nimport userApi from \"@/api/user\";\nimport $store from \"@/store\";\nimport md5 from \"js-md5\";\nimport { baseUrl } from \"@/utils/config\";\n\nfunction base64Encode(str = \"\") {\n  try {\n    // #ifdef H5\n    return window.btoa(str);\n    // #endif\n  } catch (e) {}\n  // #ifndef H5\n  const utf8ToBytes = (s) => {\n    const bytes = [];\n    for (let i = 0; i < s.length; i++) {\n      let codePoint = s.charCodeAt(i);\n      if (codePoint < 0x80) {\n        bytes.push(codePoint);\n      } else if (codePoint < 0x800) {\n        bytes.push(0xc0 | (codePoint >> 6));\n        bytes.push(0x80 | (codePoint & 0x3f));\n      } else {\n        bytes.push(0xe0 | (codePoint >> 12));\n        bytes.push(0x80 | ((codePoint >> 6) & 0x3f));\n        bytes.push(0x80 | (codePoint & 0x3f));\n      }\n    }\n    return new Uint8Array(bytes);\n  };\n  const buf = utf8ToBytes(str).buffer;\n  // eslint-disable-next-line no-undef\n  if (typeof wx !== \"undefined\" && wx.arrayBufferToBase64)\n    return wx.arrayBufferToBase64(buf);\n  if (typeof uni !== \"undefined\" && uni.arrayBufferToBase64)\n    return uni.arrayBufferToBase64(buf);\n  return \"\";\n  // #endif\n}\n\nexport default {\n  components: { BottomTabBar, TopHeader },\n  onLoad(options) {\n    // 支持从“我的”页跳转过来直接打开“编辑资料”\n    const tab = options && (options.tab || options.currentTab);\n    if (tab === \"1\" || tab === 1 || tab === \"edit\") {\n      this.currentTab = 1;\n    }\n    this.initCanvasSize();\n    this.loadProfile().catch(() => {});\n  },\n  onShow() {\n    // 返回页面后，防止缓存导致信息不更新\n    this.loadProfile(false).catch(() => {});\n  },\n  onShareAppMessage() {\n    const name = (this.profile && this.profile.name) || \"我\";\n    const agentId = Number(this.loadedUserId || 0);\n    const style = Number(this.currentPreview || 0);\n    return {\n      title: `${name}的名片`,\n      path: `/pages/agent_public_card/agent_public_card?agent_id=${encodeURIComponent(agentId)}&style=${encodeURIComponent(style)}`,\n    };\n  },\n  data() {\n    return {\n      // 默认先展示名片预览\n      currentTab: 0,\n      currentPreview: 0,\n      qrCodeUrl: \"\",\n      styleChangeTimer: null,\n      saving: false,\n      savingImage: false,\n      tagPopupVisible: false,\n      recommendPopupVisible: false,\n      newTagText: \"\",\n      loadedUserId: 0,\n      storeOptions: [],\n      recommendMaxCount: 20,\n      recommendCandidates: [],\n      selectedRecommendIds: [],\n      selectedRecommendProperties: [],\n      pendingRecommendIds: [],\n      savingRecommend: false,\n      canvasWidth: 900,\n      canvasHeight: 1320,\n      canvasScale: 2,\n      // “我的资料”数据源：名片预览与编辑资料保持一致\n      profile: {\n        avatar: \"\",\n        name: \"\",\n        phone: \"\",\n        wechat: \"\",\n        role: \"\",\n        store_id: 0,\n        store: \"\",\n        store_address: \"\",\n        email: \"\",\n        intro: \"\",\n        tags: [],\n      },\n      suggestTags: [\n        \"学区房专家\",\n        \"二手房买卖\",\n        \"新房咨询\",\n        \"高端别墅\",\n        \"婚房首选\",\n        \"投资置业\",\n      ],\n      // 名片样式（只改变视觉，不改变字段）\n      cardStyles: [\n        {\n          bg: \"linear-gradient(135deg, #2d9cf0, #1e40af)\",\n          decor2: \"rgba(249, 115, 22, 0.2)\",\n          badge: \"PRO\",\n          badgeBg: \"#f97316\",\n        },\n        {\n          bg: \"linear-gradient(135deg, #06b6d4, #2563eb)\",\n          decor2: \"rgba(255, 255, 255, 0.12)\",\n          badge: \"TOP\",\n          badgeBg: \"#22c55e\",\n        },\n        {\n          bg: \"linear-gradient(135deg, #111827, #334155)\",\n          decor2: \"rgba(45, 156, 240, 0.18)\",\n          badge: \"VIP\",\n          badgeBg: \"#2d9cf0\",\n        },\n      ],\n    };\n  },\n  computed: {\n    previewCards() {\n      const p = this.profile || {};\n      const tags = Array.isArray(p.tags) ? p.tags.slice(0, 3) : [];\n      return (this.cardStyles || []).map((s) => ({\n        ...s,\n        name: p.name,\n        role: p.role,\n        phone: p.phone,\n        wechat: p.wechat,\n        store: p.store,\n        avatar: p.avatar,\n        tags,\n      }));\n    },\n  },\n  watch: {\n    currentTab(v) {\n      if (Number(v) === 1) {\n        this.loadStores().catch(() => {});\n        this.loadRecommendConfig(false).catch(() => {});\n      }\n    },\n  },\n  methods: {\n    initCanvasSize() {\n      try {\n        const sys = uni.getSystemInfoSync ? uni.getSystemInfoSync() : {};\n        const pr = Number(sys.pixelRatio || 2);\n        // 固定导出海报尺寸（与绘制坐标系一致：900x1320）\n        this.canvasWidth = 900;\n        this.canvasHeight = 1320;\n\n        // 部分机型/环境下 canvas 的像素边长过大，会导致导出只截取左上角。\n        // 这里按最大边长做一次兜底，确保“能完整导出”优先。\n        const maxSidePx = 2000;\n        let scale = Math.min(3, pr || 2);\n        const byW = Math.floor(maxSidePx / this.canvasWidth);\n        const byH = Math.floor(maxSidePx / this.canvasHeight);\n        scale = Math.min(scale, Math.max(1, byW), Math.max(1, byH));\n        this.canvasScale = Math.max(1, scale);\n      } catch (e) {}\n    },\n    onPreviewChange(e) {\n      this.currentPreview = e.detail.current;\n      this.persistDefaultStyle();\n      this.scheduleWxaCodeRefresh();\n    },\n    safeImage(url) {\n      const u = String(url || \"\").trim();\n      if (!u) return \"\";\n      if (u.indexOf(\"/static/images/\") === 0) return \"\";\n      return u;\n    },\n    extrasStorageKey(uid) {\n      return `wxapp_my_business_card_extras_${uid || 0}`;\n    },\n    loadExtras(uid) {\n      const key = this.extrasStorageKey(uid);\n      const raw = uni.getStorageSync(key);\n      if (!raw) return {};\n      try {\n        if (typeof raw === \"string\") return JSON.parse(raw);\n        return raw || {};\n      } catch (e) {\n        return {};\n      }\n    },\n    saveExtras(uid) {\n      const key = this.extrasStorageKey(uid);\n      const payload = {\n        wechat: String(this.profile.wechat || \"\").trim(),\n        tags: Array.isArray(this.profile.tags) ? this.profile.tags : [],\n      };\n      try {\n        uni.setStorageSync(key, JSON.stringify(payload));\n      } catch (e) {\n        uni.setStorageSync(key, payload);\n      }\n    },\n    async loadProfile(showLoading = true) {\n      const token = uni.getStorageSync(\"token\");\n      if (!token && !$store(\"user\").isLogin) return;\n      const res = await userApi.getCardProfile(!!showLoading);\n      if (!res || res.code !== 0) return;\n      const d = res.data || {};\n      const uid = Number(d.id || d.ID || 0);\n      this.loadedUserId = uid;\n      this.profile.avatar = d.avatar || \"\";\n      this.profile.name = d.name || d.nickname || \"\";\n      this.profile.phone = d.mobile || \"\";\n      this.profile.role = d.title || d.role || \"\";\n      this.profile.store_id = Number(d.store_id || 0);\n      this.profile.store = d.store_name || \"\";\n      this.profile.store_address = d.store_address || \"\";\n      this.profile.email = d.email || \"\";\n      this.profile.intro = d.introduction || \"\";\n\n      // 读取上次选择的样式\n      const idx = Number(uni.getStorageSync(this.styleStorageKey(uid)) || 0);\n      if (!Number.isNaN(idx) && idx >= 0) this.currentPreview = idx;\n\n      const extras = this.loadExtras(uid);\n      if (extras) {\n        if (typeof extras.wechat === \"string\")\n          this.profile.wechat = extras.wechat;\n        if (Array.isArray(extras.tags)) this.profile.tags = extras.tags;\n      }\n\n      // 刷新小程序码（与当前样式绑定，scene 内携带样式下标）\n      this.loadWxaCode(false).catch(() => {});\n      this.loadRecommendConfig(false).catch(() => {});\n    },\n    styleStorageKey(uid) {\n      return `wxapp_my_business_card_style_${uid || 0}`;\n    },\n    persistDefaultStyle() {\n      if (!this.loadedUserId) return;\n      uni.setStorageSync(\n        this.styleStorageKey(this.loadedUserId),\n        Number(this.currentPreview || 0),\n      );\n    },\n    scheduleWxaCodeRefresh() {\n      if (this.styleChangeTimer) {\n        clearTimeout(this.styleChangeTimer);\n        this.styleChangeTimer = null;\n      }\n      this.styleChangeTimer = setTimeout(() => {\n        this.loadWxaCode(false).catch(() => {});\n      }, 220);\n    },\n    /**\n     * 加载代理商小程序码\n     *\n     * 根据当前选择的样式生成代理商专属的小程序码URL，支持开发环境跳过路径校验\n     *\n     * @param {boolean} [showLoading=true] - 是否显示加载提示\n     * @returns {Promise<void>} 无返回值，通过组件属性更新小程序码URL\n     */\n    async loadWxaCode(showLoading = true) {\n      // 检查用户登录状态\n      const token = uni.getStorageSync(\"token\");\n      if (!token && !$store(\"user\").isLogin) return;\n      // 构建请求参数，包含当前选择的样式\n      const data = { style: Number(this.currentPreview || 0) };\n      // 开发/测试阶段：允许跳过页面路径校验，避免新页面未发布导致生成失败\n      // 注意：小程序环境可能没有全局 process，不能直接写 `process && ...`，否则会抛 ReferenceError\n      const isDev =\n        (typeof process !== \"undefined\" &&\n          process.env &&\n          process.env.NODE_ENV === \"development\") ||\n        (typeof wx !== \"undefined\" &&\n          wx.getAccountInfoSync &&\n          [\"develop\", \"trial\"].includes(\n            (wx.getAccountInfoSync().miniProgram || {}).envVersion,\n          ));\n      if (isDev) data.check_path = false;\n      // 调用API获取小程序码\n      const res = await userApi.getAgentWxaCode(data, !!showLoading);\n      // 检查响应结果\n      if (!res || res.code !== 0) return;\n      // 更新小程序码URL\n      this.qrCodeUrl = (res.data && res.data.url) || \"\";\n    },\n    previewQrCode() {\n      if (!this.qrCodeUrl) {\n        uni.showToast({ title: \"小程序码生成中...\", icon: \"none\" });\n        this.loadWxaCode(true).catch(() => {});\n        return;\n      }\n      uni.previewImage({ urls: [this.qrCodeUrl] });\n    },\n    async loadStores() {\n      const token = uni.getStorageSync(\"token\");\n      if (!token && !$store(\"user\").isLogin) return;\n      const res = await userApi.getStores(false);\n      if (!res || res.code !== 0) return;\n      const items = Array.isArray(res.data) ? res.data : [];\n      this.storeOptions = items;\n    },\n    onStorePickerChange(e) {\n      const idx = Number(e && e.detail ? e.detail.value : -1);\n      if (!Array.isArray(this.storeOptions) || this.storeOptions.length === 0) {\n        uni.showToast({ title: \"暂无可选门店\", icon: \"none\" });\n        return;\n      }\n      if (idx < 0 || idx >= this.storeOptions.length) return;\n      const s = this.storeOptions[idx] || {};\n      this.profile.store_id = Number(s.id || 0);\n      this.profile.store = s.name || \"\";\n      this.profile.store_address = s.address || \"\";\n    },\n    showUneditable(msg) {\n      uni.showToast({ title: msg || \"不支持修改\", icon: \"none\" });\n    },\n    openAddTag() {\n      this.newTagText = \"\";\n      this.tagPopupVisible = true;\n    },\n    closeAddTag() {\n      this.tagPopupVisible = false;\n      this.newTagText = \"\";\n    },\n    confirmAddTag() {\n      const t = String(this.newTagText || \"\").trim();\n      if (!t) {\n        uni.showToast({ title: \"请输入标签内容\", icon: \"none\" });\n        return;\n      }\n      this.addTag(t);\n      this.closeAddTag();\n    },\n    addTag(t) {\n      const tag = String(t || \"\").trim();\n      if (!tag) return;\n      if (!Array.isArray(this.profile.tags)) this.profile.tags = [];\n      if (this.profile.tags.includes(tag)) return;\n      if (this.profile.tags.length >= 6) {\n        uni.showToast({ title: \"最多添加6个标签\", icon: \"none\" });\n        return;\n      }\n      this.profile.tags = this.profile.tags.concat([tag]);\n    },\n    removeTag(idx) {\n      if (!Array.isArray(this.profile.tags)) return;\n      this.profile.tags = this.profile.tags.filter((_, i) => i !== idx);\n    },\n    formatRecommendMeta(item) {\n      const area = item && item.area ? `${item.area}㎡` : \"\";\n      const rooms = Number(item && item.rooms) || 0;\n      const halls = Number(item && item.halls) || 0;\n      const bathrooms = Number(item && item.bathrooms) || 0;\n      let layout = \"\";\n      if (rooms || halls || bathrooms)\n        layout = `${rooms}室${halls}厅${bathrooms}卫`;\n      const community = String((item && item.community_name) || \"\").trim();\n      return (\n        [community, layout, area].filter(Boolean).join(\" · \") || \"基础信息\"\n      );\n    },\n    async loadRecommendConfig(showLoading = false) {\n      const token = uni.getStorageSync(\"token\");\n      if (!token && !$store(\"user\").isLogin) return;\n      const res = await userApi.getAgentCardRecommendConfig(!!showLoading);\n      if (!res || res.code !== 0) return;\n      const data = res.data || {};\n      const maxCount = Number(data.max_count || 20) || 20;\n      this.recommendMaxCount = maxCount;\n      this.selectedRecommendIds = Array.isArray(data.selected_ids)\n        ? data.selected_ids.map((id) => Number(id) || 0).filter(Boolean)\n        : [];\n      this.selectedRecommendProperties = Array.isArray(data.selected_properties)\n        ? data.selected_properties\n        : [];\n      this.recommendCandidates = Array.isArray(data.candidates)\n        ? data.candidates\n        : [];\n    },\n    openRecommendPopup() {\n      this.pendingRecommendIds = Array.isArray(this.selectedRecommendIds)\n        ? [...this.selectedRecommendIds]\n        : [];\n      this.recommendPopupVisible = true;\n      if (\n        !Array.isArray(this.recommendCandidates) ||\n        this.recommendCandidates.length === 0\n      ) {\n        this.loadRecommendConfig(true).catch(() => {});\n      }\n    },\n    closeRecommendPopup() {\n      this.recommendPopupVisible = false;\n      this.pendingRecommendIds = [];\n    },\n    isRecommendSelected(id) {\n      const pid = Number(id) || 0;\n      if (!pid) return false;\n      return (\n        Array.isArray(this.pendingRecommendIds) &&\n        this.pendingRecommendIds.includes(pid)\n      );\n    },\n    toggleRecommendItem(item) {\n      const id = Number(item && item.id) || 0;\n      if (!id) return;\n      if (!Array.isArray(this.pendingRecommendIds))\n        this.pendingRecommendIds = [];\n      const exists = this.pendingRecommendIds.includes(id);\n      if (exists) {\n        this.pendingRecommendIds = this.pendingRecommendIds.filter(\n          (x) => x !== id,\n        );\n        return;\n      }\n      if (this.pendingRecommendIds.length >= this.recommendMaxCount) {\n        uni.showToast({\n          title: `最多选择${this.recommendMaxCount}套`,\n          icon: \"none\",\n        });\n        return;\n      }\n      this.pendingRecommendIds = this.pendingRecommendIds.concat([id]);\n    },\n    async saveRecommendConfig() {\n      if (this.savingRecommend) return;\n      this.savingRecommend = true;\n      try {\n        const ids = Array.isArray(this.pendingRecommendIds)\n          ? this.pendingRecommendIds\n          : [];\n        const res = await userApi.saveAgentCardRecommendConfig(\n          { property_ids: ids },\n          true,\n        );\n        if (!res || res.code !== 0) return;\n        this.selectedRecommendIds = [...ids];\n        const map = {};\n        (this.recommendCandidates || []).forEach((item) => {\n          const id = Number(item && item.id) || 0;\n          if (id) map[id] = item;\n        });\n        this.selectedRecommendProperties = ids\n          .map((id) => map[id])\n          .filter(Boolean);\n        this.recommendPopupVisible = false;\n        this.pendingRecommendIds = [];\n        uni.showToast({ title: \"推荐房源已保存\", icon: \"none\" });\n      } finally {\n        this.savingRecommend = false;\n      }\n    },\n    async saveProfile() {\n      if (this.saving) return;\n      const name = String(this.profile.name || \"\").trim();\n      if (!name) {\n        uni.showToast({ title: \"请填写姓名\", icon: \"none\" });\n        return;\n      }\n      this.saving = true;\n      try {\n        const payload = {\n          avatar: this.profile.avatar,\n          name,\n          title: String(this.profile.role || \"\").trim(),\n          introduction: String(this.profile.intro || \"\").trim(),\n          store_id: Number(this.profile.store_id || 0),\n        };\n        const res = await userApi.updateCardProfile(payload, true);\n        if (!res || res.code !== 0) return;\n        if (this.loadedUserId) this.saveExtras(this.loadedUserId);\n        const userStore = $store(\"user\");\n        userStore.setUserInfo({\n          ...(userStore.userInfo || {}),\n          avatar: this.profile.avatar,\n          name: this.profile.name,\n        });\n        uni.showToast({ title: \"保存成功\", icon: \"none\" });\n      } finally {\n        this.saving = false;\n      }\n    },\n    async changeAvatar() {\n      if (this.saving) return;\n      uni.chooseImage({\n        count: 1,\n        sizeType: [\"compressed\"],\n        sourceType: [\"album\", \"camera\"],\n        success: async (res) => {\n          const filePath = res && res.tempFilePaths && res.tempFilePaths[0];\n          if (!filePath) return;\n          await this.uploadAvatar(filePath);\n        },\n      });\n    },\n    uploadAvatar(filePath) {\n      return new Promise((resolve, reject) => {\n        const token = uni.getStorageSync(\"token\");\n        const timestamp = Math.floor(Date.now() / 1000);\n        const passstr = md5(import.meta.env.GF_API_SECRET + timestamp);\n        const header = {\n          Accept: \"text/json\",\n          Businessid: import.meta.env.GF_BUSINESUSSID,\n          apiverify: base64Encode(passstr + \"#\" + timestamp),\n        };\n        if (token) header.Authorization = `${token}`;\n        uni.uploadFile({\n          url: `${baseUrl}/common/upload/upFile`,\n          filePath,\n          name: \"file\",\n          formData: { filetype: \"image\" },\n          header,\n          success: (upRes) => {\n            try {\n              const raw = upRes && upRes.data ? upRes.data : \"{}\";\n              const out = typeof raw === \"string\" ? JSON.parse(raw) : raw;\n              if (!out || out.code !== 0) {\n                uni.showToast({\n                  title: (out && out.message) || \"上传失败\",\n                  icon: \"none\",\n                });\n                reject(out);\n                return;\n              }\n              const url = out && out.data ? out.data.url : \"\";\n              this.profile.avatar = url || \"\";\n              uni.showToast({ title: \"头像已更新\", icon: \"none\" });\n              resolve(out);\n            } catch (e) {\n              uni.showToast({ title: \"解析上传结果失败\", icon: \"none\" });\n              reject(e);\n            }\n          },\n          fail: (err) => {\n            uni.showToast({ title: \"上传失败\", icon: \"none\" });\n            reject(err);\n          },\n        });\n      });\n    },\n    saveCardImage() {\n      this.saveCardToAlbum().catch(() => {});\n    },\n    copyCardLink() {\n      this.copyUrlLink().catch(() => {});\n    },\n    async copyUrlLink() {\n      const style = Number(this.currentPreview || 0);\n      let envVersion = \"\";\n      // 小程序端：按当前运行环境生成对应的 URLLink（develop|trial|release）\n      if (typeof wx !== \"undefined\" && wx.getAccountInfoSync) {\n        const ev = (wx.getAccountInfoSync().miniProgram || {}).envVersion;\n        if (ev === \"develop\" || ev === \"trial\" || ev === \"release\")\n          envVersion = ev;\n      }\n      const res = await userApi.getAgentUrlLink(\n        { style, env_version: envVersion },\n        true,\n      );\n      const urlLink =\n        res && res.code === 0 && res.data ? res.data.url_link : \"\";\n      if (!urlLink) {\n        uni.showToast({ title: \"获取链接失败\", icon: \"none\" });\n        return;\n      }\n      uni.setClipboardData({\n        data: urlLink,\n        success: () => uni.showToast({ title: \"已复制链接\", icon: \"none\" }),\n      });\n    },\n    showMoreActions() {\n      uni.showActionSheet({\n        itemList: [\"刷新资料\", \"清空本地名片扩展信息\"],\n        success: async (res) => {\n          if (res.tapIndex === 0) {\n            await this.loadProfile(true).catch(() => {});\n          }\n          if (res.tapIndex === 1) {\n            if (!this.loadedUserId) return;\n            uni.removeStorageSync(this.extrasStorageKey(this.loadedUserId));\n            this.profile.wechat = \"\";\n            this.profile.tags = [];\n            uni.showToast({ title: \"已清空\", icon: \"none\" });\n          }\n        },\n      });\n    },\n    getGradientColors(bg) {\n      const s = String(bg || \"\");\n      const matches = s.match(/#(?:[0-9a-fA-F]{3}){1,2}/g) || [];\n      if (matches.length >= 2) return [matches[0], matches[1]];\n      return [\"#2d9cf0\", \"#1e40af\"];\n    },\n    drawRoundRectPath(ctx, x, y, w, h, r) {\n      const rr = Math.max(0, Math.min(r, w / 2, h / 2));\n      ctx.beginPath();\n      ctx.moveTo(x + rr, y);\n      ctx.arcTo(x + w, y, x + w, y + h, rr);\n      ctx.arcTo(x + w, y + h, x, y + h, rr);\n      ctx.arcTo(x, y + h, x, y, rr);\n      ctx.arcTo(x, y, x + w, y, rr);\n      ctx.closePath();\n    },\n    getImageInfo(src) {\n      return new Promise((resolve, reject) => {\n        if (!src) return reject(new Error(\"empty src\"));\n        uni.getImageInfo({\n          src,\n          success: (res) => resolve(res),\n          fail: (err) => reject(err),\n        });\n      });\n    },\n    async saveCardToAlbum() {\n      if (this.savingImage) return;\n      this.savingImage = true;\n      try {\n        if (!this.qrCodeUrl) {\n          await this.loadWxaCode(true).catch(() => {});\n        }\n        if (!this.qrCodeUrl) {\n          uni.showToast({ title: \"小程序码生成失败\", icon: \"none\" });\n          return;\n        }\n\n        const style =\n          this.previewCards[this.currentPreview] || this.previewCards[0];\n        const w = this.canvasWidth * this.canvasScale;\n        const h = this.canvasHeight * this.canvasScale;\n        const scale = this.canvasScale;\n        // 以 900x1320 的设计稿坐标系绘制，再按实际导出尺寸等比缩放，避免出现裁切/偏移\n        const baseW = 900;\n        const s = w / baseW;\n        const px = (v) => Number(v) * (w / 900);\n        const fs = (v) => Math.round(Number(v) * (w / 900));\n\n        const ctx = uni.createCanvasContext(\"cardCanvas\", this);\n        ctx.save();\n        // ctx.scale(scale, scale)\n\n        // 背景 + 圆角裁剪\n        this.drawRoundRectPath(ctx, 0, 0, w, h, px(40));\n        ctx.clip();\n        const [c1, c2] = this.getGradientColors(style.bg);\n        const grd = ctx.createLinearGradient(0, 0, w, h);\n        grd.addColorStop(0, c1);\n        grd.addColorStop(1, c2);\n        ctx.setFillStyle(grd);\n        ctx.fillRect(0, 0, w, h);\n\n        // 装饰圆\n        ctx.setFillStyle(\"rgba(255,255,255,0.10)\");\n        ctx.beginPath();\n        ctx.arc(w - px(80), px(80), px(140), 0, Math.PI * 2);\n        ctx.fill();\n        ctx.setFillStyle(String(style.decor2 || \"rgba(249,115,22,0.18)\"));\n        ctx.beginPath();\n        ctx.arc(px(80), h - px(120), px(180), 0, Math.PI * 2);\n        ctx.fill();\n\n        // 顶部门店 + badge\n        ctx.setFillStyle(\"rgba(255,255,255,0.22)\");\n        this.drawRoundRectPath(ctx, px(40), px(40), px(520), px(70), px(16));\n        ctx.fill();\n        ctx.setFillStyle(\"#ffffff\");\n        ctx.setFontSize(fs(28));\n        ctx.fillText(String(style.store || \"未绑定门店\"), px(60), px(86));\n\n        ctx.setFillStyle(String(style.badgeBg || \"#f97316\"));\n        this.drawRoundRectPath(\n          ctx,\n          w - px(180),\n          px(44),\n          px(140),\n          px(60),\n          px(30),\n        );\n        ctx.fill();\n        ctx.setFillStyle(\"#ffffff\");\n        ctx.setFontSize(fs(22));\n        ctx.fillText(String(style.badge || \"PRO\"), w - px(140), px(82));\n\n        // 头像\n        const avatarSrc = this.safeImage(style.avatar);\n        const avatarSize = px(200);\n        const avatarX = (w - avatarSize) / 2;\n        const avatarY = px(170);\n        if (avatarSrc) {\n          const avatarInfo = await this.getImageInfo(avatarSrc);\n          ctx.save();\n          ctx.beginPath();\n          ctx.arc(\n            w / 2,\n            avatarY + avatarSize / 2,\n            avatarSize / 2,\n            0,\n            Math.PI * 2,\n          );\n          ctx.clip();\n          ctx.drawImage(\n            avatarInfo.path,\n            avatarX,\n            avatarY,\n            avatarSize,\n            avatarSize,\n          );\n          ctx.restore();\n        } else {\n          ctx.setFillStyle(\"rgba(255,255,255,0.24)\");\n          ctx.beginPath();\n          ctx.arc(\n            w / 2,\n            avatarY + avatarSize / 2,\n            avatarSize / 2,\n            0,\n            Math.PI * 2,\n          );\n          ctx.fill();\n          ctx.setFillStyle(\"rgba(255,255,255,0.92)\");\n          ctx.setFontSize(fs(72));\n          ctx.fillText(\n            \"人\",\n            (w - ctx.measureText(\"人\").width) / 2,\n            avatarY + avatarSize / 2 + fs(24),\n          );\n        }\n        ctx.setStrokeStyle(\"rgba(255,255,255,0.28)\");\n        ctx.setLineWidth(Math.max(2, px(6)));\n        ctx.beginPath();\n        ctx.arc(\n          w / 2,\n          avatarY + avatarSize / 2,\n          avatarSize / 2,\n          0,\n          Math.PI * 2,\n        );\n        ctx.stroke();\n\n        // 姓名/职位\n        ctx.setFillStyle(\"#ffffff\");\n        ctx.setFontSize(fs(44));\n        const name = String(style.name || \"\");\n        ctx.fillText(name, (w - ctx.measureText(name).width) / 2, px(430));\n        ctx.setFontSize(fs(28));\n        ctx.setFillStyle(\"rgba(255,255,255,0.85)\");\n        const role = String(style.role || \"置业顾问\");\n        ctx.fillText(role, (w - ctx.measureText(role).width) / 2, px(475));\n\n        // 电话块\n        ctx.setFillStyle(\"rgba(255,255,255,0.12)\");\n        this.drawRoundRectPath(\n          ctx,\n          px(60),\n          px(520),\n          w - px(120),\n          px(120),\n          px(24),\n        );\n        ctx.fill();\n        ctx.setFillStyle(\"rgba(255,255,255,0.72)\");\n        ctx.setFontSize(fs(22));\n        ctx.fillText(\"电话\", px(90), px(570));\n        ctx.setFillStyle(\"#ffffff\");\n        ctx.setFontSize(fs(30));\n        const phone = String(style.phone || \"\");\n        ctx.fillText(phone, px(90), px(612));\n\n        // 文字信息（微信/门店）\n        ctx.setFillStyle(\"rgba(255,255,255,0.92)\");\n        ctx.setFontSize(fs(26));\n        const wechatLine = \"微信号：\" + String(style.wechat || \"\");\n        ctx.fillText(wechatLine, px(70), h - px(230));\n        const storeLine = \"门店：\" + String(style.store || \"\");\n        ctx.fillText(storeLine, px(70), h - px(190));\n\n        // 小程序码\n        const qrInfo = await this.getImageInfo(this.qrCodeUrl);\n        ctx.setFillStyle(\"#ffffff\");\n        this.drawRoundRectPath(\n          ctx,\n          w - px(260),\n          h - px(300),\n          px(200),\n          px(200),\n          px(16),\n        );\n        ctx.fill();\n        ctx.drawImage(qrInfo.path, w - px(250), h - px(290), px(180), px(180));\n        ctx.setFillStyle(\"rgba(255,255,255,0.78)\");\n        ctx.setFontSize(fs(20));\n        ctx.fillText(\"微信识别进入\", w - px(250), h - px(80));\n\n        ctx.restore();\n\n        await new Promise((resolve) => ctx.draw(false, resolve));\n\n        const temp = await new Promise((resolve, reject) => {\n          // 注意：canvas 实际像素尺寸是 w/h 乘以 canvasScale（模板里绑定了 :width/:height）\n          // 导出时用实际像素尺寸，避免只导出左上角\n          const pxW = Math.round(w * scale);\n          const pxH = Math.round(h * scale);\n          uni.canvasToTempFilePath(\n            {\n              canvasId: \"cardCanvas\",\n              x: 0,\n              y: 0,\n              width: pxW,\n              height: pxH,\n              destWidth: pxW,\n              destHeight: pxH,\n              fileType: \"png\",\n              quality: 1,\n              success: (res) => resolve(res),\n              fail: (err) => reject(err),\n            },\n            this,\n          );\n        });\n\n        await new Promise((resolve, reject) => {\n          uni.saveImageToPhotosAlbum({\n            filePath: temp.tempFilePath,\n            success: () => resolve(true),\n            fail: (err) => reject(err),\n          });\n        });\n        uni.showToast({ title: \"已保存到相册\", icon: \"none\" });\n      } catch (e) {\n        // 常见：未授权保存到相册\n        uni.showModal({\n          title: \"保存失败\",\n          content: \"请允许保存到相册权限后重试\",\n          confirmText: \"去设置\",\n          cancelText: \"取消\",\n          success: (res) => {\n            if (res.confirm) uni.openSetting({});\n          },\n        });\n      } finally {\n        this.savingImage = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.card-container {\n  height: 100vh;\n  background-color: #f6f7f8;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.header {\n  /* header 已由 TopHeader 统一 */\n  display: none;\n}\n\n.tabs-box {\n  padding: 24rpx 32rpx;\n  background-color: #ffffff;\n\n  .tabs-inner {\n    display: flex;\n    background-color: #f1f5f9;\n    padding: 8rpx;\n    border-radius: 20rpx;\n  }\n\n  .tab-item {\n    flex: 1;\n    height: 72rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 28rpx;\n    font-weight: 500;\n    color: #64748b;\n    border-radius: 16rpx;\n    transition: all 0.3s;\n\n    &.active {\n      background-color: #ffffff;\n      color: #0f172a;\n      box-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\n    }\n  }\n}\n\n.main-content {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n\n.edit-scroll {\n  flex: 1;\n  min-height: 0;\n}\n\n.edit-content {\n  padding: 20rpx 24rpx 16rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n}\n\n.form-group {\n  background-color: #ffffff;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.02);\n\n  .form-item {\n    padding: 24rpx;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1rpx solid #f1f5f9;\n\n    &.no-border {\n      border-bottom: none;\n    }\n\n    .label {\n      font-size: 30rpx;\n      font-weight: 500;\n      color: #0f172a;\n    }\n\n    .val-box {\n      display: flex;\n      align-items: center;\n      gap: 16rpx;\n      color: #64748b;\n\n      .avatar {\n        width: 96rpx;\n        height: 96rpx;\n        border-radius: 50%;\n        border: 1rpx solid #e2e8f0;\n      }\n      .avatar-empty {\n        background: linear-gradient(135deg, #eef2f7, #e2e8f0);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        .material-symbols-outlined {\n          font-size: 44rpx;\n          color: #94a3b8;\n        }\n      }\n      .val {\n        font-size: 30rpx;\n      }\n      .val-input {\n        width: 420rpx;\n        font-size: 30rpx;\n        color: #0f172a;\n        text-align: right;\n      }\n      .val-placeholder {\n        color: #94a3b8;\n      }\n      .arrow-icon {\n        font-size: 40rpx;\n      }\n    }\n\n    &:active {\n      background-color: #f8fafc;\n    }\n  }\n}\n\n.notice-section {\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n\n  .val {\n    color: #64748b;\n    font-size: 30rpx;\n  }\n  .val.small {\n    font-size: 26rpx;\n  }\n  .tip-text {\n    padding: 0 16rpx;\n    font-size: 24rpx;\n    color: #94a3b8;\n    line-height: 1.6;\n  }\n}\n\n.bio-group {\n  padding: 24rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n\n  .bio-textarea {\n    width: 100%;\n    height: 160rpx;\n    background-color: #f8fafc;\n    border: 1px solid #e2e8f0;\n    border-radius: 16rpx;\n    padding: 24rpx;\n    font-size: 30rpx;\n    color: #334155;\n    line-height: 1.5;\n  }\n}\n\n.tags-group {\n  padding: 24rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n\n  .tags-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .add-tag-btn {\n      display: flex;\n      align-items: center;\n      gap: 4rpx;\n      font-size: 24rpx;\n      color: #2d9cf0;\n      font-weight: 600;\n\n      .add-icon {\n        font-size: 32rpx;\n      }\n    }\n  }\n\n  .tags-row {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 20rpx;\n\n    .tag {\n      padding: 12rpx 24rpx;\n      background-color: #f1f5f9;\n      border-radius: 40rpx;\n      font-size: 24rpx;\n      color: #64748b;\n      display: flex;\n      align-items: center;\n      gap: 8rpx;\n      border: 1px solid transparent;\n\n      &.active {\n        background-color: rgba(45, 156, 240, 0.1);\n        color: #2d9cf0;\n        border-color: rgba(45, 156, 240, 0.2);\n      }\n\n      .close-icon,\n      .add-icon {\n        font-size: 28rpx;\n      }\n    }\n  }\n}\n\n.recommend-group {\n  padding: 24rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n\n  .tags-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .add-tag-btn {\n      display: flex;\n      align-items: center;\n      gap: 4rpx;\n      font-size: 24rpx;\n      color: #2d9cf0;\n      font-weight: 600;\n\n      .add-icon {\n        font-size: 32rpx;\n      }\n    }\n  }\n\n  .recommend-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10rpx;\n  }\n\n  .recommend-tag {\n    padding: 8rpx 14rpx;\n    border-radius: 999rpx;\n    font-size: 22rpx;\n    color: #334155;\n    background: #f1f5f9;\n    border: 1rpx solid #e2e8f0;\n  }\n\n  .recommend-empty {\n    font-size: 24rpx;\n    color: #94a3b8;\n  }\n\n  .tip-text {\n    font-size: 22rpx;\n    color: #94a3b8;\n  }\n}\n\n.preview-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 24rpx 24rpx 16rpx;\n  flex: 1;\n  min-height: 0;\n\n  .pagination-dots {\n    display: flex;\n    gap: 16rpx;\n    margin-bottom: 16rpx;\n\n    .dot {\n      width: 12rpx;\n      height: 12rpx;\n      border-radius: 50%;\n      background-color: #cbd5e1;\n\n      &.active {\n        background-color: #2d9cf0;\n      }\n    }\n  }\n\n  .card-swiper {\n    width: 100%;\n    flex: 1;\n    min-height: 0;\n    /* swiper 本身不参与布局，居中由 swiper-item 内部容器完成 */\n  }\n\n  .card-slide {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .business-card {\n    /* 小程序端可视区较小：整体缩小一点，避免被底部操作/导航遮挡 */\n    width: 600rpx;\n    height: 880rpx;\n    border-radius: 40rpx;\n    position: relative;\n    overflow: hidden;\n    box-shadow: 0 40rpx 80rpx rgba(0, 0, 0, 0.2);\n    border: 1rpx solid rgba(255, 255, 255, 0.08);\n\n    .card-decor-1 {\n      position: absolute;\n      top: -80rpx;\n      right: -80rpx;\n      width: 256rpx;\n      height: 256rpx;\n      background-color: rgba(255, 255, 255, 0.05);\n      border-radius: 50%;\n      filter: blur(40rpx);\n    }\n\n    .card-decor-2 {\n      position: absolute;\n      bottom: -80rpx;\n      left: -80rpx;\n      width: 320rpx;\n      height: 320rpx;\n      background-color: rgba(249, 115, 22, 0.2);\n      border-radius: 50%;\n      filter: blur(80rpx);\n    }\n\n    .card-inner {\n      position: relative;\n      z-index: 10;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      padding: 40rpx;\n      color: #ffffff;\n    }\n\n    .card-top {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .company-info {\n        display: flex;\n        align-items: center;\n        gap: 16rpx;\n\n        .company-logo {\n          width: 64rpx;\n          height: 64rpx;\n          background-color: rgba(255, 255, 255, 0.2);\n          backdrop-filter: blur(10px);\n          border-radius: 12rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          .material-symbols-outlined {\n            font-size: 32rpx;\n          }\n        }\n\n        .company-name {\n          font-size: 28rpx;\n          font-weight: bold;\n          opacity: 0.9;\n        }\n      }\n\n      .pro-tag {\n        background-color: #f97316;\n        padding: 4rpx 16rpx;\n        border-radius: 40rpx;\n        display: flex;\n        align-items: center;\n        gap: 8rpx;\n        font-size: 20rpx;\n        font-weight: bold;\n\n        .pro-icon {\n          font-size: 24rpx;\n        }\n      }\n    }\n\n    .card-middle {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 24rpx;\n\n      .card-avatar {\n        width: 168rpx;\n        height: 168rpx;\n        border-radius: 50%;\n        border: 6rpx solid rgba(255, 255, 255, 0.3);\n        box-shadow: 0 16rpx 32rpx rgba(0, 0, 0, 0.2);\n      }\n      .card-avatar-empty {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: rgba(255, 255, 255, 0.18);\n        .material-symbols-outlined {\n          font-size: 74rpx;\n          color: rgba(255, 255, 255, 0.92);\n        }\n      }\n\n      .card-user {\n        text-align: center;\n        .card-name {\n          font-size: 44rpx;\n          font-weight: bold;\n          display: block;\n        }\n        .card-role {\n          font-size: 28rpx;\n          font-weight: 500;\n          opacity: 0.8;\n          margin-top: 8rpx;\n          display: block;\n        }\n      }\n\n      .card-tags {\n        display: flex;\n        gap: 12rpx;\n\n        .card-tag {\n          font-size: 20rpx;\n          padding: 4rpx 16rpx;\n          background-color: rgba(255, 255, 255, 0.1);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(10px);\n          border-radius: 8rpx;\n        }\n      }\n    }\n\n    .card-bottom {\n      display: flex;\n      flex-direction: column;\n      gap: 36rpx;\n\n      .contact-info {\n        background-color: rgba(255, 255, 255, 0.1);\n        backdrop-filter: blur(10px);\n        border: 1px solid rgba(255, 255, 255, 0.05);\n        border-radius: 24rpx;\n        padding: 24rpx;\n\n        .contact-item {\n          display: flex;\n          align-items: center;\n          gap: 24rpx;\n\n          .contact-icon {\n            width: 64rpx;\n            height: 64rpx;\n            background-color: #ffffff;\n            color: #2d9cf0;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            .material-symbols-outlined {\n              font-size: 32rpx;\n            }\n          }\n\n          .contact-text {\n            display: flex;\n            flex-direction: column;\n            .contact-label {\n              font-size: 20rpx;\n              text-transform: uppercase;\n              opacity: 0.6;\n            }\n            .contact-val {\n              font-size: 28rpx;\n              font-weight: bold;\n            }\n          }\n        }\n      }\n\n      .extra-info {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-end;\n\n        .extra-text {\n          display: flex;\n          flex-direction: column;\n          gap: 4rpx;\n          font-size: 26rpx;\n          opacity: 0.92;\n          letter-spacing: 0.5rpx;\n        }\n\n        .extra-line {\n          display: block;\n          line-height: 1.5;\n        }\n\n        .extra-label {\n          opacity: 0.8;\n        }\n\n        .extra-val {\n          font-weight: 700;\n        }\n\n        .qr-code {\n          width: 84rpx;\n          height: 84rpx;\n          background-color: #ffffff;\n          border-radius: 12rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: #0f172a;\n          overflow: hidden;\n          .material-symbols-outlined {\n            font-size: 56rpx;\n          }\n\n          .qr-image {\n            width: 84rpx;\n            height: 84rpx;\n          }\n        }\n      }\n    }\n  }\n\n  .swipe-tip {\n    font-size: 24rpx;\n    color: #94a3b8;\n    margin-top: 12rpx;\n  }\n}\n\n.footer {\n  background-color: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(10px);\n  /* safe-area 交给 BottomTabBar 处理，避免底部过高 */\n  padding: 20rpx 24rpx 20rpx;\n  border-top: 1rpx solid #e2e8f0;\n  z-index: 100;\n\n  .save-btn {\n    width: 100%;\n    height: 88rpx;\n    background-color: #2d9cf0;\n    color: #ffffff;\n    border-radius: 24rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 16rpx;\n    font-size: 32rpx;\n    font-weight: bold;\n    box-shadow: 0 10rpx 25rpx rgba(45, 156, 240, 0.3);\n    border: none;\n\n    &::after {\n      border: none;\n    }\n    &:active {\n      background-color: #1d82cc;\n      transform: scale(0.98);\n    }\n  }\n}\n\n.share-footer {\n  /* 与 BottomTabBar 的“胶囊卡片”风格统一：本层透明，只保留外边距 */\n  background: transparent;\n  border-top: none;\n  backdrop-filter: none;\n  padding: 8rpx 16rpx 0;\n  box-shadow: none;\n\n  .share-options {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    gap: 0;\n    /* 复用 BottomTabBar 的磨砂/边框/圆角/阴影 */\n    background: rgba(255, 255, 255, 0.92);\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n    border: 1rpx solid rgba(226, 232, 240, 0.9);\n    border-radius: 28rpx;\n    box-shadow: 0 -10rpx 24rpx rgba(15, 23, 42, 0.06);\n    padding: 18rpx 18rpx;\n  }\n\n  .share-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 10rpx;\n    flex: 1;\n    min-width: 0;\n    background: transparent;\n    border: none;\n    padding: 0;\n\n    .share-icon {\n      /* 改为扁平 pill，和底部导航 icon-wrap 对齐 */\n      width: 88rpx;\n      height: 56rpx;\n      border-radius: 28rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: #0f172a;\n      transition:\n        transform 0.18s ease,\n        background-color 0.18s ease,\n        border-color 0.18s ease;\n      border: 1rpx solid transparent;\n\n      &.green {\n        background-color: rgba(34, 197, 94, 0.1);\n        border-color: rgba(34, 197, 94, 0.18);\n        color: #16a34a;\n      }\n      &.blue {\n        background-color: rgba(37, 99, 235, 0.1);\n        border-color: rgba(37, 99, 235, 0.18);\n        color: #2563eb;\n      }\n      &.orange {\n        background-color: rgba(249, 115, 22, 0.1);\n        border-color: rgba(249, 115, 22, 0.18);\n        color: #f97316;\n      }\n      &.grey {\n        background-color: rgba(148, 163, 184, 0.14);\n        border-color: rgba(148, 163, 184, 0.18);\n        color: #64748b;\n      }\n\n      .material-symbols-outlined {\n        font-size: 40rpx;\n      }\n    }\n\n    .share-label {\n      font-size: 22rpx;\n      font-weight: 700;\n      color: #475569;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    &:active .share-icon {\n      transform: scale(1.06);\n    }\n  }\n\n  .share-btn::after {\n    border: none;\n  }\n}\n\n.mask-popup {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(15, 23, 42, 0.45);\n  z-index: 999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 24rpx;\n\n  .popup-card {\n    width: 100%;\n    max-width: 620rpx;\n    background: #ffffff;\n    border-radius: 28rpx;\n    padding: 28rpx 24rpx;\n    box-shadow: 0 30rpx 80rpx rgba(0, 0, 0, 0.18);\n  }\n\n  .popup-title {\n    font-size: 32rpx;\n    font-weight: 800;\n    color: #0f172a;\n    margin-bottom: 16rpx;\n  }\n\n  .popup-subtitle {\n    font-size: 24rpx;\n    color: #64748b;\n    margin-top: -8rpx;\n    margin-bottom: 12rpx;\n  }\n\n  .popup-input {\n    height: 88rpx;\n    border-radius: 18rpx;\n    background: #f8fafc;\n    border: 1rpx solid #e2e8f0;\n    padding: 0 20rpx;\n    font-size: 30rpx;\n    color: #0f172a;\n  }\n\n  .popup-actions {\n    margin-top: 18rpx;\n    display: flex;\n    gap: 16rpx;\n  }\n\n  .popup-btn {\n    flex: 1;\n    height: 82rpx;\n    border-radius: 18rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 30rpx;\n    font-weight: 700;\n    border: none;\n\n    &::after {\n      border: none;\n    }\n\n    &.ghost {\n      background: #f1f5f9;\n      color: #334155;\n    }\n\n    &.primary {\n      background: #2d9cf0;\n      color: #ffffff;\n    }\n  }\n\n  .recommend-popup-card {\n    max-width: 680rpx;\n  }\n\n  .recommend-popup-list {\n    max-height: 600rpx;\n    border: 1rpx solid #e2e8f0;\n    border-radius: 16rpx;\n    background: #f8fafc;\n    padding: 8rpx 10rpx;\n  }\n\n  .recommend-popup-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 12rpx;\n    padding: 14rpx 10rpx;\n    border-bottom: 1rpx solid #e2e8f0;\n  }\n\n  .recommend-popup-item:last-child {\n    border-bottom: none;\n  }\n\n  .recommend-popup-main {\n    flex: 1;\n    min-width: 0;\n    display: flex;\n    flex-direction: column;\n    gap: 6rpx;\n  }\n\n  .recommend-popup-title {\n    font-size: 26rpx;\n    font-weight: 700;\n    color: #0f172a;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .recommend-popup-meta {\n    font-size: 22rpx;\n    color: #64748b;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .check-icon {\n    font-size: 36rpx;\n    color: #94a3b8;\n    flex-shrink: 0;\n  }\n\n  .check-icon.active {\n    color: #22c55e;\n  }\n}\n\n.hidden-canvas {\n  position: fixed;\n  left: -9999px;\n  top: -9999px;\n  opacity: 0;\n  pointer-events: none;\n}\n\n/* 不再需要 bottom spacer（页面不滚动） */\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/my_business_card/my_business_card.vue'\nwx.createPage(MiniProgramPage)"],"names":["base64Encode","str","buf","s","bytes","i","length","codePoint","charCodeAt","push","Uint8Array","utf8ToBytes","buffer","wx","wx$1","arrayBufferToBase64","uni","index$1","_sfc_main","components","BottomTabBar","TopHeader","onLoad","options","tab","currentTab","this","initCanvasSize","loadProfile","catch","onShow","onShareAppMessage","name","profile","agentId","Number","loadedUserId","style","currentPreview","title","path","encodeURIComponent","data","qrCodeUrl","styleChangeTimer","saving","savingImage","tagPopupVisible","recommendPopupVisible","newTagText","storeOptions","recommendMaxCount","recommendCandidates","selectedRecommendIds","selectedRecommendProperties","pendingRecommendIds","savingRecommend","canvasWidth","canvasHeight","canvasScale","avatar","phone","wechat","role","store_id","store","store_address","email","intro","tags","suggestTags","cardStyles","bg","decor2","badge","badgeBg","computed","previewCards","p","Array","isArray","slice","map","watch","v","loadStores","loadRecommendConfig","methods","sys","getSystemInfoSync","pr","pixelRatio","maxSidePx","scale","Math","min","byW","floor","byH","max","e","onPreviewChange","detail","current","persistDefaultStyle","scheduleWxaCodeRefresh","safeImage","url","u","String","trim","indexOf","extrasStorageKey","uid","loadExtras","key","raw","getStorageSync","JSON","parse","saveExtras","payload","setStorageSync","stringify","showLoading","$store","isLogin","res","userApi","getCardProfile","code","d","id","ID","nickname","mobile","store_name","introduction","idx","styleStorageKey","isNaN","extras","loadWxaCode","clearTimeout","setTimeout","process","env","getAccountInfoSync","includes","miniProgram","envVersion","check_path","getAgentWxaCode","previewQrCode","showToast","icon","common_vendor","previewImage","urls","getStores","items","onStorePickerChange","value","address","showUneditable","msg","openAddTag","closeAddTag","confirmAddTag","t","addTag","tag","concat","removeTag","filter","_","formatRecommendMeta","item","area","rooms","halls","bathrooms","layout","community_name","Boolean","join","getAgentCardRecommendConfig","maxCount","max_count","selected_ids","selected_properties","candidates","openRecommendPopup","closeRecommendPopup","isRecommendSelected","pid","toggleRecommendItem","x","saveRecommendConfig","ids","saveAgentCardRecommendConfig","property_ids","forEach","saveProfile","updateCardProfile","userStore","setUserInfo","userInfo","changeAvatar","chooseImage","count","sizeType","sourceType","success","async","filePath","tempFilePaths","uploadAvatar","Promise","resolve","reject","token","timestamp","Date","now","header","Accept","Businessid","apiverify","md5","Authorization","uploadFile","baseUrl","formData","filetype","upRes","out","message","fail","err","saveCardImage","saveCardToAlbum","copyCardLink","copyUrlLink","ev","getAgentUrlLink","env_version","urlLink","url_link","setClipboardData","showMoreActions","showActionSheet","itemList","tapIndex","removeStorageSync","getGradientColors","matches","match","drawRoundRectPath","ctx","y","w","h","r","rr","beginPath","moveTo","arcTo","closePath","getImageInfo","src","Error","px","fs","round","createCanvasContext","save","clip","c1","c2","grd","createLinearGradient","addColorStop","setFillStyle","fillRect","arc","PI","fill","setFontSize","fillText","avatarSrc","avatarSize","avatarX","avatarY","avatarInfo","drawImage","restore","measureText","width","setStrokeStyle","setLineWidth","stroke","wechatLine","storeLine","qrInfo","draw","temp","pxW","pxH","canvasToTempFilePath","canvasId","height","destWidth","destHeight","fileType","quality","saveImageToPhotosAlbum","tempFilePath","showModal","content","confirmText","cancelText","confirm","openSetting","createPage","MiniProgramPage"],"mappings":"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"}