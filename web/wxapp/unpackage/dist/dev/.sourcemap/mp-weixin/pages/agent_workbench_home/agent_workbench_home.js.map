{"version":3,"file":"agent_workbench_home.js","sources":["pages/agent_workbench_home/agent_workbench_home.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWdlbnRfd29ya2JlbmNoX2hvbWUvYWdlbnRfd29ya2JlbmNoX2hvbWUudnVl"],"sourcesContent":["<template>\n  <view class=\"workbench-container\">\n    <!-- 顶部导航 -->\n    <TopHeader title=\"我的\" />\n\n    <!-- 名片固定在上方，下面内容允许滚动 -->\n    <view class=\"main-content\">\n      <!-- 个人信息卡片 -->\n      <view class=\"profile-section\">\n        <view class=\"profile-card\">\n          <view class=\"profile-bg-decor\"></view>\n          <button class=\"edit-btn\" @click=\"goEditCard\">\n            <text class=\"material-symbols-outlined edit-icon\">edit</text>\n            <text>编辑</text>\n          </button>\n          <view class=\"profile-main\">\n            <view class=\"avatar-box\">\n              <image\n                v-if=\"avatarUrl\"\n                class=\"avatar\"\n                :src=\"avatarUrl\"\n                mode=\"aspectFill\"\n              ></image>\n              <view v-else class=\"avatar avatar-empty\">\n                <text class=\"material-symbols-outlined\">person</text>\n              </view>\n              <view class=\"online-status\"></view>\n            </view>\n            <view class=\"user-info\">\n              <text class=\"user-name\">{{ displayName }}</text>\n              <text class=\"user-role\">{{ displayRoleLine }}</text>\n              <text class=\"user-phone\">{{ displayMobile }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <scroll-view scroll-y=\"true\" class=\"content-scroll\">\n        <view class=\"scroll-content\">\n          <view class=\"section\">\n            <view class=\"section-title\">业务记录</view>\n            <view class=\"records-list\">\n              <view\n                class=\"property-card\"\n                v-for=\"(item, index) in displayRecords\"\n                :key=\"index\"\n                @click=\"openRecord(item)\"\n              >\n                <view class=\"card-main\">\n                  <view\n                    class=\"record-image-box\"\n                    :class=\"{ 'has-notice': item.hasNotice }\"\n                  >\n                    <view class=\"record-icon-chip\">\n                      <text class=\"material-symbols-outlined record-icon\">{{\n                        item.icon\n                      }}</text>\n                    </view>\n                    <view class=\"record-dot\" v-if=\"item.hasNotice\"></view>\n                  </view>\n                  <view class=\"record-info-box\">\n                    <view class=\"title\">{{ item.name }}</view>\n                    <view class=\"meta\">\n                      <text class=\"bold\">{{ getRecordHint(item) }}</text>\n                    </view>\n                    <view class=\"stats\">\n                      <text>{{ item.countLabel || \"暂无统计\" }}</text>\n                      <text class=\"stats-sep\"></text>\n                      <text>{{\n                        item.hasNotice ? \"有新动态\" : \"点击查看详情\"\n                      }}</text>\n                    </view>\n                  </view>\n                </view>\n                <view\n                  class=\"card-footer\"\n                  :class=\"item.hasNotice ? 'orange-footer' : 'grey-footer'\"\n                >\n                  <view class=\"footer-left\">\n                    <view class=\"footer-icon-box\">\n                      <text class=\"material-symbols-outlined footer-icon\">{{\n                        item.hasNotice ? \"notifications_active\" : \"insights\"\n                      }}</text>\n                    </view>\n                    <text class=\"footer-text\">{{ getRecordFooter(item) }}</text>\n                  </view>\n                  <view class=\"footer-btn\">\n                    <text class=\"material-symbols-outlined btn-icon\"\n                      >arrow_forward</text\n                    >\n                    <text>进入</text>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n\n          <!-- 更多服务 -->\n          <view class=\"section\">\n            <view class=\"section-title\">更多服务</view>\n            <view class=\"service-list\">\n              <view class=\"service-item\" @click=\"openAbout\">\n                <view class=\"service-left\">\n                  <text class=\"material-symbols-outlined service-icon\">info</text>\n                  <text class=\"service-name\">关于我们</text>\n                </view>\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </view>\n              <view class=\"service-divider\"></view>\n              <button\n                class=\"service-item service-share-btn\"\n                open-type=\"share\"\n                @longpress=\"copyAgentLink\"\n              >\n                <view class=\"service-left\">\n                  <text class=\"material-symbols-outlined service-icon\"\n                    >share</text\n                  >\n                  <text class=\"service-name\">推荐给朋友</text>\n                </view>\n                <text class=\"material-symbols-outlined arrow-icon\"\n                  >chevron_right</text\n                >\n              </button>\n            </view>\n          </view>\n\n          <!-- 退出按钮 -->\n          <view class=\"logout-section\">\n            <button class=\"logout-btn\" @click=\"handleLogout\">退出登录</button>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 底部导航 -->\n    <BottomTabBar active=\"me\" />\n  </view>\n</template>\n\n<script>\nimport BottomTabBar from \"@/components/BottomTabBar.vue\";\nimport TopHeader from \"@/components/TopHeader.vue\";\nimport userApi from \"@/api/user\";\nimport $store from \"@/store\";\n\nexport default {\n  components: { BottomTabBar, TopHeader },\n  onShareAppMessage() {\n    const name = this.displayName || \"我\";\n    const agentId = Number((this.userInfo && this.userInfo.id) || 0);\n    return {\n      title: `${name}的名片`,\n      path: `/pages/agent_public_card/agent_public_card?agent_id=${encodeURIComponent(agentId)}&style=0`,\n    };\n  },\n  data() {\n    return {\n      loadingUser: false,\n      debugLogged: false,\n      userInfo: {},\n      recordSummary: {\n        follow_count: 0,\n        unlock_count: 0,\n        showing_count: 0,\n        view_count: 0,\n        share_count: 0,\n        call_count: 0,\n        unlock_has_notice: false,\n      },\n      businessRecords: [\n        { key: \"property_manage\", name: \"房源管理\", icon: \"home_work\" },\n        { key: \"lock_manage\", name: \"智能门锁\", icon: \"lock\" },\n        { key: \"follow\", name: \"关注记录\", icon: \"favorite\" },\n        { key: \"unlock\", name: \"开锁记录\", icon: \"lock_open\", hasNotice: true },\n        { key: \"showing\", name: \"带看记录\", icon: \"location_on\" },\n        { key: \"view\", name: \"浏览记录\", icon: \"history\" },\n        { key: \"share\", name: \"分享记录\", icon: \"share\" },\n        { key: \"call\", name: \"通话记录\", icon: \"call\" },\n      ],\n    };\n  },\n  computed: {\n    avatarUrl() {\n      const avatar = String(\n        (this.userInfo && this.userInfo.avatar) || \"\",\n      ).trim();\n      if (!avatar) return \"\";\n      if (avatar.indexOf(\"/static/images/\") === 0) return \"\";\n      return avatar;\n    },\n    displayName() {\n      const u = this.userInfo || {};\n      // 真实姓名优先，其次昵称/用户名\n      return u.name || u.nickname || u.username || \"未登录\";\n    },\n    displayRoleLine() {\n      const u = this.userInfo || {};\n      const title = (u.title || \"\").trim();\n      const roleRaw = String(u.role || \"\").trim();\n      // 门店信息由后端返回：store_name（未绑定则为“未绑定”）\n      const storeName = (u.store_name || \"\").trim();\n      const store = storeName ? storeName : \"未绑定\";\n      // 角色/身份展示：优先头衔；否则把 role=1/user 映射为“经纪人”\n      let left = title;\n      if (!left) {\n        if (\n          roleRaw === \"\" ||\n          roleRaw === \"1\" ||\n          roleRaw.toLowerCase() === \"user\"\n        )\n          left = \"经纪人\";\n        else left = roleRaw;\n      }\n      return `${left} | ${store}`;\n    },\n    displayMobile() {\n      const u = this.userInfo || {};\n      return u.mobile || \"\";\n    },\n    displayRecords() {\n      const u = this.userInfo || {};\n      const canManage = Number(u.can_manage_properties) === 1;\n      const canManageLocks = Number(u.can_manage_locks) === 1;\n      const summary = this.recordSummary || {};\n      const countMap = {\n        follow: Number(summary.follow_count || 0),\n        unlock: Number(summary.unlock_count || 0),\n        showing: Number(summary.showing_count || 0),\n        view: Number(summary.view_count || 0),\n        share: Number(summary.share_count || 0),\n        call: Number(summary.call_count || 0),\n      };\n      // 最小权限：仅在允许维护房源时展示入口\n      return (this.businessRecords || [])\n        .filter((it) => {\n          if (!it) return false;\n          if (it.key === \"property_manage\") return canManage;\n          if (it.key === \"lock_manage\") return canManageLocks;\n          return true;\n        })\n        .map((it) => {\n          const count = countMap[it.key] || 0;\n          return {\n            ...it,\n            hasNotice:\n              it.key === \"unlock\"\n                ? !!summary.unlock_has_notice\n                : !!it.hasNotice,\n            countLabel: count > 0 ? `${count}条` : \"\",\n          };\n        });\n    },\n  },\n  onShow() {\n    this.ensureLoginAndLoadUser();\n  },\n  methods: {\n    debugPrintUserInfo(tag = \"\") {\n      if (this.debugLogged) return;\n      this.debugLogged = true;\n      try {\n        // 关键字段 + 全量\n        console.log(\n          \"[agent_workbench_home] \" + (tag || \"userInfo\") + \" store_name=\",\n          this.userInfo?.store_name,\n          \"store_id=\",\n          this.userInfo?.store_id,\n          \"title=\",\n          this.userInfo?.title,\n          \"role=\",\n          this.userInfo?.role,\n        );\n        console.log(\n          \"[agent_workbench_home] \" + (tag || \"userInfo\") + \" full=\",\n          JSON.parse(JSON.stringify(this.userInfo || {})),\n        );\n      } catch (e) {\n        console.log(\"[agent_workbench_home] debugPrintUserInfo error\", e);\n      }\n    },\n    debugShowUserInfo() {\n      try {\n        const u = this.userInfo || {};\n        const contentLines = [\n          `name: ${u.name || \"\"}`,\n          `nickname: ${u.nickname || \"\"}`,\n          `username: ${u.username || \"\"}`,\n          `title: ${u.title || \"\"}`,\n          `role: ${u.role || \"\"}`,\n          `store_name: ${u.store_name || \"\"}`,\n          `store_id: ${u.store_id || \"\"}`,\n          `store_address: ${u.store_address || \"\"}`,\n        ];\n        uni.showModal({\n          title: \"调试：userInfo(点击头像)\",\n          content: contentLines.join(\"\\n\"),\n          showCancel: false,\n        });\n      } catch (e) {\n        uni.showToast({ title: \"调试弹窗失败\", icon: \"none\" });\n      }\n    },\n    async ensureLoginAndLoadUser() {\n      const userStore = $store(\"user\");\n      // 兼容：小程序刷新后，优先用本地 token 恢复登录态\n      const token = uni.getStorageSync(\"token\");\n      if (token && !userStore.isLogin) {\n        userStore.setToken(token);\n      }\n      if (!token && !userStore.isLogin) {\n        uni.reLaunch({ url: \"/pages/login/login\" });\n        return;\n      }\n      if (this.loadingUser) return;\n      this.loadingUser = true;\n      try {\n        const info = await userStore.getInfo();\n        this.userInfo = info || userStore.userInfo || {};\n        this.debugPrintUserInfo(\"after getInfo\");\n        await this.loadWorkbenchSummary(false);\n      } catch (e) {\n        // 请求失败：优先保留本地态，不强制跳转（避免短暂网络抖动导致回登录）\n        this.userInfo = userStore.userInfo || {};\n        this.debugPrintUserInfo(\"fallback userStore.userInfo\");\n        await this.loadWorkbenchSummary(false);\n      } finally {\n        this.loadingUser = false;\n      }\n    },\n    async loadWorkbenchSummary(showLoading = false) {\n      try {\n        const res = await userApi.getWorkbenchSummary(showLoading);\n        if (!res || res.code !== 0 || !res.data) return;\n        this.recordSummary = {\n          follow_count: Number(res.data.follow_count || 0),\n          unlock_count: Number(res.data.unlock_count || 0),\n          showing_count: Number(res.data.showing_count || 0),\n          view_count: Number(res.data.view_count || 0),\n          share_count: Number(res.data.share_count || 0),\n          call_count: Number(res.data.call_count || 0),\n          unlock_has_notice: !!res.data.unlock_has_notice,\n        };\n      } catch (e) {}\n    },\n    goEditCard() {\n      // 跳转到“获客-编辑资料”页（tab=1）\n      uni.reLaunch({\n        url: \"/pages/my_business_card/my_business_card?tab=1\",\n      });\n    },\n    openAbout() {\n      uni.navigateTo({ url: \"/pages/doc_webview/doc_webview?key=help_center\" });\n    },\n    async copyAgentLink() {\n      const res = await userApi.getAgentUrlLink({}, true);\n      const urlLink =\n        res && res.code === 0 && res.data\n          ? String(res.data.url_link || \"\").trim()\n          : \"\";\n      if (!urlLink) {\n        uni.showToast({ title: \"获取链接失败\", icon: \"none\" });\n        return;\n      }\n      uni.setClipboardData({\n        data: urlLink,\n        success: () => uni.showToast({ title: \"已复制链接\", icon: \"none\" }),\n      });\n    },\n    openRecord(item) {\n      const map = {\n        property_manage: \"/pages/property_manage/property_manage\",\n        lock_manage: \"/pages/lock_manage/lock_manage\",\n        follow: \"/pages/records/record_follow\",\n        unlock: \"/pages/records/record_unlock\",\n        showing: \"/pages/records/record_showing\",\n        view: \"/pages/records/record_view\",\n        share: \"/pages/records/record_share\",\n        call: \"/pages/records/record_call\",\n      };\n      const url = item && item.key && map[item.key];\n      if (!url) return;\n      uni.navigateTo({ url });\n    },\n    getRecordHint(item) {\n      const key = String((item && item.key) || \"\").trim();\n      const map = {\n        property_manage: \"维护发布、编辑、上下架\",\n        lock_manage: \"远程开锁、门锁状态管理\",\n        follow: \"客户关注房源动态\",\n        unlock: \"开锁日志与异常提醒\",\n        showing: \"带看安排与到访回溯\",\n        view: \"浏览来源与热度追踪\",\n        share: \"分享触达与传播记录\",\n        call: \"客户来电与沟通统计\",\n      };\n      return map[key] || \"点击进入查看明细\";\n    },\n    getRecordFooter(item) {\n      const label = String((item && item.countLabel) || \"\").trim();\n      if (label) return `累计 ${label}`;\n      return \"点击进入查看明细\";\n    },\n    handleLogout() {\n      uni.showModal({\n        title: \"提示\",\n        content: \"确定要退出登录吗？\",\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              await $store(\"user\").logout(false);\n            } catch (e) {}\n            uni.reLaunch({\n              url: \"/pages/login/login\",\n            });\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.workbench-container {\n  height: 100vh;\n  background-color: #f6f7f8;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* header/title 已由 TopHeader 统一 */\n\n.main-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n  padding: 12rpx 24rpx 0;\n  box-sizing: border-box;\n  min-height: 0;\n}\n\n.profile-section {\n  padding: 0;\n  flex-shrink: 0;\n}\n\n.content-scroll {\n  flex: 1;\n  min-height: 0;\n}\n\n.scroll-content {\n  display: flex;\n  flex-direction: column;\n  gap: 12rpx;\n  padding-bottom: calc(env(safe-area-inset-bottom) + 20rpx);\n}\n\n.profile-card {\n  background: linear-gradient(135deg, #2d9cf0, #2563eb);\n  border-radius: 32rpx;\n  padding: 36rpx 32rpx;\n  min-height: 240rpx;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 12rpx 30rpx rgba(37, 99, 235, 0.2);\n  display: flex;\n  align-items: center;\n}\n\n.profile-bg-decor {\n  position: absolute;\n  right: -90rpx;\n  top: -90rpx;\n  width: 360rpx;\n  height: 360rpx;\n  background-color: rgba(255, 255, 255, 0.1);\n  border-radius: 50%;\n  filter: blur(90rpx);\n}\n\n.edit-btn {\n  position: absolute;\n  top: 28rpx;\n  right: 28rpx;\n  height: 56rpx;\n  padding: 0 20rpx;\n  background-color: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  color: #ffffff;\n  font-size: 24rpx;\n  z-index: 10;\n}\n\n.edit-icon {\n  font-size: 24rpx !important;\n  margin-right: 4rpx;\n}\n\n.profile-main {\n  display: flex;\n  align-items: center;\n  gap: 24rpx;\n  position: relative;\n  z-index: 5;\n}\n\n.avatar-box {\n  position: relative;\n}\n\n.avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  border: 4rpx solid rgba(255, 255, 255, 0.3);\n}\n.avatar-empty {\n  background: rgba(255, 255, 255, 0.18);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .material-symbols-outlined {\n    font-size: 58rpx;\n    color: rgba(255, 255, 255, 0.9);\n  }\n}\n\n.online-status {\n  position: absolute;\n  bottom: 4rpx;\n  right: 4rpx;\n  width: 20rpx;\n  height: 20rpx;\n  background-color: #4ade80;\n  border-radius: 50%;\n  border: 4rpx solid #2d9cf0;\n}\n\n.user-info {\n  color: #ffffff;\n}\n\n.user-name {\n  font-size: 38rpx;\n  font-weight: bold;\n  display: block;\n  letter-spacing: 0.4rpx;\n}\n\n.user-role {\n  font-size: 26rpx;\n  opacity: 0.9;\n  display: block;\n  margin-top: 6rpx;\n}\n\n.user-phone {\n  font-size: 26rpx;\n  opacity: 0.8;\n  display: block;\n  margin-top: 4rpx;\n}\n\n.section {\n  padding: 0;\n}\n\n.section-title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #0f172a;\n  margin-bottom: 12rpx;\n}\n\n.records-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16rpx;\n}\n\n.property-card {\n  background-color: #ffffff;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.02);\n  border: 1px solid #f1f5f9;\n}\n\n.card-main {\n  padding: 20rpx;\n  display: flex;\n  gap: 18rpx;\n}\n\n.record-image-box {\n  width: 224rpx;\n  height: 192rpx;\n  border-radius: 16rpx;\n  position: relative;\n  overflow: hidden;\n  flex-shrink: 0;\n  background: linear-gradient(135deg, #2d9cf0, #2563eb);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.record-image-box.has-notice {\n  background: linear-gradient(135deg, #fb923c, #f97316);\n}\n\n.record-icon-chip {\n  width: 96rpx;\n  height: 96rpx;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.2);\n  border: 2rpx solid rgba(255, 255, 255, 0.28);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.record-info-box {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n\n.record-info-box .title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #0f172a;\n  line-height: 1.3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  line-clamp: 2;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.record-info-box .meta {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  font-size: 24rpx;\n  color: #64748b;\n}\n\n.record-info-box .meta .bold {\n  font-weight: 500;\n  color: #334155;\n}\n\n.record-info-box .stats {\n  font-size: 20rpx;\n  color: #94a3b8;\n  display: flex;\n  align-items: center;\n  margin-top: auto;\n}\n\n.record-info-box .stats .stats-sep {\n  width: 1px;\n  height: 16rpx;\n  background-color: #e2e8f0;\n  margin: 0 12rpx;\n}\n\n.record-icon {\n  font-size: 56rpx !important;\n  color: #ffffff;\n  line-height: 1;\n  display: block;\n}\n\n.record-dot {\n  position: absolute;\n  top: 14rpx;\n  right: 14rpx;\n  width: 16rpx;\n  height: 16rpx;\n  background-color: #ef4444;\n  border-radius: 50%;\n  border: 3rpx solid #ffffff;\n}\n\n.card-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 14rpx 20rpx;\n  border-top: 1rpx solid transparent;\n}\n\n.card-footer.orange-footer {\n  background-color: #fff7ed;\n  border-color: #ffedd5;\n}\n\n.card-footer.orange-footer .footer-icon-box {\n  background-color: #f97316;\n}\n\n.card-footer.orange-footer .footer-text {\n  color: #9a3412;\n  font-weight: bold;\n}\n\n.card-footer.grey-footer {\n  background-color: #f8fafc;\n  border-color: #f1f5f9;\n}\n\n.card-footer.grey-footer .footer-icon-box {\n  background-color: #cbd5e1;\n}\n\n.card-footer.grey-footer .footer-text {\n  color: #64748b;\n  font-weight: 500;\n}\n\n.footer-left {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n  flex: 1;\n  min-width: 0;\n}\n\n.footer-icon-box {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.footer-icon {\n  color: #ffffff;\n  font-size: 28rpx;\n}\n\n.footer-text {\n  font-size: 24rpx;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.footer-btn {\n  height: 52rpx;\n  padding: 0 24rpx;\n  background-color: #ffffff;\n  border: 1px solid #fed7aa;\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  font-size: 22rpx;\n  font-weight: bold;\n  color: #ea580c;\n  line-height: 1;\n  margin-left: 24rpx;\n}\n\n.footer-btn .btn-icon {\n  font-size: 28rpx;\n}\n\n.service-list {\n  background-color: #ffffff;\n  border-radius: 24rpx;\n  border: 1px solid #f1f5f9;\n}\n\n.service-item {\n  padding: 18rpx 24rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.service-share-btn {\n  width: 100%;\n  border: none;\n  background: #ffffff;\n  text-align: left;\n}\n.service-share-btn::after {\n  border: none;\n}\n\n.service-left {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.service-icon {\n  font-size: 40rpx !important;\n  color: #94a3b8;\n}\n\n.service-name {\n  font-size: 28rpx;\n  color: #334155;\n}\n\n.arrow-icon {\n  font-size: 32rpx !important;\n  color: #cbd5e1;\n}\n\n.service-divider {\n  height: 1px;\n  background-color: #f1f5f9;\n  margin: 0 32rpx;\n}\n\n.logout-section {\n  padding: 0;\n}\n\n.logout-btn {\n  width: 100%;\n  height: 80rpx;\n  background-color: #fff1f2;\n  color: #ef4444;\n  font-size: 28rpx;\n  font-weight: bold;\n  border-radius: 20rpx;\n  border: 1px solid #fee2e2;\n}\n\n.tab-bar {\n  background-color: #ffffff;\n  border-top: 1rpx solid #e2e8f0;\n  padding: 12rpx 0 calc(env(safe-area-inset-bottom) + 12rpx);\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n\n.tab-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #94a3b8;\n  flex: 1;\n}\n\n.tab-icon {\n  font-size: 48rpx !important;\n}\n\n.tab-text {\n  font-size: 20rpx;\n  margin-top: 4rpx;\n}\n\n.tab-item.active {\n  color: #2d9cf0;\n}\n\n.active-bg {\n  background-color: #eef7ff;\n  padding: 8rpx 32rpx;\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fill {\n  font-variation-settings: \"FILL\" 1;\n}\n\n/* 页面改为“名片固定 + 内容滚动” */\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/agent_workbench_home/agent_workbench_home.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","components","BottomTabBar","TopHeader","onShareAppMessage","name","this","displayName","title","data","loadingUser","debugLogged","recordSummary","follow_count","unlock_count","showing_count","businessRecords","key","icon","computed","avatar","String","userInfo","trim","u","nickname","username","displayRoleLine","roleRaw","role","storeName","store_name","store","left","displayMobile","mobile","displayRecords","summary","countMap","follow","Number","unlock","showing","view","view_count","share","share_count","call","call_count","filter","it","canManage","count","hasNotice","countLabel","onShow","methods","uni","__f__","_c","_d","JSON","parse","stringify","e","index$1","debugShowUserInfo","contentLines","store_address","showModal","content","join","showCancel","showToast","token","getStorageSync","userStore","isLogin","info","getInfo","debugPrintUserInfo","loadWorkbenchSummary","reLaunch","url","showLoading","res","code","navigateTo","copyAgentLink","url_link","setClipboardData","openRecord","item","lock_manage","getRecordHint","getRecordFooter","handleLogout","success","async","confirm","$store","logout","wx","createPage","MiniProgramPage"],"mappings":"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"}