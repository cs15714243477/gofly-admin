{"version":3,"file":"property_list.js","sources":["pages/property_list/property_list.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvcGVydHlfbGlzdC9wcm9wZXJ0eV9saXN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"list-container\">\n    <!-- 顶部导航与搜索 -->\n    <view class=\"header\">\n      <TopHeader title=\"房源\" />\n\n      <view class=\"search-row\">\n        <picker\n          v-if=\"provincePickerLabels.length > 0\"\n          mode=\"selector\"\n          :range=\"provincePickerLabels\"\n          :value=\"provincePickerIndex\"\n          @change=\"onProvincePickerChange\"\n        >\n          <view class=\"province-picker\">\n            <text class=\"province-text\">{{ provinceName }}</text>\n            <text class=\"material-symbols-outlined province-icon\"\n              >expand_more</text\n            >\n          </view>\n        </picker>\n        <view v-else class=\"province-picker\" @tap=\"reloadProvinces\">\n          <text class=\"province-text\">{{ provinceName }}</text>\n          <text class=\"material-symbols-outlined province-icon\"\n            >expand_more</text\n          >\n        </view>\n        <view class=\"search-box\">\n          <text class=\"material-symbols-outlined search-icon\">search</text>\n          <input\n            v-model=\"keyword\"\n            class=\"search-input\"\n            type=\"text\"\n            confirm-type=\"search\"\n            placeholder=\"搜索小区、商圈、地址...\"\n            placeholder-class=\"placeholder\"\n            @input=\"onKeywordInput\"\n            @confirm=\"onSearchConfirm\"\n          />\n        </view>\n        <view\n          class=\"filter-icon-btn\"\n          :class=\"{ active: hasActiveFilters }\"\n          @tap=\"openFilter\"\n        >\n          <text class=\"material-symbols-outlined\">tune</text>\n          <view v-if=\"hasActiveFilters\" class=\"filter-dot\"></view>\n        </view>\n      </view>\n\n      <scroll-view scroll-x=\"true\" class=\"category-scroll\">\n        <view class=\"category-row\">\n          <view\n            class=\"category-item\"\n            v-for=\"(c, idx) in navTabs\"\n            :key=\"c.key || idx\"\n            :class=\"{ active: isNavActive(c) }\"\n            @tap=\"onNavTab(c)\"\n          >\n            {{ c.label }}\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <scroll-view\n      scroll-y=\"true\"\n      class=\"main-list\"\n      lower-threshold=\"120\"\n      @scrolltolower=\"loadMore\"\n    >\n      <view class=\"list-content\">\n        <view\n          class=\"property-card\"\n          v-for=\"(item, index) in displayList\"\n          :key=\"item.id || index\"\n          :class=\"{ disabled: item.sale_status === 'off_market' }\"\n          @click=\"goToDetail(item)\"\n        >\n          <view class=\"card-main\">\n            <view\n              class=\"image-box\"\n              :class=\"{ grayscale: isSoldOrOff(item.sale_status) }\"\n            >\n              <image\n                class=\"property-image\"\n                :src=\"item.image\"\n                mode=\"aspectFill\"\n              ></image>\n              <view class=\"image-tag\" v-if=\"Number(item.has_smart_lock) === 1\">\n                <text class=\"material-symbols-outlined tag-icon\">lock</text>\n                <text>智能门锁</text>\n              </view>\n              <view class=\"mask\" v-if=\"isSoldOrOff(item.sale_status)\">\n                <text class=\"mask-text\">{{\n                  item.sale_status_label || \"\"\n                }}</text>\n              </view>\n            </view>\n            <view class=\"info-box\">\n              <view class=\"title\">{{ item.title }}</view>\n              <view class=\"meta\">\n                <text class=\"bold\">{{ getLayoutText(item) }}</text>\n                <text class=\"divider\">|</text>\n                <text>{{ item.area || \"-\" }}㎡</text>\n                <text class=\"divider\">|</text>\n                <text>{{ item.orientation || \"-\" }}</text>\n              </view>\n              <view class=\"region-row\">\n                <text class=\"region-label\">市区</text>\n                <text class=\"region-val\">{{ getDistrictText(item) }}</text>\n              </view>\n              <view class=\"tags\">\n                <text\n                  class=\"tag\"\n                  v-for=\"(tag, tIdx) in ensureTags(item.tags).slice(0, 4)\"\n                  :key=\"tIdx\"\n                  :class=\"tagColorClass(tag)\"\n                  >{{ tag }}</text\n                >\n              </view>\n              <view class=\"price-row\">\n                <text class=\"price\"\n                  >¥{{ item.price }}{{ item.price_unit || \"\" }}</text\n                >\n                <text class=\"unit-price\">{{ getUnitPriceText(item) }}</text>\n              </view>\n              <view class=\"stats\">\n                <text>浏览: {{ item.view_count || 0 }}</text>\n                <text class=\"stats-sep\"></text>\n                <text>关注: {{ item.follow_count || 0 }}</text>\n              </view>\n            </view>\n          </view>\n          <view\n            class=\"card-footer\"\n            :class=\"\n              isSoldOrOff(item.sale_status) ? 'grey-footer' : 'orange-footer'\n            \"\n          >\n            <view class=\"footer-left\">\n              <view class=\"footer-icon-box\">\n                <text class=\"material-symbols-outlined footer-icon\"\n                  >currency_yen</text\n                >\n              </view>\n              <text class=\"footer-text\">{{ getCommissionText(item) }}</text>\n            </view>\n            <button\n              class=\"footer-btn\"\n              v-if=\"item.sale_status !== 'off_market'\"\n              @click.stop=\"handlePromote(item)\"\n            >\n              <text class=\"material-symbols-outlined btn-icon\">share</text>\n              <text>微信推广</text>\n            </button>\n            <button class=\"footer-btn-disabled\" v-else>已下架</button>\n          </view>\n        </view>\n\n        <view v-if=\"!loading && displayList.length === 0\" class=\"empty-wrap\">\n          <text class=\"material-symbols-outlined empty-icon\">apartment</text>\n          <view class=\"empty-title\">暂无房源</view>\n          <view class=\"empty-desc\">调整筛选条件后再试试</view>\n        </view>\n\n        <view v-if=\"loading\" class=\"loading-row\">\n          <text>加载中...</text>\n        </view>\n        <view\n          v-else-if=\"finished && displayList.length > 0\"\n          class=\"loading-row muted\"\n        >\n          <text>没有更多了</text>\n        </view>\n      </view>\n      <view class=\"bottom-spacer\"></view>\n    </scroll-view>\n\n    <!-- 底部导航 -->\n    <BottomTabBar active=\"property\" />\n\n    <!-- 筛选弹层（静态数据 + 本地过滤/排序） -->\n    <view v-if=\"filterOpen\" class=\"filter-mask\" @tap=\"closeFilter\">\n      <view class=\"filter-sheet\" @tap.stop>\n        <view class=\"filter-header\">\n          <text class=\"filter-title\">筛选</text>\n          <text class=\"filter-reset\" @tap=\"resetFilter\">重置</text>\n        </view>\n\n        <scroll-view scroll-y class=\"filter-body\">\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">分类</text>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in categoryOptions\"\n                :key=\"'cat-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.category === opt.value }\"\n                @tap=\"onDraftCategoryChange(opt.value)\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">户型</text>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in roomOptions\"\n                :key=\"'room-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.rooms === opt.value }\"\n                @tap=\"draft.rooms = opt.value\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">特色</text>\n            <view class=\"chip-row\">\n              <view\n                class=\"chip\"\n                :class=\"{ active: !!draft.smartLock }\"\n                @tap=\"draft.smartLock = !draft.smartLock\"\n              >\n                <text>智能门锁</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">状态</text>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in statusOptions\"\n                :key=\"'status-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.sale_status === opt.value }\"\n                @tap=\"draft.sale_status = opt.value\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">推荐</text>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in hotStatusOptions\"\n                :key=\"'hot-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.hot_status === opt.value }\"\n                @tap=\"draft.hot_status = opt.value\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">物业类型</text>\n            <view v-if=\"filterOptionsLoading\" class=\"muted-tip\">加载中...</view>\n            <view v-else class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in propertyTypeOptions\"\n                :key=\"'ptype-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.property_type === opt }\"\n                @tap=\"draft.property_type = opt\"\n              >\n                <text>{{ opt || \"不限\" }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">装修类型</text>\n            <view v-if=\"filterOptionsLoading\" class=\"muted-tip\">加载中...</view>\n            <view v-else class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in decorationTypeOptions\"\n                :key=\"'dtype-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.decoration_type === opt }\"\n                @tap=\"draft.decoration_type = opt\"\n              >\n                <text>{{ opt || \"不限\" }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">朝向</text>\n            <view v-if=\"filterOptionsLoading\" class=\"muted-tip\">加载中...</view>\n            <view v-else class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in orientationOptions\"\n                :key=\"'ori-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.orientation === opt }\"\n                @tap=\"draft.orientation = opt\"\n              >\n                <text>{{ opt || \"不限\" }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">标签</text>\n            <view v-if=\"filterOptionsLoading\" class=\"muted-tip\">加载中...</view>\n            <view v-else class=\"chip-row\">\n              <view\n                v-for=\"(tag, idx) in tagOptions\"\n                :key=\"'tag-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: draft.more.includes(tag) }\"\n                @tap=\"toggleTag(tag)\"\n              >\n                <text>{{ tag }}</text>\n              </view>\n              <view v-if=\"tagOptions.length === 0\" class=\"muted-tip\">\n                暂无标签\n              </view>\n            </view>\n            <view v-if=\"draft.more.length > 0\" class=\"muted-tip\">\n              已选：{{ draft.more.join(\"、\") }}\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">建成年份</text>\n            <view v-if=\"buildYearStatText\" class=\"muted-tip\">\n              数据范围：{{ buildYearStatText }}\n            </view>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in buildYearRanges\"\n                :key=\"'year-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: isRangeActive('year', opt) }\"\n                @tap=\"selectRange('year', opt)\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">价格区间（万）</text>\n            <view v-if=\"priceStatText\" class=\"muted-tip\">\n              数据范围：{{ priceStatText }}\n            </view>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in priceRanges\"\n                :key=\"'price-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: isRangeActive('price', opt) }\"\n                @tap=\"selectRange('price', opt)\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">面积区间（㎡）</text>\n            <view v-if=\"areaStatText\" class=\"muted-tip\">\n              数据范围：{{ areaStatText }}\n            </view>\n            <view class=\"chip-row\">\n              <view\n                v-for=\"(opt, idx) in areaRanges\"\n                :key=\"'area-' + idx\"\n                class=\"chip\"\n                :class=\"{ active: isRangeActive('area', opt) }\"\n                @tap=\"selectRange('area', opt)\"\n              >\n                <text>{{ opt.label }}</text>\n              </view>\n            </view>\n          </view>\n\n          <view class=\"filter-section\">\n            <text class=\"filter-section-title\">排序</text>\n            <view class=\"radio-list\">\n              <view\n                v-for=\"(opt, idx) in sortOptions\"\n                :key=\"'sort-' + idx\"\n                class=\"radio-item\"\n                :class=\"{ active: draft.sort === opt.value }\"\n                @tap=\"draft.sort = opt.value\"\n              >\n                <text>{{ opt.label }}</text>\n                <text\n                  v-if=\"draft.sort === opt.value\"\n                  class=\"material-symbols-outlined radio-check\"\n                  >check</text\n                >\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n\n        <view class=\"filter-footer\">\n          <button class=\"filter-btn ghost\" @tap=\"closeFilter\">取消</button>\n          <button class=\"filter-btn primary\" @tap=\"applyFilter\">确定</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport BottomTabBar from \"@/components/BottomTabBar.vue\";\nimport TopHeader from \"@/components/TopHeader.vue\";\nimport areaApi from \"@/api/area\";\nimport propertyApi from \"@/api/property\";\n\nexport default {\n  components: { BottomTabBar, TopHeader },\n  onLoad() {\n    this.initPage();\n  },\n  onUnload() {\n    if (this.searchTimer) clearTimeout(this.searchTimer);\n  },\n  data() {\n    return {\n      provinceName: \"辽宁\",\n      provinceId: 0,\n      provinces: [],\n      cities: [],\n      districts: [],\n      currentCityId: 0,\n      currentCityName: \"\",\n      currentDistrictId: 0,\n      currentDistrictName: \"\",\n      keyword: \"\",\n      loading: false,\n      finished: false,\n      pagination: { page: 1, pageSize: 10, total: 0 },\n      propertyList: [],\n      searchTimer: null,\n      filterOptions: {\n        property_types: [],\n        decoration_types: [],\n        orientations: [],\n        tags: [],\n        stats: {},\n      },\n      filterOptionsLoading: false,\n      filterOptionsReqId: 0,\n      // 筛选（静态数据）\n      filters: {\n        category: \"all\",\n        rooms: \"\",\n        smartLock: false,\n        sale_status: \"\",\n        sort: \"\",\n        hot_status: \"\",\n        property_type: \"\",\n        decoration_type: \"\",\n        orientation: \"\",\n        build_year_min: \"\",\n        build_year_max: \"\",\n        price_min: \"\",\n        price_max: \"\",\n        area_min: \"\",\n        area_max: \"\",\n        more: [],\n      },\n      filterOpen: false,\n      draft: {\n        category: \"all\",\n        rooms: \"\",\n        smartLock: false,\n        sale_status: \"\",\n        sort: \"\",\n        hot_status: \"\",\n        property_type: \"\",\n        decoration_type: \"\",\n        orientation: \"\",\n        build_year_min: \"\",\n        build_year_max: \"\",\n        price_min: \"\",\n        price_max: \"\",\n        area_min: \"\",\n        area_max: \"\",\n        more: [],\n      },\n      roomOptions: [\n        { value: \"\", label: \"不限\" },\n        { value: \"1\", label: \"1室\" },\n        { value: \"2\", label: \"2室\" },\n        { value: \"3\", label: \"3室\" },\n        { value: \"4+\", label: \"4室+\" },\n      ],\n      categoryOptions: [\n        { value: \"all\", label: \"全部房源\" },\n        { value: \"mine\", label: \"我的房源\" },\n      ],\n      statusOptions: [\n        { value: \"\", label: \"不限\" },\n        { value: \"on_sale\", label: \"在售\" },\n        { value: \"sold\", label: \"已售\" },\n        { value: \"off_market\", label: \"下架\" },\n      ],\n      hotStatusOptions: [\n        { value: \"\", label: \"不限\" },\n        { value: 1, label: \"推荐\" },\n        { value: 0, label: \"不推荐\" },\n      ],\n      sortOptions: [\n        { value: \"\", label: \"默认\" },\n        { value: \"view_desc\", label: \"浏览最多\" },\n        { value: \"follow_desc\", label: \"关注最多\" },\n        { value: \"latest\", label: \"最新发布\" },\n        { value: \"price_asc\", label: \"价格从低到高\" },\n        { value: \"price_desc\", label: \"价格从高到低\" },\n      ],\n      mockPropertyList: [],\n    };\n  },\n  computed: {\n    hasActiveFilters() {\n      return !!(\n        this.keyword ||\n        this.filters.category !== \"all\" ||\n        this.filters.rooms ||\n        this.filters.smartLock ||\n        this.filters.sale_status ||\n        this.filters.sort ||\n        this.filters.hot_status !== \"\" ||\n        this.filters.property_type ||\n        this.filters.decoration_type ||\n        this.filters.orientation ||\n        this.filters.build_year_min ||\n        this.filters.build_year_max ||\n        this.filters.price_min ||\n        this.filters.price_max ||\n        this.filters.area_min ||\n        this.filters.area_max ||\n        (Array.isArray(this.filters.more) && this.filters.more.length > 0)\n      );\n    },\n    propertyTypeOptions() {\n      const list = Array.isArray(this.filterOptions.property_types)\n        ? this.filterOptions.property_types\n        : [];\n      const dedup = Array.from(\n        new Set(list.map((s) => String(s || \"\").trim()).filter(Boolean))\n      );\n      return [\"\"].concat(dedup);\n    },\n    decorationTypeOptions() {\n      const list = Array.isArray(this.filterOptions.decoration_types)\n        ? this.filterOptions.decoration_types\n        : [];\n      const dedup = Array.from(\n        new Set(list.map((s) => String(s || \"\").trim()).filter(Boolean))\n      );\n      return [\"\"].concat(dedup);\n    },\n    orientationOptions() {\n      const list = Array.isArray(this.filterOptions.orientations)\n        ? this.filterOptions.orientations\n        : [];\n      const dedup = Array.from(\n        new Set(list.map((s) => String(s || \"\").trim()).filter(Boolean))\n      );\n      return [\"\"].concat(dedup);\n    },\n    tagOptions() {\n      const list = Array.isArray(this.filterOptions.tags)\n        ? this.filterOptions.tags\n        : [];\n      return Array.from(\n        new Set(list.map((s) => String(s || \"\").trim()).filter(Boolean))\n      );\n    },\n    buildYearStatText() {\n      const min = this.statNumber(\"build_year_min\");\n      const max = this.statNumber(\"build_year_max\");\n      if (!isFinite(min) || !isFinite(max) || min <= 0 || max <= 0 || max < min)\n        return \"\";\n      return `${Math.floor(min)}-${Math.floor(max)}`;\n    },\n    priceStatText() {\n      const min = this.statNumber(\"price_min\");\n      const max = this.statNumber(\"price_max\");\n      if (!isFinite(min) || !isFinite(max) || max < min) return \"\";\n      return `${this.formatNumber(min)}-${this.formatNumber(max)}万`;\n    },\n    areaStatText() {\n      const min = this.statNumber(\"area_min\");\n      const max = this.statNumber(\"area_max\");\n      if (!isFinite(min) || !isFinite(max) || max < min) return \"\";\n      return `${this.formatNumber(min)}-${this.formatNumber(max)}㎡`;\n    },\n    buildYearRanges() {\n      const base = [{ label: \"不限\", min: \"\", max: \"\" }];\n      const min = this.statNumber(\"build_year_min\");\n      const max = this.statNumber(\"build_year_max\");\n      if (!isFinite(min) || !isFinite(max) || min <= 0 || max <= 0 || max < min)\n        return base;\n      return base.concat(\n        this.makeYearRanges(Math.floor(min), Math.floor(max), 5)\n      );\n    },\n    priceRanges() {\n      const base = [{ label: \"不限\", min: \"\", max: \"\" }];\n      const min = this.statNumber(\"price_min\");\n      const max = this.statNumber(\"price_max\");\n      if (!isFinite(min) || !isFinite(max) || max < min) return base;\n      return base.concat(\n        this.makeValueRanges(\n          Math.max(0, Math.floor(min)),\n          Math.max(0, Math.ceil(max)),\n          5,\n          [10, 20, 30, 50, 80, 100, 150, 200, 300, 500, 800, 1000],\n          \"万\"\n        )\n      );\n    },\n    areaRanges() {\n      const base = [{ label: \"不限\", min: \"\", max: \"\" }];\n      const min = this.statNumber(\"area_min\");\n      const max = this.statNumber(\"area_max\");\n      if (!isFinite(min) || !isFinite(max) || max < min) return base;\n      return base.concat(\n        this.makeValueRanges(\n          Math.max(0, Math.floor(min)),\n          Math.max(0, Math.ceil(max)),\n          5,\n          [10, 20, 30, 50, 80, 100, 120, 150, 200, 300],\n          \"㎡\"\n        )\n      );\n    },\n    provincePickerLabels() {\n      const list = Array.isArray(this.provinces) ? this.provinces : [];\n      return list\n        .map((p) => this.formatProvinceLabel(p && p.name))\n        .filter((x) => !!x);\n    },\n    provincePickerIndex() {\n      const list = Array.isArray(this.provinces) ? this.provinces : [];\n      if (list.length === 0) return 0;\n      const id = Number(this.provinceId) || 0;\n      if (id) {\n        const idx = list.findIndex((p) => Number(p && p.id) === id);\n        if (idx >= 0) return idx;\n      }\n      const name = String(this.provinceName || \"\").trim();\n      if (name) {\n        const idx = list.findIndex(\n          (p) => this.formatProvinceLabel(p && p.name) === name\n        );\n        if (idx >= 0) return idx;\n      }\n      return 0;\n    },\n    navTabs() {\n      if (!this.currentCityId) {\n        const list = Array.isArray(this.cities) ? this.cities : [];\n        return [{ key: \"\", label: \"全部\" }].concat(\n          list.map((it) => ({\n            key: `city:${it.id}`,\n            id: it.id,\n            name: it.name,\n            label: this.formatCityLabel(it.name),\n          }))\n        );\n      }\n      const list = Array.isArray(this.districts) ? this.districts : [];\n      return [\n        { key: \"back\", label: \"返回\" },\n        { key: \"all_city\", label: \"全市\" },\n      ].concat(\n        list.map((it) => ({\n          key: `district:${it.id}`,\n          id: it.id,\n          name: it.name,\n          label: it.name,\n        }))\n      );\n    },\n    displayList() {\n      return Array.isArray(this.propertyList) ? this.propertyList : [];\n    },\n  },\n  methods: {\n    statNumber(key) {\n      const stats = (this.filterOptions && this.filterOptions.stats) || {};\n      const v = stats ? stats[key] : undefined;\n      const n = Number(v);\n      return n;\n    },\n    formatNumber(v) {\n      const n = Number(v);\n      if (!isFinite(n)) return \"-\";\n      if (Math.abs(n - Math.round(n)) < 1e-9) return String(Math.round(n));\n      return String(Number(n.toFixed(2)));\n    },\n    makeNiceStep(span, candidates, targetBuckets) {\n      const s = Number(span);\n      if (!isFinite(s) || s <= 0) return candidates[0] || 1;\n      const raw = s / Math.max(1, targetBuckets);\n      const list = Array.isArray(candidates) ? candidates : [];\n      for (let i = 0; i < list.length; i++) {\n        const step = Number(list[i]);\n        if (isFinite(step) && step > 0 && step >= raw) return step;\n      }\n      const last = Number(list[list.length - 1]);\n      if (isFinite(last) && last > 0) return last;\n      return Math.ceil(raw) || 1;\n    },\n    makeYearRanges(minYear, maxYear, maxItems) {\n      const min = Number(minYear);\n      const max = Number(maxYear);\n      if (!isFinite(min) || !isFinite(max) || max < min) return [];\n      const span = max - min + 1;\n      const step = this.makeNiceStep(span, [5, 10, 20, 25, 50], maxItems);\n      const start = Math.floor(min / step) * step;\n      const out = [];\n      for (let s = start; s <= max && out.length < maxItems; s += step) {\n        const e = s + step - 1;\n        if (e >= max) {\n          out.push({ label: `${s}及以后`, min: String(s), max: \"\" });\n          break;\n        }\n        out.push({ label: `${s}-${e}`, min: String(s), max: String(e) });\n      }\n      return out;\n    },\n    makeValueRanges(minValue, maxValue, maxItems, stepCandidates, unit) {\n      const min = Number(minValue);\n      const max = Number(maxValue);\n      if (!isFinite(min) || !isFinite(max) || max < min) return [];\n      const span = max - min;\n      const step = this.makeNiceStep(span, stepCandidates, maxItems);\n      const start = Math.max(0, Math.floor(min / step) * step);\n      const out = [];\n      for (let s = start; s <= max && out.length < maxItems; s += step) {\n        const e = s + step;\n        if (e >= max) {\n          out.push({ label: `${s}${unit}以上`, min: String(s), max: \"\" });\n          break;\n        }\n        out.push({\n          label: `${s}-${e}${unit}`,\n          min: String(s),\n          max: String(e),\n        });\n      }\n      return out;\n    },\n    isRangeActive(kind, opt) {\n      const o = opt || {};\n      if (kind === \"year\") {\n        return (\n          String(this.draft.build_year_min || \"\") === String(o.min || \"\") &&\n          String(this.draft.build_year_max || \"\") === String(o.max || \"\")\n        );\n      }\n      if (kind === \"price\") {\n        return (\n          String(this.draft.price_min || \"\") === String(o.min || \"\") &&\n          String(this.draft.price_max || \"\") === String(o.max || \"\")\n        );\n      }\n      if (kind === \"area\") {\n        return (\n          String(this.draft.area_min || \"\") === String(o.min || \"\") &&\n          String(this.draft.area_max || \"\") === String(o.max || \"\")\n        );\n      }\n      return false;\n    },\n    selectRange(kind, opt) {\n      const o = opt || {};\n      if (kind === \"year\") {\n        this.draft.build_year_min = String(o.min || \"\");\n        this.draft.build_year_max = String(o.max || \"\");\n        return;\n      }\n      if (kind === \"price\") {\n        this.draft.price_min = String(o.min || \"\");\n        this.draft.price_max = String(o.max || \"\");\n        return;\n      }\n      if (kind === \"area\") {\n        this.draft.area_min = String(o.min || \"\");\n        this.draft.area_max = String(o.max || \"\");\n      }\n    },\n    async initPage() {\n      const cached = uni.getStorageSync(\"hm_province_name\");\n      this.provinceName = cached || \"辽宁\";\n      await this.loadProvinces();\n      this.applyProvinceByName(this.provinceName);\n      await this.loadCities();\n      this.loadFilterOptions({ category: this.filters.category });\n      this.fetchList(true);\n    },\n    async reloadProvinces() {\n      uni.showLoading({ title: \"加载中\", mask: true });\n      await this.loadProvinces();\n      uni.hideLoading();\n      if (!Array.isArray(this.provinces) || this.provinces.length === 0) {\n        uni.showToast({ title: \"省份数据获取失败\", icon: \"none\" });\n        return;\n      }\n      this.applyProvinceByName(this.provinceName || \"辽宁\");\n      await this.loadCities();\n      this.loadFilterOptions({ category: this.filters.category });\n      this.fetchList(true);\n    },\n    async onProvincePickerChange(e) {\n      const idx = Number(e && e.detail && e.detail.value);\n      const list = Array.isArray(this.provinces) ? this.provinces : [];\n      const row = list[idx];\n      if (!row) return;\n      const nextName = this.formatProvinceLabel(row.name);\n      if (!nextName) return;\n      if (nextName === this.provinceName) return;\n      this.provinceName = nextName;\n      this.provinceId = Number(row.id) || 0;\n      uni.setStorageSync(\"hm_province_name\", nextName);\n      this.currentCityId = 0;\n      this.currentCityName = \"\";\n      this.currentDistrictId = 0;\n      this.currentDistrictName = \"\";\n      this.districts = [];\n      await this.loadCities();\n      this.loadFilterOptions({ category: this.filters.category });\n      this.fetchList(true);\n    },\n    onKeywordInput() {\n      if (this.searchTimer) clearTimeout(this.searchTimer);\n      this.searchTimer = setTimeout(() => {\n        this.fetchList(true);\n      }, 350);\n    },\n    formatProvinceLabel(name) {\n      const s = String(name || \"\").trim();\n      if (!s) return \"\";\n      if (s.endsWith(\"省\")) return s.slice(0, -1);\n      if (s.endsWith(\"市\")) return s.slice(0, -1);\n      if (s.endsWith(\"自治区\")) return s.slice(0, -3);\n      return s;\n    },\n    formatCityLabel(name) {\n      const s = String(name || \"\").trim();\n      if (!s) return \"\";\n      return s.endsWith(\"市\") ? s.slice(0, -1) : s;\n    },\n    async loadProvinces() {\n      let res;\n      try {\n        res = await areaApi.getProvinces({});\n      } catch (e) {\n        return false;\n      }\n      if (!res || res.code !== 0) return false;\n      const items = (res.data && res.data.items) || [];\n      this.provinces = Array.isArray(items) ? items : [];\n      return this.provinces.length > 0;\n    },\n    applyProvinceByName(name) {\n      const n = String(name || \"\").trim();\n      if (!n || !Array.isArray(this.provinces) || this.provinces.length === 0) {\n        this.provinceId = 0;\n        this.provinceName = n || \"辽宁\";\n        return;\n      }\n      const hit =\n        this.provinces.find((p) => String(p && p.name).includes(n)) ||\n        this.provinces.find((p) => n.includes(String(p && p.name))) ||\n        this.provinces[0];\n      this.provinceId = Number(hit && hit.id) || 0;\n      this.provinceName =\n        this.formatProvinceLabel(hit && hit.name) || n || \"辽宁\";\n      uni.setStorageSync(\"hm_province_name\", this.provinceName);\n      this.currentCityId = 0;\n      this.currentCityName = \"\";\n      this.currentDistrictId = 0;\n      this.currentDistrictName = \"\";\n      this.districts = [];\n    },\n    async loadCities() {\n      if (!this.provinceId) {\n        this.cities = [];\n        return false;\n      }\n      let res;\n      try {\n        res = await areaApi.getChildren({ pid: this.provinceId });\n      } catch (e) {\n        return false;\n      }\n      if (!res || res.code !== 0) return false;\n      const items = (res.data && res.data.items) || [];\n      this.cities = Array.isArray(items) ? items : [];\n      return true;\n    },\n    async loadDistricts(cityId) {\n      const id = Number(cityId) || 0;\n      if (!id) {\n        this.districts = [];\n        return false;\n      }\n      let res;\n      try {\n        res = await areaApi.getChildren({ pid: id });\n      } catch (e) {\n        return false;\n      }\n      if (!res || res.code !== 0) return false;\n      const items = (res.data && res.data.items) || [];\n      this.districts = Array.isArray(items) ? items : [];\n      return true;\n    },\n    async loadFilterOptions(override) {\n      const reqId = (this.filterOptionsReqId || 0) + 1;\n      this.filterOptionsReqId = reqId;\n      this.filterOptionsLoading = true;\n      const category = String(\n        (override && override.category) ||\n          (this.filterOpen ? this.draft.category : this.filters.category) ||\n          \"all\"\n      ).trim();\n      const params = {\n        province: this.provinceName || \"辽宁\",\n        city: this.currentCityName || \"\",\n        district: this.currentDistrictName || \"\",\n        category,\n      };\n      let res;\n      try {\n        res = await propertyApi.getFilterOptions(params);\n      } catch (e) {\n        if (reqId === this.filterOptionsReqId)\n          this.filterOptionsLoading = false;\n        return false;\n      }\n      if (reqId === this.filterOptionsReqId) this.filterOptionsLoading = false;\n      if (!res || res.code !== 0) return false;\n      if (reqId !== this.filterOptionsReqId) return false;\n      const data = res.data || {};\n      this.filterOptions = {\n        property_types: Array.isArray(data.property_types)\n          ? data.property_types\n          : [],\n        decoration_types: Array.isArray(data.decoration_types)\n          ? data.decoration_types\n          : [],\n        orientations: Array.isArray(data.orientations) ? data.orientations : [],\n        tags: Array.isArray(data.tags) ? data.tags : [],\n        stats: data.stats || {},\n      };\n      return true;\n    },\n    onDraftCategoryChange(next) {\n      this.draft.category = next;\n      this.loadFilterOptions({ category: next });\n    },\n    toggleTag(tag) {\n      const t = String(tag || \"\").trim();\n      if (!t) return;\n      const list = Array.isArray(this.draft.more) ? this.draft.more : [];\n      const idx = list.indexOf(t);\n      if (idx >= 0) {\n        list.splice(idx, 1);\n        this.draft.more = list;\n        return;\n      }\n      if (list.length >= 6) {\n        uni.showToast({ title: \"最多选择6个标签\", icon: \"none\" });\n        return;\n      }\n      list.push(t);\n      this.draft.more = list;\n    },\n    isNavActive(tab) {\n      if (!tab) return false;\n      if (tab.key === \"\" && !this.currentCityId) return true;\n      if (\n        tab.key === \"all_city\" &&\n        this.currentCityId &&\n        !this.currentDistrictId\n      )\n        return true;\n      if (tab.key && String(tab.key).startsWith(\"city:\")) {\n        return (\n          !!this.currentCityId && Number(tab.id) === Number(this.currentCityId)\n        );\n      }\n      if (tab.key && String(tab.key).startsWith(\"district:\")) {\n        return (\n          !!this.currentCityId &&\n          Number(tab.id) === Number(this.currentDistrictId)\n        );\n      }\n      return false;\n    },\n    async onNavTab(tab) {\n      if (!tab) return;\n      const key = String(tab.key || \"\");\n      if (key === \"\") {\n        this.currentCityId = 0;\n        this.currentCityName = \"\";\n        this.currentDistrictId = 0;\n        this.currentDistrictName = \"\";\n        this.districts = [];\n        this.loadFilterOptions({ category: this.filters.category });\n        this.fetchList(true);\n        return;\n      }\n      if (key === \"back\") {\n        this.currentCityId = 0;\n        this.currentCityName = \"\";\n        this.currentDistrictId = 0;\n        this.currentDistrictName = \"\";\n        this.districts = [];\n        this.loadFilterOptions({ category: this.filters.category });\n        this.fetchList(true);\n        return;\n      }\n      if (key === \"all_city\") {\n        this.currentDistrictId = 0;\n        this.currentDistrictName = \"\";\n        this.loadFilterOptions({ category: this.filters.category });\n        this.fetchList(true);\n        return;\n      }\n      if (key.startsWith(\"city:\")) {\n        this.currentCityId = Number(tab.id) || 0;\n        this.currentCityName = String(tab.name || \"\").trim();\n        this.currentDistrictId = 0;\n        this.currentDistrictName = \"\";\n        await this.loadDistricts(this.currentCityId);\n        this.loadFilterOptions({ category: this.filters.category });\n        this.fetchList(true);\n        return;\n      }\n      if (key.startsWith(\"district:\")) {\n        this.currentDistrictId = Number(tab.id) || 0;\n        this.currentDistrictName = String(tab.name || \"\").trim();\n        this.loadFilterOptions({ category: this.filters.category });\n        this.fetchList(true);\n        return;\n      }\n    },\n    handlePromote(item) {\n      const title = (item && item.title) || \"房源\";\n      uni.showActionSheet({\n        itemList: [\"生成获客海报\", \"复制推广文案\", \"模拟分享（占位）\"],\n        success: (res) => {\n          if (res.tapIndex === 0) {\n            uni.navigateTo({\n              url: `/pages/marketing_posters/marketing_posters?title=${encodeURIComponent(\n                title\n              )}`,\n            });\n            return;\n          }\n          if (res.tapIndex === 1) {\n            const id = item && (item.id || item.ID);\n            const path = id\n              ? `/pages/property_detail/property_detail?id=${encodeURIComponent(\n                  id\n                )}`\n              : \"/pages/property_detail/property_detail\";\n            const text = `【优质房源推荐】${title}\\n点击查看详情：${path}`;\n            uni.setClipboardData({\n              data: text,\n              success: () => {\n                uni.showToast({ title: \"已复制推广文案\", icon: \"none\" });\n              },\n            });\n            return;\n          }\n          if (res.tapIndex === 2) {\n            uni.showToast({ title: \"分享功能待接入\", icon: \"none\" });\n          }\n        },\n      });\n    },\n    async fetchList(reset) {\n      if (this.loading) return false;\n      this.loading = true;\n      if (reset) {\n        this.pagination.page = 1;\n        this.pagination.total = 0;\n        this.finished = false;\n        this.propertyList = [];\n      }\n\n      const params = {\n        page: this.pagination.page,\n        pageSize: this.pagination.pageSize,\n        province: this.provinceName || \"辽宁\",\n        keyword: this.keyword || \"\",\n        category: this.filters.category || \"all\",\n        city: this.currentCityName || \"\",\n        district: this.currentDistrictName || \"\",\n        rooms: this.filters.rooms || \"\",\n        sale_status: this.filters.sale_status || \"\",\n        sort: this.filters.sort || \"\",\n        hot_status: this.filters.hot_status,\n        property_type: this.filters.property_type || \"\",\n        decoration_type: this.filters.decoration_type || \"\",\n        orientation: this.filters.orientation || \"\",\n        build_year_min: this.filters.build_year_min || \"\",\n        build_year_max: this.filters.build_year_max || \"\",\n        price_min: this.filters.price_min || \"\",\n        price_max: this.filters.price_max || \"\",\n        area_min: this.filters.area_min || \"\",\n        area_max: this.filters.area_max || \"\",\n        filter: this.filters.smartLock ? \"smart_lock\" : \"\",\n        more: Array.isArray(this.filters.more)\n          ? this.filters.more.join(\",\")\n          : \"\",\n      };\n\n      let res;\n      try {\n        res = await propertyApi.getList(params);\n      } catch (e) {\n        if (!uni.getStorageSync(\"token\")) {\n          uni.reLaunch({ url: \"/pages/login/login\" });\n        }\n        this.loading = false;\n        uni.stopPullDownRefresh();\n        return false;\n      }\n\n      this.loading = false;\n      uni.stopPullDownRefresh();\n      if (!res || res.code !== 0) return false;\n\n      const data = res.data || {};\n      const items = Array.isArray(data.items) ? data.items : [];\n      const total = Number(data.total || 0);\n\n      this.pagination.total = total;\n      if (reset) {\n        this.propertyList = items;\n      } else {\n        this.propertyList = (\n          Array.isArray(this.propertyList) ? this.propertyList : []\n        ).concat(items);\n      }\n\n      if (items.length === 0) {\n        this.finished = true;\n        return true;\n      }\n      if (total > 0 && this.propertyList.length >= total) {\n        this.finished = true;\n      } else if (items.length < this.pagination.pageSize) {\n        this.finished = true;\n      }\n      return true;\n    },\n    async loadMore() {\n      if (this.loading || this.finished) return;\n      const prev = this.pagination.page;\n      this.pagination.page = prev + 1;\n      const ok = await this.fetchList(false);\n      if (!ok) this.pagination.page = prev;\n    },\n    onSearchConfirm() {\n      this.fetchList(true);\n    },\n    openFilter() {\n      this.filterOpen = true;\n      this.draft = {\n        category: this.filters.category,\n        rooms: this.filters.rooms,\n        smartLock: !!this.filters.smartLock,\n        sale_status: this.filters.sale_status,\n        sort: this.filters.sort,\n        hot_status: this.filters.hot_status,\n        property_type: this.filters.property_type,\n        decoration_type: this.filters.decoration_type,\n        orientation: this.filters.orientation,\n        build_year_min: this.filters.build_year_min,\n        build_year_max: this.filters.build_year_max,\n        price_min: this.filters.price_min,\n        price_max: this.filters.price_max,\n        area_min: this.filters.area_min,\n        area_max: this.filters.area_max,\n        more: Array.isArray(this.filters.more) ? [...this.filters.more] : [],\n      };\n      this.loadFilterOptions({ category: this.draft.category });\n    },\n    closeFilter() {\n      this.filterOpen = false;\n    },\n    resetFilter() {\n      this.draft = {\n        category: \"all\",\n        rooms: \"\",\n        smartLock: false,\n        sale_status: \"\",\n        sort: \"\",\n        hot_status: \"\",\n        property_type: \"\",\n        decoration_type: \"\",\n        orientation: \"\",\n        build_year_min: \"\",\n        build_year_max: \"\",\n        price_min: \"\",\n        price_max: \"\",\n        area_min: \"\",\n        area_max: \"\",\n        more: [],\n      };\n      this.loadFilterOptions({ category: this.draft.category });\n    },\n    applyFilter() {\n      this.filters = {\n        category: this.draft.category,\n        rooms: this.draft.rooms,\n        smartLock: !!this.draft.smartLock,\n        sale_status: this.draft.sale_status,\n        sort: this.draft.sort,\n        hot_status: this.draft.hot_status,\n        property_type: this.draft.property_type,\n        decoration_type: this.draft.decoration_type,\n        orientation: this.draft.orientation,\n        build_year_min: this.draft.build_year_min,\n        build_year_max: this.draft.build_year_max,\n        price_min: this.draft.price_min,\n        price_max: this.draft.price_max,\n        area_min: this.draft.area_min,\n        area_max: this.draft.area_max,\n        more: Array.isArray(this.draft.more) ? [...this.draft.more] : [],\n      };\n      this.closeFilter();\n      this.loadFilterOptions({ category: this.filters.category });\n      this.fetchList(true);\n    },\n    goToDetail(item) {\n      const id = item && (item.id || item.ID);\n      if (!id) {\n        uni.showToast({ title: \"房源ID缺失\", icon: \"none\" });\n        return;\n      }\n      uni.navigateTo({\n        url: `/pages/property_detail/property_detail?id=${encodeURIComponent(\n          id\n        )}`,\n      });\n    },\n    ensureTags(tags) {\n      if (!tags) return [];\n      if (Array.isArray(tags)) {\n        return tags\n          .map((t) => {\n            if (!t) return \"\";\n            if (typeof t === \"string\") return t.trim();\n            if (typeof t === \"object\")\n              return String(t.name || t.label || \"\").trim();\n            return String(t).trim();\n          })\n          .filter(Boolean);\n      }\n      if (typeof tags === \"string\") {\n        return tags\n          .split(\",\")\n          .map((t) => t.trim())\n          .filter(Boolean);\n      }\n      return [];\n    },\n    tagColorClass(tag) {\n      const t = String(tag || \"\").trim();\n      if (!t) return \"grey\";\n      if (t.includes(\"地铁\") || t.includes(\"交通\")) return \"green\";\n      if (t.includes(\"学区\")) return \"indigo\";\n      if (t.includes(\"降价\") || t.includes(\"急售\")) return \"orange\";\n      if (t.includes(\"智能\") || t.includes(\"门锁\")) return \"blue\";\n      if (t.includes(\"新\") || t.includes(\"刚需\")) return \"purple\";\n      return \"grey\";\n    },\n    isSoldOrOff(saleStatus) {\n      return saleStatus === \"sold\" || saleStatus === \"off_market\";\n    },\n    getLayoutText(item) {\n      const rooms = Number(item && item.rooms) || 0;\n      const halls = Number(item && item.halls) || 0;\n      const bathrooms = Number(item && item.bathrooms) || 0;\n      if (!rooms && !halls && !bathrooms) return \"-\";\n      let s = \"\";\n      if (rooms) s += `${rooms}室`;\n      if (halls) s += `${halls}厅`;\n      if (bathrooms) s += `${bathrooms}卫`;\n      return s || \"-\";\n    },\n    extractDistrictFromAddress(address) {\n      const addr = String(address || \"\").trim();\n      if (!addr) return \"\";\n      const m1 = addr.match(/(?:[^省]+省)?([^市]+市)([^区县]+(?:区|县|旗))/);\n      if (m1) return `${m1[1]}${m1[2]}`;\n      const m2 = addr.match(/([^市]+市)(.+?(?:区|县|旗))/);\n      if (m2) return `${m2[1]}${m2[2]}`;\n      return \"\";\n    },\n    getDistrictText(item) {\n      const addr = String((item && item.address) || \"\").trim();\n      if (!addr) return \"-\";\n      const district = this.extractDistrictFromAddress(addr);\n      if (district) return district;\n      return addr.length > 20 ? `${addr.slice(0, 20)}…` : addr;\n    },\n    getUnitPriceText(item) {\n      const price = Number(item && item.price);\n      const area = Number(item && item.area);\n      if (!price || !area) return \"\";\n      const unit = (item && item.price_unit) || \"\";\n      let totalYuan = price;\n      if (unit === \"万\") totalYuan = price * 10000;\n      const per = totalYuan / area;\n      if (!per || !isFinite(per)) return \"\";\n      return `${Math.round(per).toLocaleString()}元/㎡`;\n    },\n    getCommissionText(item) {\n      const rate = String((item && item.commission_rate) || \"\").trim();\n      const reward = String((item && item.commission_reward) || \"\").trim();\n      const hasRate =\n        !!rate && rate !== \"0\" && rate !== \"0.0\" && rate !== \"0.00\";\n      const hasReward =\n        !!reward && reward !== \"0\" && reward !== \"0.0\" && reward !== \"0.00\";\n      if (hasRate && hasReward) return `佣金${rate}% 成交奖励¥${reward}`;\n      if (hasRate) return `佣金${rate}%`;\n      if (hasReward) return `成交奖励¥${reward}`;\n      return \"佣金待定\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.list-container {\n  height: 100vh;\n  background-color: #f6f7f8;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  background-color: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  /* TopHeader 自带左右 padding，这里避免叠加 */\n  padding: 0 0 16rpx;\n  border-bottom: 1rpx solid #e2e8f0;\n  z-index: 50;\n\n  .nav-row {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 80rpx;\n    margin-bottom: 16rpx;\n    position: relative;\n\n    .nav-title {\n      font-size: 32rpx;\n      font-weight: bold;\n      color: #0f172a;\n      flex: 1;\n      text-align: left;\n      padding-right: 80rpx;\n    }\n\n    .filter-icon-btn {\n      position: absolute;\n      right: 0;\n      width: 80rpx;\n      height: 80rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 50%;\n      position: relative;\n\n      .material-symbols-outlined {\n        font-size: 40rpx;\n        color: #0f172a;\n      }\n\n      &:active {\n        background-color: #f1f5f9;\n      }\n\n      &.active .material-symbols-outlined {\n        color: #2d9cf0;\n      }\n    }\n\n    .filter-dot {\n      position: absolute;\n      top: 14rpx;\n      right: 14rpx;\n      width: 14rpx;\n      height: 14rpx;\n      background-color: #f97316;\n      border-radius: 50%;\n      border: 3rpx solid rgba(255, 255, 255, 0.95);\n    }\n  }\n\n  .search-row {\n    margin-top: 16rpx;\n    margin-bottom: 24rpx;\n    padding: 0 16rpx;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    gap: 16rpx;\n\n    .province-picker {\n      display: flex;\n      align-items: center;\n      gap: 6rpx;\n      padding: 0 16rpx;\n      height: 88rpx;\n      background-color: #ffffff;\n      border-radius: 20rpx;\n      border: 1px solid rgba(226, 232, 240, 0.95);\n      box-shadow: 0 10rpx 24rpx rgba(15, 23, 42, 0.06);\n      flex-shrink: 0;\n      position: relative;\n      z-index: 2;\n\n      &:active {\n        background-color: #f1f5f9;\n      }\n\n      .province-text {\n        font-size: 24rpx;\n        font-weight: 700;\n        color: #0f172a;\n      }\n\n      .province-icon {\n        font-size: 28rpx;\n        color: #64748b;\n      }\n    }\n\n    .search-box {\n      flex: 1;\n      height: 88rpx;\n      background-color: #f8fafc;\n      border-radius: 20rpx;\n      display: flex;\n      align-items: center;\n      padding: 0 24rpx;\n      border: 1px solid rgba(226, 232, 240, 0.95);\n      box-shadow: 0 10rpx 24rpx rgba(15, 23, 42, 0.06);\n\n      .search-icon {\n        font-size: 40rpx;\n        color: #94a3b8;\n      }\n\n      .search-input {\n        flex: 1;\n        margin-left: 16rpx;\n        font-size: 28rpx;\n        color: #0f172a;\n      }\n    }\n  }\n\n  .category-scroll {\n    white-space: nowrap;\n    width: 100%;\n    padding: 0 16rpx;\n    box-sizing: border-box;\n\n    .category-row {\n      display: inline-flex;\n      gap: 16rpx;\n      padding-bottom: 4rpx;\n    }\n\n    .category-item {\n      padding: 12rpx 32rpx;\n      background-color: #ffffff;\n      border-radius: 40rpx;\n      font-size: 24rpx;\n      font-weight: 500;\n      color: #64748b;\n      border: 1px solid #e2e8f0;\n      white-space: nowrap;\n\n      &.active {\n        background-color: #2d9cf0;\n        color: #ffffff;\n        border-color: #2d9cf0;\n        box-shadow: 0 4rpx 8rpx rgba(45, 156, 240, 0.2);\n      }\n    }\n  }\n}\n\n/* TopHeader 右侧按钮：统一尺寸/交互 */\n.filter-icon-btn {\n  width: 80rpx;\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  position: relative;\n  background-color: transparent;\n\n  .material-symbols-outlined {\n    font-size: 40rpx;\n    color: #0f172a;\n  }\n\n  &:active {\n    background-color: #f1f5f9;\n  }\n\n  &.active .material-symbols-outlined {\n    color: #2d9cf0;\n  }\n}\n\n.filter-dot {\n  position: absolute;\n  top: 14rpx;\n  right: 14rpx;\n  width: 14rpx;\n  height: 14rpx;\n  background-color: #f97316;\n  border-radius: 50%;\n  border: 3rpx solid rgba(255, 255, 255, 0.95);\n}\n\n.main-list {\n  flex: 1;\n  overflow: hidden;\n}\n\n.list-content {\n  padding: 24rpx 16rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 24rpx;\n}\n\n.empty-wrap {\n  background-color: #ffffff;\n  border-radius: 24rpx;\n  padding: 56rpx 24rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10rpx;\n  border: 1px dashed #e2e8f0;\n\n  .empty-icon {\n    font-size: 80rpx;\n    color: #94a3b8;\n  }\n\n  .empty-title {\n    font-size: 28rpx;\n    font-weight: 700;\n    color: #334155;\n  }\n\n  .empty-desc {\n    font-size: 22rpx;\n    color: #94a3b8;\n  }\n}\n\n.loading-row {\n  display: flex;\n  justify-content: center;\n  padding: 8rpx 0 16rpx;\n  font-size: 22rpx;\n  color: #64748b;\n\n  &.muted {\n    color: #94a3b8;\n  }\n}\n\n.property-card {\n  background-color: #ffffff;\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.02);\n  border: 1px solid #f1f5f9;\n\n  &.disabled {\n    opacity: 0.8;\n\n    .title {\n      color: #64748b;\n    }\n\n    .price {\n      color: #94a3b8;\n    }\n  }\n\n  .card-main {\n    padding: 20rpx;\n    display: flex;\n    gap: 18rpx;\n\n    .image-box {\n      width: 224rpx;\n      height: 224rpx;\n      border-radius: 16rpx;\n      overflow: hidden;\n      position: relative;\n      flex-shrink: 0;\n      background-color: #f1f5f9;\n\n      .property-image {\n        width: 100%;\n        height: 100%;\n      }\n\n      &.grayscale {\n        .property-image {\n          filter: grayscale(1);\n        }\n      }\n\n      .image-tag {\n        position: absolute;\n        top: 8rpx;\n        left: 8rpx;\n        background-color: rgba(0, 0, 0, 0.6);\n        backdrop-filter: blur(4rpx);\n        color: #ffffff;\n        font-size: 20rpx;\n        padding: 4rpx 12rpx;\n        border-radius: 8rpx;\n        display: flex;\n        align-items: center;\n        gap: 4rpx;\n\n        .tag-icon {\n          font-size: 20rpx;\n        }\n      }\n\n      .mask {\n        position: absolute;\n        inset: 0;\n        background-color: rgba(15, 23, 42, 0.4);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .mask-text {\n          background-color: rgba(30, 41, 59, 0.8);\n          color: #ffffff;\n          font-size: 24rpx;\n          font-weight: bold;\n          padding: 4rpx 16rpx;\n          border-radius: 8rpx;\n        }\n      }\n    }\n\n    .info-box {\n      flex: 1;\n      min-width: 0;\n      display: flex;\n      flex-direction: column;\n      gap: 6rpx;\n\n      .title {\n        font-size: 30rpx;\n        font-weight: bold;\n        color: #0f172a;\n        line-height: 1.3;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        line-clamp: 2;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n      }\n\n      .meta {\n        display: flex;\n        align-items: center;\n        gap: 12rpx;\n        font-size: 24rpx;\n        color: #64748b;\n\n        .bold {\n          font-weight: 500;\n          color: #334155;\n        }\n\n        .region-row {\n          display: flex;\n          align-items: center;\n          gap: 12rpx;\n          font-size: 14rpx;\n          color: #64748b;\n\n          .region-label {\n            color: #94a3b8;\n            flex-shrink: 0;\n          }\n\n          .region-val {\n            min-width: 0;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n        }\n\n        .divider {\n          color: #e2e8f0;\n        }\n      }\n\n      .tags {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 12rpx;\n        margin: 2rpx 0;\n\n        .tag {\n          font-size: 20rpx;\n          font-weight: 500;\n          padding: 4rpx 12rpx;\n          border-radius: 8rpx;\n          border: 1px solid transparent;\n\n          &.blue {\n            background-color: #eff6ff;\n            color: #2563eb;\n            border-color: #dbeafe;\n          }\n          &.green {\n            background-color: #f0fdf4;\n            color: #16a34a;\n            border-color: #dcfce7;\n          }\n          &.orange {\n            background-color: #fff7ed;\n            color: #ea580c;\n            border-color: #ffedd5;\n          }\n          &.indigo {\n            background-color: #eef2ff;\n            color: #4f46e5;\n            border-color: #e0e7ff;\n          }\n          &.purple {\n            background-color: #faf5ff;\n            color: #9333ea;\n            border-color: #f3e8ff;\n          }\n          &.grey {\n            background-color: #f8fafc;\n            color: #64748b;\n          }\n        }\n      }\n\n      .price-row {\n        display: flex;\n        align-items: baseline;\n        gap: 16rpx;\n        margin-top: auto;\n\n        .price {\n          font-size: 36rpx;\n          font-weight: bold;\n          color: #f97316;\n        }\n\n        .unit-price {\n          font-size: 20rpx;\n          color: #94a3b8;\n        }\n      }\n\n      .stats {\n        font-size: 20rpx;\n        color: #94a3b8;\n        display: flex;\n        align-items: center;\n\n        .stats-sep {\n          width: 1px;\n          height: 16rpx;\n          background-color: #e2e8f0;\n          margin: 0 12rpx;\n        }\n      }\n    }\n  }\n\n  .card-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 14rpx 20rpx;\n    border-top: 1rpx solid transparent;\n\n    &.orange-footer {\n      background-color: #fff7ed;\n      border-color: #ffedd5;\n\n      .footer-icon-box {\n        background-color: #f97316;\n      }\n      .footer-text {\n        color: #9a3412;\n        font-weight: bold;\n      }\n    }\n\n    &.grey-footer {\n      background-color: #f8fafc;\n      border-color: #f1f5f9;\n\n      .footer-icon-box {\n        background-color: #cbd5e1;\n      }\n      .footer-text {\n        color: #64748b;\n        font-weight: 500;\n      }\n    }\n\n    .footer-left {\n      display: flex;\n      align-items: center;\n      gap: 16rpx;\n      flex: 1;\n      min-width: 0;\n\n      .footer-icon-box {\n        width: 40rpx;\n        height: 40rpx;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n\n        .footer-icon {\n          color: #ffffff;\n          font-size: 28rpx;\n        }\n      }\n\n      .footer-text {\n        font-size: 24rpx;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n    }\n\n    .footer-btn {\n      height: 52rpx;\n      padding: 0 24rpx;\n      background-color: #ffffff;\n      border: 1px solid #fed7aa;\n      border-radius: 40rpx;\n      display: flex;\n      align-items: center;\n      gap: 8rpx;\n      font-size: 22rpx;\n      font-weight: bold;\n      color: #ea580c;\n      line-height: 1;\n      margin-left: 24rpx;\n\n      &::after {\n        border: none;\n      }\n\n      .btn-icon {\n        font-size: 28rpx;\n      }\n\n      &:active {\n        background-color: #fff7ed;\n        transform: scale(0.95);\n      }\n    }\n\n    .footer-btn-disabled {\n      height: 52rpx;\n      padding: 0 24rpx;\n      background-color: #ffffff;\n      border: 1px solid #e2e8f0;\n      border-radius: 40rpx;\n      font-size: 22rpx;\n      color: #94a3b8;\n      margin-left: 24rpx;\n      &::after {\n        border: none;\n      }\n    }\n  }\n}\n\n.tab-bar {\n  background-color: #ffffff;\n  border-top: 1rpx solid #e2e8f0;\n  padding: 16rpx 48rpx calc(env(safe-area-inset-bottom) + 16rpx);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 100;\n\n  .tab-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8rpx;\n    color: #94a3b8;\n\n    .tab-icon {\n      font-size: 52rpx;\n\n      &.fill {\n        font-variation-settings: \"FILL\" 1;\n      }\n    }\n\n    .tab-text {\n      font-size: 20rpx;\n      font-weight: 500;\n    }\n\n    &.active {\n      color: #2d9cf0;\n    }\n  }\n\n  .add-btn-container {\n    position: relative;\n    top: -40rpx;\n\n    .add-btn {\n      width: 112rpx;\n      height: 112rpx;\n      background-color: #2d9cf0;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 8rpx 20rpx rgba(45, 156, 240, 0.4);\n\n      .material-symbols-outlined {\n        color: #ffffff;\n        font-size: 48rpx;\n      }\n\n      &:active {\n        transform: scale(0.9) translateY(4rpx);\n      }\n    }\n  }\n}\n\n.bottom-spacer {\n  height: 160rpx;\n}\n\n.placeholder {\n  color: #94a3b8;\n}\n\n/* 筛选弹层（避免与卡片内 .mask 冲突，单独命名） */\n.filter-mask {\n  position: fixed;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(15, 23, 42, 0.45);\n  z-index: 999;\n  display: flex;\n  align-items: flex-end;\n}\n\n.filter-sheet {\n  width: 100%;\n  background-color: #ffffff;\n  border-radius: 32rpx 32rpx 0 0;\n  padding: 24rpx 24rpx calc(env(safe-area-inset-bottom) + 24rpx);\n  box-sizing: border-box;\n  max-height: 82vh;\n  height: 82vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.filter-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8rpx;\n}\n\n.filter-body {\n  flex: 1;\n  overflow: hidden;\n}\n\n.filter-title {\n  font-size: 30rpx;\n  font-weight: 800;\n  color: #0f172a;\n}\n\n.filter-reset {\n  font-size: 26rpx;\n  color: #64748b;\n}\n\n.filter-section {\n  padding-top: 18rpx;\n}\n\n.filter-section-title {\n  font-size: 26rpx;\n  font-weight: 700;\n  color: #334155;\n  margin-bottom: 12rpx;\n  display: block;\n}\n\n.muted-tip {\n  width: 100%;\n  font-size: 22rpx;\n  color: #94a3b8;\n  line-height: 34rpx;\n}\n\n.chip-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16rpx;\n}\n\n.field-row {\n  display: flex;\n}\n\n.range-row {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n}\n\n.range-sep {\n  color: #94a3b8;\n  font-size: 22rpx;\n}\n\n.field-input {\n  flex: 1;\n  height: 80rpx;\n  padding: 0 18rpx;\n  border-radius: 16rpx;\n  background-color: #f8fafc;\n  border: 1px solid rgba(226, 232, 240, 0.95);\n  color: #0f172a;\n  font-size: 26rpx;\n}\n\n.chip {\n  padding: 12rpx 22rpx;\n  border-radius: 40rpx;\n  background-color: #f1f5f9;\n  color: #334155;\n  font-size: 24rpx;\n  border: 1px solid transparent;\n\n  &.active {\n    background-color: rgba(45, 156, 240, 0.12);\n    color: #2d9cf0;\n    border-color: rgba(45, 156, 240, 0.25);\n    font-weight: 700;\n  }\n}\n\n.radio-list {\n  border-radius: 20rpx;\n  overflow: hidden;\n  border: 1px solid #f1f5f9;\n}\n\n.radio-item {\n  height: 88rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 18rpx;\n  border-bottom: 1rpx solid #f1f5f9;\n  color: #334155;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  &.active {\n    color: #2d9cf0;\n    font-weight: 700;\n  }\n}\n\n.radio-check {\n  font-size: 36rpx;\n}\n\n.filter-footer {\n  display: flex;\n  gap: 16rpx;\n  margin-top: 20rpx;\n}\n\n.filter-btn {\n  flex: 1;\n  height: 80rpx;\n  border-radius: 20rpx;\n  font-size: 28rpx;\n  font-weight: 800;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  line-height: 1;\n  border: none;\n\n  &::after {\n    border: none;\n  }\n\n  &.ghost {\n    background-color: #f1f5f9;\n    color: #334155;\n  }\n\n  &.primary {\n    background-color: #2d9cf0;\n    color: #ffffff;\n  }\n}\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/property_list/property_list.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","components","BottomTabBar","TopHeader","onLoad","this","initPage","onUnload","searchTimer","clearTimeout","data","provinceName","provinceId","provinces","cities","districts","currentCityId","currentCityName","currentDistrictId","currentDistrictName","keyword","loading","finished","pagination","page","pageSize","total","propertyList","filterOptions","property_types","decoration_types","orientations","tags","stats","filterOptionsLoading","filterOptionsReqId","filters","category","rooms","smartLock","sale_status","sort","hot_status","property_type","decoration_type","orientation","build_year_min","build_year_max","price_min","price_max","area_min","area_max","more","filterOpen","draft","roomOptions","value","label","categoryOptions","statusOptions","hotStatusOptions","sortOptions","mockPropertyList","computed","hasActiveFilters","Array","isArray","length","propertyTypeOptions","list","dedup","from","Set","map","s","String","trim","filter","Boolean","concat","decorationTypeOptions","orientationOptions","tagOptions","buildYearStatText","min","statNumber","max","isFinite","Math","floor","priceStatText","formatNumber","areaStatText","buildYearRanges","base","makeYearRanges","priceRanges","makeValueRanges","ceil","areaRanges","provincePickerLabels","p","formatProvinceLabel","name","x","provincePickerIndex","id","Number","idx","findIndex","navTabs","key","it","formatCityLabel","displayList","methods","v","n","abs","round","toFixed","makeNiceStep","span","candidates","targetBuckets","raw","i","step","last","minYear","maxYear","maxItems","out","e","push","minValue","maxValue","stepCandidates","unit","isRangeActive","kind","opt","o","selectRange","cached","uni","getStorageSync","loadProvinces","applyProvinceByName","loadCities","loadFilterOptions","fetchList","reloadProvinces","index$1","showLoading","title","mask","hideLoading","showToast","icon","onProvincePickerChange","detail","row","nextName","setStorageSync","onKeywordInput","setTimeout","endsWith","slice","res","areaApi","getProvinces","code","items","hit","find","includes","getChildren","pid","loadDistricts","cityId","override","reqId","params","province","city","district","propertyApi","getFilterOptions","onDraftCategoryChange","next","toggleTag","tag","t","indexOf","splice","isNavActive","tab","startsWith","onNavTab","handlePromote","item","showActionSheet","itemList","success","tapIndex","ID","path","encodeURIComponent","text","setClipboardData","navigateTo","url","reset","join","getList","reLaunch","stopPullDownRefresh","loadMore","prev","onSearchConfirm","openFilter","closeFilter","resetFilter","applyFilter","goToDetail","ensureTags","split","tagColorClass","isSoldOrOff","saleStatus","getLayoutText","halls","bathrooms","extractDistrictFromAddress","address","addr","m1","match","m2","getDistrictText","getUnitPriceText","price","area","totalYuan","price_unit","per","toLocaleString","getCommissionText","rate","commission_rate","reward","commission_reward","hasRate","hasReward","wx","createPage","MiniProgramPage"],"mappings":"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"}