{"version":3,"file":"doc_webview.js","sources":["pages/doc_webview/doc_webview.vue","D:/WinApp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZG9jX3dlYnZpZXcvZG9jX3dlYnZpZXcudnVl"],"sourcesContent":["<template>\n\t<view class=\"doc-webview-page\">\n\t\t<!-- #ifdef MP-WEIXIN -->\n\t\t<web-view v-if=\"!loading && !content && isExternalUrl\" :src=\"url\"></web-view>\n\t\t<!-- #endif -->\n\n\t\t<view v-if=\"loading || content || !isExternalUrl\" class=\"doc-content-box\">\n\t\t\t<view v-if=\"loading\" class=\"loading-box\">\n\t\t\t\t<text class=\"loading-text\">文档加载中...</text>\n\t\t\t</view>\n\n\t\t\t<view v-else-if=\"content\" class=\"rich-box\">\n\t\t\t\t<rich-text :nodes=\"content\"></rich-text>\n\t\t\t</view>\n\n\t\t\t<view v-else class=\"fallback-box\">\n\t\t\t\t<text class=\"fallback-title\">{{ title || '文档' }}</text>\n\t\t\t\t<text class=\"fallback-url\">{{ url || '暂无链接' }}</text>\n\t\t\t\t<button class=\"copy-btn\" @click=\"copyUrl\">复制链接</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport userApi from '@/api/user'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tkey: '',\n\t\t\ttitle: '文档',\n\t\t\tcontent: '',\n\t\t\turl: '',\n\t\t\tloading: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisExternalUrl() {\n\t\t\treturn /^https?:\\/\\//i.test(String(this.url || '').trim())\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tconst rawKey = options && options.key ? decodeURIComponent(options.key) : ''\n\t\tthis.key = String(rawKey || '').trim()\n\t\tthis.loadDoc()\n\t},\n\tmethods: {\n\t\tasync loadDoc() {\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tconst res = await userApi.getLoginDocs(false)\n\t\t\t\tif (!res || res.code !== 0 || !res.data || !Array.isArray(res.data.docs)) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst item = res.data.docs.find((doc) => String(doc && doc.key ? doc.key : '').trim() === this.key)\n\t\t\t\tif (!item) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.title = String(item.title || '').trim() || '文档'\n\t\t\t\tthis.content = String(item.content || '').trim()\n\t\t\t\tthis.url = String(item.url || '').trim()\n\t\t\t\tuni.setNavigationBarTitle({ title: this.title })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tcopyUrl() {\n\t\t\tif (!this.url) {\n\t\t\t\tuni.showToast({ title: '暂无可复制链接', icon: 'none' })\n\t\t\t\treturn\n\t\t\t}\n\t\t\tuni.setClipboardData({\n\t\t\t\tdata: this.url,\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tuni.showToast({ title: '链接已复制', icon: 'none' })\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.doc-webview-page {\n\theight: 100vh;\n\tbackground: #ffffff;\n}\n\n.doc-content-box {\n\theight: 100%;\n\toverflow-y: auto;\n}\n\n.loading-box {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.loading-text {\n\tcolor: #94a3b8;\n\tfont-size: 28rpx;\n}\n\n.rich-box {\n\tpadding: 32rpx;\n\tfont-size: 28rpx;\n\tline-height: 1.8;\n\tcolor: #334155;\n}\n\n.fallback-box {\n\tpadding: 48rpx 32rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 24rpx;\n}\n\n.fallback-title {\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #0f172a;\n}\n\n.fallback-url {\n\tfont-size: 26rpx;\n\tcolor: #334155;\n\tword-break: break-all;\n}\n\n.copy-btn {\n\tmargin-top: 16rpx;\n\tbackground-color: #2d9cf0;\n\tcolor: #ffffff;\n\tfont-size: 30rpx;\n\tborder-radius: 18rpx;\n}\n</style>\n","import MiniProgramPage from 'E:/Work/Progect/GoFly-admin/main-admin/web/wxapp/pages/doc_webview/doc_webview.vue'\nwx.createPage(MiniProgramPage)"],"names":["_sfc_main","data","key","title","content","url","loading","computed","isExternalUrl","test","String","this","trim","onLoad","options","rawKey","decodeURIComponent","loadDoc","methods","res","userApi","getLoginDocs","code","Array","isArray","docs","item","find","doc","uni","setNavigationBarTitle","copyUrl","setClipboardData","success","index$1","showToast","icon","wx","createPage","MiniProgramPage"],"mappings":"sFA2BKA,EAAU,CACdC,KAAO,KACC,CACNC,IAAK,GACLC,MAAO,KACPC,QAAS,GACTC,IAAK,GACLC,SAAS,IAGXC,SAAU,CACT,aAAAC,GACQ,MAAA,gBAAgBC,KAAKC,OAAOC,KAAKN,KAAO,IAAIO,OACpD,GAED,MAAAC,CAAOC,GACN,MAAMC,EAASD,GAAWA,EAAQZ,IAAMc,mBAAmBF,EAAQZ,KAAO,GAC1ES,KAAKT,IAAMQ,OAAOK,GAAU,IAAIH,OAChCD,KAAKM,SACL,EACDC,QAAS,CACR,aAAMD,GACLN,KAAKL,SAAU,EACX,IACH,MAAMa,QAAYC,UAAQC,cAAa,GACvC,IAAKF,GAAoB,IAAbA,EAAIG,OAAeH,EAAIlB,OAASsB,MAAMC,QAAQL,EAAIlB,KAAKwB,MAClE,OAED,MAAMC,EAAOP,EAAIlB,KAAKwB,KAAKE,MAAMC,GAAQlB,OAAOkB,GAAOA,EAAI1B,IAAM0B,EAAI1B,IAAM,IAAIU,SAAWD,KAAKT,MAC/F,IAAKwB,EACJ,OAEDf,KAAKR,MAAQO,OAAOgB,EAAKvB,OAAS,IAAIS,QAAU,KAChDD,KAAKP,QAAUM,OAAOgB,EAAKtB,SAAW,IAAIQ,OAC1CD,KAAKN,IAAMK,OAAOgB,EAAKrB,KAAO,IAAIO,OAClCiB,EAAAA,QAAIC,sBAAsB,CAAE3B,MAAOQ,KAAKR,OACzC,CAAU,QACTQ,KAAKL,SAAU,CAChB,CACA,EACD,OAAAyB,GACMpB,KAAKN,IAIVwB,EAAAA,QAAIG,iBAAiB,CACpB/B,KAAMU,KAAKN,IACX4B,QAAS,KACRJ,EAAGK,QAACC,UAAU,CAAEhC,MAAO,QAASiC,KAAM,QAAQ,IAN/CP,EAAGK,QAACC,UAAU,CAAEhC,MAAO,UAAWiC,KAAM,QAS1C,gaC7EFC,GAAGC,WAAWC"}