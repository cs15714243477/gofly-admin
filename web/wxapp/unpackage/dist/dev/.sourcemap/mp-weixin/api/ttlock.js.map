{"version":3,"file":"ttlock.js","sources":["api/ttlock.js"],"sourcesContent":["import request from '@/utils/request';\n\nexport default {\n  // TTLock 配置状态（仅有智能锁管理权限用户可访问）\n  getStatus: () =>\n    request({\n      url: '/uniapp/wxttlock/getStatus',\n      method: 'GET',\n      custom: {\n        showLoading: false,\n        auth: true,\n      },\n    }),\n\n  // 同步锁列表（从云端拉取并落库）\n  syncLocks: () =>\n    request({\n      url: '/uniapp/wxttlock/syncLocks',\n      method: 'POST',\n      data: {},\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '同步中',\n      },\n    }),\n\n  // 锁列表（本地库）\n  getLockList: (data) =>\n    request({\n      url: '/uniapp/wxttlock/getLockList',\n      method: 'GET',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '加载中',\n      },\n    }),\n\n  // 绑定房源到锁（一房一锁/一锁一房）\n  bindProperty: (data) =>\n    request({\n      url: '/uniapp/wxttlock/bindProperty',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '绑定中',\n      },\n    }),\n\n  // 解绑房源锁\n  unbindProperty: (data) =>\n    request({\n      url: '/uniapp/wxttlock/unbindProperty',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '解绑中',\n      },\n    }),\n\n  // 查询房源绑定的锁\n  getPropertyLock: (data) =>\n    request({\n      url: '/uniapp/wxttlock/getPropertyLock',\n      method: 'GET',\n      data,\n      custom: {\n        showLoading: false,\n        auth: true,\n      },\n    }),\n\n  // 小程序端：获取房源蓝牙开锁所需数据（lockData/keyData 等）\n  getPropertyBleInfo: (data) =>\n    request({\n      url: '/uniapp/wxttlock/getPropertyBleInfo',\n      method: 'GET',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '加载中',\n      },\n    }),\n\n  // 小程序端：生成房源开锁密码（一次性/临时）\n  getPropertyPasscode: (data) =>\n    request({\n      url: '/uniapp/wxttlock/passcode',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '生成中',\n      },\n    }),\n\n  // 小程序端：记录开锁/蓝牙关键节点日志（写入 business_user_activity_logs）\n  logUnlockActivity: (data) =>\n    request({\n      url: '/uniapp/wxttlock/logUnlockActivity',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: false,\n        auth: true,\n      },\n    }),\n\n  // 小程序端：开始一次蓝牙开锁（写入 business_unlock_requests）\n  bleUnlockStart: (data) =>\n    request({\n      url: '/uniapp/wxttlock/bleUnlockStart',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: false,\n        auth: true,\n      },\n    }),\n\n  // 小程序端：结束一次蓝牙开锁（更新 business_unlock_requests + 记录活动日志）\n  bleUnlockFinish: (data) =>\n    request({\n      url: '/uniapp/wxttlock/bleUnlockFinish',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: false,\n        auth: true,\n      },\n    }),\n\n  // 远程开锁（传 property_id 或 ttlock_lock_id）\n  remoteUnlock: (data) =>\n    request({\n      url: '/uniapp/wxttlock/remoteUnlock',\n      method: 'POST',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '开锁中',\n      },\n    }),\n\n  // 锁详情（云端+本地）\n  getLockDetail: (data) =>\n    request({\n      url: '/uniapp/wxttlock/getLockDetail',\n      method: 'GET',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '加载中',\n      },\n    }),\n\n  // 开锁记录（云端）\n  getLockRecords: (data) =>\n    request({\n      url: '/uniapp/wxttlock/getLockRecords',\n      method: 'GET',\n      data,\n      custom: {\n        showLoading: true,\n        auth: true,\n        loadingMsg: '加载中',\n      },\n    }),\n};\n"],"names":["ttlockApi","getStatus","request","url","method","custom","showLoading","auth","syncLocks","data","loadingMsg","getLockList","bindProperty","unbindProperty","getPropertyLock","getPropertyBleInfo","getPropertyPasscode","logUnlockActivity","bleUnlockStart","bleUnlockFinish","remoteUnlock","getLockDetail","getLockRecords"],"mappings":"0DAEeA,EAAA,CAEbC,UAAW,IACTC,UAAQ,CACNC,IAAK,6BACLC,OAAQ,MACRC,OAAQ,CACNC,aAAa,EACbC,MAAM,KAKZC,UAAW,IACTN,UAAQ,CACNC,IAAK,6BACLC,OAAQ,OACRK,KAAM,CAAE,EACRJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBC,YAAcF,GACZP,UAAQ,CACNC,IAAK,+BACLC,OAAQ,MACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBE,aAAeH,GACbP,UAAQ,CACNC,IAAK,gCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBG,eAAiBJ,GACfP,UAAQ,CACNC,IAAK,kCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBI,gBAAkBL,GAChBP,UAAQ,CACNC,IAAK,mCACLC,OAAQ,MACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,KAKZQ,mBAAqBN,GACnBP,UAAQ,CACNC,IAAK,sCACLC,OAAQ,MACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBM,oBAAsBP,GACpBP,UAAQ,CACNC,IAAK,4BACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBO,kBAAoBR,GAClBP,UAAQ,CACNC,IAAK,qCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,KAKZW,eAAiBT,GACfP,UAAQ,CACNC,IAAK,kCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,KAKZY,gBAAkBV,GAChBP,UAAQ,CACNC,IAAK,mCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,KAKZa,aAAeX,GACbP,UAAQ,CACNC,IAAK,gCACLC,OAAQ,OACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBW,cAAgBZ,GACdP,UAAQ,CACNC,IAAK,iCACLC,OAAQ,MACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY,SAKlBY,eAAiBb,GACfP,UAAQ,CACNC,IAAK,kCACLC,OAAQ,MACRK,OACAJ,OAAQ,CACNC,aAAa,EACbC,MAAM,EACNG,WAAY"}