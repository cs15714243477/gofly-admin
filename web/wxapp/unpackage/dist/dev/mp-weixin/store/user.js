"use strict";const e=require("../common/vendor.js"),s=require("../api/user.js"),t={avatar:"",name:"",nickname:"",mobile:""},i=e.defineStore({id:"user",state:()=>({userInfo:{...t},isLogin:!!e.index$1.getStorageSync("token")}),actions:{async getInfo(){const e=await s.userApi.getuserinfo();if(e&&0===e.code)return this.userInfo=e.data,Promise.resolve(e.data)},setUserInfo(e){this.userInfo=e},setToken(s=""){return""===s?(this.isLogin=!1,e.index$1.removeStorageSync("token")):(this.isLogin=!0,e.index$1.setStorageSync("token",s)),this.isLogin},resetUserData(){this.setToken(),this.userInfo=e.cloneDeep(t)},async logout(e=!1){if(!e){const e=await s.userApi.logout();e&&0===e.code&&this.resetUserData()}return e&&this.resetUserData(),!this.isLogin}}});exports.user=i;
//# sourceMappingURL=../../.sourcemap/mp-weixin/store/user.js.map
