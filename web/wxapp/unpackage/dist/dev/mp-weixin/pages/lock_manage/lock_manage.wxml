<view class="lm"><top-header wx:if="{{b}}" u-s="{{['left']}}" u-i="51d0a4a1-0" bind:__l="__l" u-p="{{b}}"><view class="icon-btn" bindtap="{{a}}" slot="left"><text class="material-symbols-outlined">arrow_back</text></view></top-header><view class="toolbar"><view class="search-box"><text class="material-symbols-outlined search-ic">search</text><input class="search-input" type="text" confirm-type="search" placeholder="搜索锁名 / ID / MAC..." placeholder-class="placeholder" bindconfirm="{{c}}" value="{{d}}" bindinput="{{e}}"/><view wx:if="{{f}}" class="clear-btn" bindtap="{{g}}"><text class="material-symbols-outlined">close</text></view></view><view class="status-row"><view class="{{['chip', i && 'ok']}}"><text class="material-symbols-outlined chip-ic">settings</text><text class="chip-txt">{{h}}</text></view><view class="{{['chip', k && 'ok']}}"><text class="material-symbols-outlined chip-ic">key</text><text class="chip-txt">{{j}}</text></view><view wx:if="{{l}}" class="chip ghost"><text class="material-symbols-outlined chip-ic">link</text><text class="chip-txt">{{m}}</text></view></view></view><scroll-view scroll-y="true" class="list" refresher-enabled="{{true}}" refresher-triggered="{{r}}" lower-threshold="160" bindrefresherrefresh="{{s}}" bindscrolltolower="{{t}}"><view class="list-content"><view wx:if="{{n}}" class="empty"><text class="material-symbols-outlined empty-ic">smart_lock</text><text class="empty-title">暂无设备数据</text><text class="empty-sub">请先点击右下角“同步”或稍后再试</text></view><view wx:for="{{o}}" wx:for-item="it" wx:key="m" class="card"><view class="card-head"><view class="head-left"><view class="lock-ic"><text class="material-symbols-outlined">smart_lock</text></view><view class="head-texts"><text class="lock-name">{{it.a}}</text><text class="lock-sub">ID: {{it.b}} · {{it.c}}</text></view></view><view class="{{['battery', it.e]}}"><text class="material-symbols-outlined bat-ic">battery_full</text><text class="bat-txt">{{it.d}}%</text></view></view><view class="bind-box"><view wx:if="{{it.f}}" class="bind-on"><text class="bind-tag on">已绑定</text><view class="bind-info"><text class="bind-title">{{it.g}}（{{it.h}}）</text><text class="bind-sub">{{it.i}}</text></view><view class="unbind-btn" catchtap="{{it.j}}"><text class="material-symbols-outlined">link_off</text></view></view><view wx:else class="bind-off"><text class="bind-tag off">未绑定</text><text class="bind-tip">点击“绑定房源”完成绑定</text></view></view><view class="card-actions"><button class="btn ghost" catchtap="{{it.l}}"><text class="material-symbols-outlined btn-ic">link</text><text>{{it.k}}</text></button></view></view><view wx:if="{{p}}" class="loading-row"><text class="material-symbols-outlined spin">progress_activity</text><text>加载中...</text></view><view wx:elif="{{q}}" class="end-row"><text>没有更多了</text></view></view><view class="bottom-spacer"></view></scroll-view><view class="fab"><view class="{{['fab-btn', 'ghost', v && 'disabled']}}" bindtap="{{w}}"><text class="material-symbols-outlined fab-ic">refresh</text><text class="fab-txt">刷新</text></view><view class="{{['fab-btn', 'primary', x && 'disabled']}}" bindtap="{{y}}"><text class="material-symbols-outlined fab-ic">sync</text><text class="fab-txt">同步</text></view></view><view wx:if="{{z}}" class="mask" bindtap="{{N}}"><view class="sheet" catchtap="{{M}}"><view class="sheet-head"><text class="sheet-title">绑定房源</text><view class="sheet-close" bindtap="{{A}}"><text class="material-symbols-outlined">close</text></view></view><view class="sheet-sub">{{B}}</view><view class="p-search"><text class="material-symbols-outlined p-ic">search</text><input class="p-input" type="text" confirm-type="search" placeholder="搜索房源标题/小区..." placeholder-class="placeholder" bindconfirm="{{C}}" value="{{D}}" bindinput="{{E}}"/><view wx:if="{{F}}" class="p-clear" bindtap="{{G}}"><text class="material-symbols-outlined">close</text></view></view><scroll-view scroll-y="true" class="p-list" lower-threshold="160" bindscrolltolower="{{L}}"><view wx:if="{{H}}" class="p-loading"><text>加载中...</text></view><view wx:elif="{{I}}" class="p-empty"><text>暂无房源</text></view><view wx:for="{{J}}" wx:for-item="p" wx:key="d" class="p-item" bindtap="{{p.e}}"><view class="p-main"><text class="p-title">{{p.a}}</text><text class="p-sub">{{p.b}} · {{p.c}}</text></view><text class="material-symbols-outlined p-arrow">chevron_right</text></view><view wx:if="{{K}}" class="p-end"><text>没有更多了</text></view><view style="height:20rpx"></view></scroll-view></view></view></view>