"use strict";const t=require("../../common/vendor.js"),e={components:{BottomTabBar:()=>"../../components/BottomTabBar.js",TopHeader:()=>"../../components/TopHeader.js"},data:()=>({currentCategory:"all",categories:[{key:"all",label:"全部房源"},{key:"mine",label:"我的房源"},{key:"nearby",label:"附近房源"},{key:"price_drop",label:"最新降价"},{key:"school",label:"学区房"}],filters:{rooms:"",smartLock:!1,status:"",sort:""},filterOpen:!1,draft:{rooms:"",smartLock:!1,status:"",sort:""},roomOptions:[{value:"",label:"不限"},{value:"1",label:"1室"},{value:"2",label:"2室"},{value:"3",label:"3室"},{value:"4+",label:"4室+"}],statusOptions:[{value:"",label:"不限"},{value:"normal",label:"正常"},{value:"交易中",label:"交易中"},{value:"已下架",label:"已下架"}],sortOptions:[{value:"",label:"默认"},{value:"views_desc",label:"浏览最多"},{value:"myviews_desc",label:"我最关注"}],propertyList:[{title:"13# 12.12开盘 核心卖点 海景高层",rooms:"3室2厅",size:"105",orientation:"南向",price:"850万",unitPrice:"80,952元/m²",views:127,myViews:1,tag:"智能门锁",tagIcon:"lock",image:"/static/images/img_c63bd4d9ba.png",tags:[{name:"自营",type:"blue"},{name:"精装",type:"green"},{name:"学区房",type:"orange"}],commission:"佣金1.5%，成交奖励经纪人8000"},{title:"金城中心 舒适单身公寓 地铁口直达",rooms:"1室1厅",size:"45",orientation:"北向",price:"210万",unitPrice:"46,666元/m²",views:89,myViews:0,image:"/static/images/img_f0b09ae08c.png",tags:[{name:"地铁房",type:"indigo"},{name:"有电梯",type:"grey"}],commission:"佣金1%，极速结佣",footerIcon:"percent"},{title:"滨江别墅 独栋花园 视野开阔 无遮挡",rooms:"4室3厅",size:"210",orientation:"东向",price:"1280万",unitPrice:"60,952元/m²",views:256,myViews:45,tag:"VR看房",tagIcon:"videocam",image:"/static/images/img_f1b597a564.png",tags:[{name:"自营",type:"blue"},{name:"VR看房",type:"purple"}],commission:"高佣2%，房东急售",footerIcon:"local_fire_department"},{title:"日落大道 2室紧凑型 适合过渡",rooms:"2室1厅",size:"78",orientation:"西向",price:"420万",unitPrice:"53,846元/m²",views:45,myViews:2,status:"交易中",image:"/static/images/img_fdf5f4bc67.png",tags:[{name:"随时看房",type:"grey"}],commission:"佣金1%",footerIcon:"history",footerClass:"grey-footer"},{title:"日落大道 2室紧凑型 适合过渡",rooms:"2室1厅",size:"78",orientation:"西向",price:"420万",unitPrice:"53,846元/m²",views:45,myViews:2,status:"已下架",image:"/static/images/img_fdf5f4bc67.png",tags:[{name:"随时看房",type:"grey"}],commission:"佣金1%",footerIcon:"history",footerClass:"grey-footer"}]}),computed:{hasActiveFilters(){return!!(this.filters.rooms||this.filters.smartLock||this.filters.status||this.filters.sort)},displayList(){let t=Array.isArray(this.propertyList)?[...this.propertyList]:[];return this.filters.rooms&&(t=t.filter((t=>{const e=t&&t.rooms||"",s=String(e).match(/^(\d+)/),o=s?Number(s[1]):0;return"4+"===this.filters.rooms?o>=4:String(o)===this.filters.rooms}))),this.filters.smartLock&&(t=t.filter((t=>t&&("智能门锁"===t.tag||"lock"===t.tagIcon)))),this.filters.status&&(t="normal"===this.filters.status?t.filter((t=>!t.status)):t.filter((t=>t&&t.status===this.filters.status))),"views_desc"===this.filters.sort?t.sort(((t,e)=>(e.views||0)-(t.views||0))):"myviews_desc"===this.filters.sort&&t.sort(((t,e)=>(e.myViews||0)-(t.myViews||0))),t}},methods:{setCategory(t){this.currentCategory=t},handlePromote(e){const s=e&&e.title||"房源";t.index$1.showActionSheet({itemList:["生成获客海报","复制推广文案","模拟分享（占位）"],success:e=>{if(0!==e.tapIndex)if(1!==e.tapIndex)2===e.tapIndex&&t.index$1.showToast({title:"分享功能待接入",icon:"none"});else{const e=`【优质房源推荐】${s}\n点击查看详情（示例）：/pages/property_detail/property_detail`;t.index$1.setClipboardData({data:e,success:()=>{t.index$1.showToast({title:"已复制推广文案",icon:"none"})}})}else t.index$1.navigateTo({url:`/pages/marketing_posters/marketing_posters?title=${encodeURIComponent(s)}`})}})},openFilter(){this.filterOpen=!0,this.draft={rooms:this.filters.rooms,smartLock:!!this.filters.smartLock,status:this.filters.status,sort:this.filters.sort}},closeFilter(){this.filterOpen=!1},resetFilter(){this.draft={rooms:"",smartLock:!1,status:"",sort:""}},applyFilter(){this.filters={rooms:this.draft.rooms,smartLock:!!this.draft.smartLock,status:this.draft.status,sort:this.draft.sort},this.closeFilter()},goToDetail(e){"已下架"!==e.status&&t.index$1.navigateTo({url:"/pages/property_detail/property_detail"})}}};if(!Array){(t.resolveComponent("TopHeader")+t.resolveComponent("BottomTabBar"))()}const s=t._export_sfc(e,[["render",function(e,s,o,r,i,a){return t.e({a:t.p({title:"房源"}),b:a.hasActiveFilters},(a.hasActiveFilters,{}),{c:a.hasActiveFilters?1:"",d:t.o(((...t)=>a.openFilter&&a.openFilter(...t))),e:t.f(i.categories,((e,s,o)=>({a:t.t(e.label),b:e.key||s,c:i.currentCategory===e.key?1:"",d:t.o((t=>a.setCategory(e.key)),e.key||s)}))),f:t.f(a.displayList,((e,s,o)=>t.e({a:e.image,b:e.tag},e.tag?{c:t.t(e.tagIcon),d:t.t(e.tag)}:{},{e:"交易中"===e.status||"已下架"===e.status},"交易中"===e.status||"已下架"===e.status?{f:t.t(e.status)}:{},{g:t.t(e.title),h:t.t(e.rooms),i:t.t(e.size),j:t.t(e.orientation),k:t.f(e.tags,((e,s,o)=>({a:t.t(e.name),b:s,c:t.n(e.type)}))),l:t.t(e.price),m:t.t(e.unitPrice),n:t.t(e.views),o:t.t(e.myViews),p:t.t(e.footerIcon||"currency_yen"),q:t.t(e.commission),r:"已下架"!==e.status},"已下架"!==e.status?{s:t.o((t=>a.handlePromote(e)),s)}:{},{t:t.n(e.footerClass||"orange-footer"),v:s,w:"已下架"===e.status?1:"",x:t.o((t=>a.goToDetail(e)),s)}))),g:t.p({active:"property"}),h:i.filterOpen},i.filterOpen?{i:t.o(((...t)=>a.resetFilter&&a.resetFilter(...t))),j:t.f(i.roomOptions,((e,s,o)=>({a:t.t(e.label),b:"room-"+s,c:i.draft.rooms===e.value?1:"",d:t.o((t=>i.draft.rooms=e.value),"room-"+s)}))),k:i.draft.smartLock?1:"",l:t.o((t=>i.draft.smartLock=!i.draft.smartLock)),m:t.f(i.statusOptions,((e,s,o)=>({a:t.t(e.label),b:"status-"+s,c:i.draft.status===e.value?1:"",d:t.o((t=>i.draft.status=e.value),"status-"+s)}))),n:t.f(i.sortOptions,((e,s,o)=>t.e({a:t.t(e.label),b:i.draft.sort===e.value},(i.draft.sort,e.value,{}),{c:"sort-"+s,d:i.draft.sort===e.value?1:"",e:t.o((t=>i.draft.sort=e.value),"sort-"+s)}))),o:t.o(((...t)=>a.closeFilter&&a.closeFilter(...t))),p:t.o(((...t)=>a.applyFilter&&a.applyFilter(...t))),q:t.o((()=>{})),r:t.o(((...t)=>a.closeFilter&&a.closeFilter(...t)))}:{})}]]);wx.createPage(s);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/property_list/property_list.js.map
