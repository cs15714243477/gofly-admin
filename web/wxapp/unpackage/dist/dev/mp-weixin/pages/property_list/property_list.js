"use strict";const t=require("../../common/vendor.js"),i=require("../../api/area.js"),e=require("../../api/property.js"),r={components:{BottomTabBar:()=>"../../components/BottomTabBar.js",TopHeader:()=>"../../components/TopHeader.js"},onLoad(){this.initPage()},onUnload(){this.searchTimer&&clearTimeout(this.searchTimer)},data:()=>({provinceName:"辽宁",provinceId:0,provinces:[],cities:[],districts:[],currentCityId:0,currentCityName:"",currentDistrictId:0,currentDistrictName:"",keyword:"",loading:!1,finished:!1,pagination:{page:1,pageSize:10,total:0},propertyList:[],searchTimer:null,filterOptions:{property_types:[],decoration_types:[],orientations:[],tags:[],stats:{}},filterOptionsLoading:!1,filterOptionsReqId:0,filters:{category:"all",rooms:"",smartLock:!1,sale_status:"",sort:"",hot_status:"",property_type:"",decoration_type:"",orientation:"",build_year_min:"",build_year_max:"",price_min:"",price_max:"",area_min:"",area_max:"",more:[]},filterOpen:!1,draft:{category:"all",rooms:"",smartLock:!1,sale_status:"",sort:"",hot_status:"",property_type:"",decoration_type:"",orientation:"",build_year_min:"",build_year_max:"",price_min:"",price_max:"",area_min:"",area_max:"",more:[]},roomOptions:[{value:"",label:"不限"},{value:"1",label:"1室"},{value:"2",label:"2室"},{value:"3",label:"3室"},{value:"4+",label:"4室+"}],categoryOptions:[{value:"all",label:"全部房源"},{value:"mine",label:"我的房源"}],statusOptions:[{value:"",label:"不限"},{value:"on_sale",label:"在售"},{value:"sold",label:"已售"},{value:"off_market",label:"下架"}],hotStatusOptions:[{value:"",label:"不限"},{value:1,label:"推荐"},{value:0,label:"不推荐"}],sortOptions:[{value:"",label:"默认"},{value:"view_desc",label:"浏览最多"},{value:"follow_desc",label:"关注最多"},{value:"latest",label:"最新发布"},{value:"price_asc",label:"价格从低到高"},{value:"price_desc",label:"价格从高到低"}],mockPropertyList:[]}),computed:{hasActiveFilters(){return!!(this.keyword||"all"!==this.filters.category||this.filters.rooms||this.filters.smartLock||this.filters.sale_status||this.filters.sort||""!==this.filters.hot_status||this.filters.property_type||this.filters.decoration_type||this.filters.orientation||this.filters.build_year_min||this.filters.build_year_max||this.filters.price_min||this.filters.price_max||this.filters.area_min||this.filters.area_max||Array.isArray(this.filters.more)&&this.filters.more.length>0)},propertyTypeOptions(){const t=Array.isArray(this.filterOptions.property_types)?this.filterOptions.property_types:[],i=Array.from(new Set(t.map((t=>String(t||"").trim())).filter(Boolean)));return[""].concat(i)},decorationTypeOptions(){const t=Array.isArray(this.filterOptions.decoration_types)?this.filterOptions.decoration_types:[],i=Array.from(new Set(t.map((t=>String(t||"").trim())).filter(Boolean)));return[""].concat(i)},orientationOptions(){const t=Array.isArray(this.filterOptions.orientations)?this.filterOptions.orientations:[],i=Array.from(new Set(t.map((t=>String(t||"").trim())).filter(Boolean)));return[""].concat(i)},tagOptions(){const t=Array.isArray(this.filterOptions.tags)?this.filterOptions.tags:[];return Array.from(new Set(t.map((t=>String(t||"").trim())).filter(Boolean)))},buildYearStatText(){const t=this.statNumber("build_year_min"),i=this.statNumber("build_year_max");return!isFinite(t)||!isFinite(i)||t<=0||i<=0||i<t?"":`${Math.floor(t)}-${Math.floor(i)}`},priceStatText(){const t=this.statNumber("price_min"),i=this.statNumber("price_max");return!isFinite(t)||!isFinite(i)||i<t?"":`${this.formatNumber(t)}-${this.formatNumber(i)}万`},areaStatText(){const t=this.statNumber("area_min"),i=this.statNumber("area_max");return!isFinite(t)||!isFinite(i)||i<t?"":`${this.formatNumber(t)}-${this.formatNumber(i)}㎡`},buildYearRanges(){const t=[{label:"不限",min:"",max:""}],i=this.statNumber("build_year_min"),e=this.statNumber("build_year_max");return!isFinite(i)||!isFinite(e)||i<=0||e<=0||e<i?t:t.concat(this.makeYearRanges(Math.floor(i),Math.floor(e),5))},priceRanges(){const t=[{label:"不限",min:"",max:""}],i=this.statNumber("price_min"),e=this.statNumber("price_max");return!isFinite(i)||!isFinite(e)||e<i?t:t.concat(this.makeValueRanges(Math.max(0,Math.floor(i)),Math.max(0,Math.ceil(e)),5,[10,20,30,50,80,100,150,200,300,500,800,1e3],"万"))},areaRanges(){const t=[{label:"不限",min:"",max:""}],i=this.statNumber("area_min"),e=this.statNumber("area_max");return!isFinite(i)||!isFinite(e)||e<i?t:t.concat(this.makeValueRanges(Math.max(0,Math.floor(i)),Math.max(0,Math.ceil(e)),5,[10,20,30,50,80,100,120,150,200,300],"㎡"))},provincePickerLabels(){return(Array.isArray(this.provinces)?this.provinces:[]).map((t=>this.formatProvinceLabel(t&&t.name))).filter((t=>!!t))},provincePickerIndex(){const t=Array.isArray(this.provinces)?this.provinces:[];if(0===t.length)return 0;const i=Number(this.provinceId)||0;if(i){const e=t.findIndex((t=>Number(t&&t.id)===i));if(e>=0)return e}const e=String(this.provinceName||"").trim();if(e){const i=t.findIndex((t=>this.formatProvinceLabel(t&&t.name)===e));if(i>=0)return i}return 0},navTabs(){if(!this.currentCityId){const t=Array.isArray(this.cities)?this.cities:[];return[{key:"",label:"全部"}].concat(t.map((t=>({key:`city:${t.id}`,id:t.id,name:t.name,label:this.formatCityLabel(t.name)}))))}const t=Array.isArray(this.districts)?this.districts:[];return[{key:"back",label:"返回"},{key:"all_city",label:"全市"}].concat(t.map((t=>({key:`district:${t.id}`,id:t.id,name:t.name,label:t.name}))))},displayList(){return Array.isArray(this.propertyList)?this.propertyList:[]}},methods:{statNumber(t){const i=this.filterOptions&&this.filterOptions.stats||{},e=i?i[t]:void 0;return Number(e)},formatNumber(t){const i=Number(t);return isFinite(i)?Math.abs(i-Math.round(i))<1e-9?String(Math.round(i)):String(Number(i.toFixed(2))):"-"},makeNiceStep(t,i,e){const r=Number(t);if(!isFinite(r)||r<=0)return i[0]||1;const a=r/Math.max(1,e),s=Array.isArray(i)?i:[];for(let n=0;n<s.length;n++){const t=Number(s[n]);if(isFinite(t)&&t>0&&t>=a)return t}const o=Number(s[s.length-1]);return isFinite(o)&&o>0?o:Math.ceil(a)||1},makeYearRanges(t,i,e){const r=Number(t),a=Number(i);if(!isFinite(r)||!isFinite(a)||a<r)return[];const s=a-r+1,o=this.makeNiceStep(s,[5,10,20,25,50],e),n=[];for(let l=Math.floor(r/o)*o;l<=a&&n.length<e;l+=o){const t=l+o-1;if(t>=a){n.push({label:`${l}及以后`,min:String(l),max:""});break}n.push({label:`${l}-${t}`,min:String(l),max:String(t)})}return n},makeValueRanges(t,i,e,r,a){const s=Number(t),o=Number(i);if(!isFinite(s)||!isFinite(o)||o<s)return[];const n=o-s,l=this.makeNiceStep(n,r,e),c=[];for(let h=Math.max(0,Math.floor(s/l)*l);h<=o&&c.length<e;h+=l){const t=h+l;if(t>=o){c.push({label:`${h}${a}以上`,min:String(h),max:""});break}c.push({label:`${h}-${t}${a}`,min:String(h),max:String(t)})}return c},isRangeActive(t,i){const e=i||{};return"year"===t?String(this.draft.build_year_min||"")===String(e.min||"")&&String(this.draft.build_year_max||"")===String(e.max||""):"price"===t?String(this.draft.price_min||"")===String(e.min||"")&&String(this.draft.price_max||"")===String(e.max||""):"area"===t&&(String(this.draft.area_min||"")===String(e.min||"")&&String(this.draft.area_max||"")===String(e.max||""))},selectRange(t,i){const e=i||{};return"year"===t?(this.draft.build_year_min=String(e.min||""),void(this.draft.build_year_max=String(e.max||""))):"price"===t?(this.draft.price_min=String(e.min||""),void(this.draft.price_max=String(e.max||""))):void("area"===t&&(this.draft.area_min=String(e.min||""),this.draft.area_max=String(e.max||"")))},async initPage(){const i=t.index$1.getStorageSync("hm_province_name");this.provinceName=i||"辽宁",await this.loadProvinces(),this.applyProvinceByName(this.provinceName),await this.loadCities(),this.loadFilterOptions({category:this.filters.category}),this.fetchList(!0)},async reloadProvinces(){t.index$1.showLoading({title:"加载中",mask:!0}),await this.loadProvinces(),t.index$1.hideLoading(),Array.isArray(this.provinces)&&0!==this.provinces.length?(this.applyProvinceByName(this.provinceName||"辽宁"),await this.loadCities(),this.loadFilterOptions({category:this.filters.category}),this.fetchList(!0)):t.index$1.showToast({title:"省份数据获取失败",icon:"none"})},async onProvincePickerChange(i){const e=Number(i&&i.detail&&i.detail.value),r=(Array.isArray(this.provinces)?this.provinces:[])[e];if(!r)return;const a=this.formatProvinceLabel(r.name);a&&a!==this.provinceName&&(this.provinceName=a,this.provinceId=Number(r.id)||0,t.index$1.setStorageSync("hm_province_name",a),this.currentCityId=0,this.currentCityName="",this.currentDistrictId=0,this.currentDistrictName="",this.districts=[],await this.loadCities(),this.loadFilterOptions({category:this.filters.category}),this.fetchList(!0))},onKeywordInput(){this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.fetchList(!0)}),350)},formatProvinceLabel(t){const i=String(t||"").trim();return i?i.endsWith("省")||i.endsWith("市")?i.slice(0,-1):i.endsWith("自治区")?i.slice(0,-3):i:""},formatCityLabel(t){const i=String(t||"").trim();return i?i.endsWith("市")?i.slice(0,-1):i:""},async loadProvinces(){let t;try{t=await i.areaApi.getProvinces({})}catch(r){return!1}if(!t||0!==t.code)return!1;const e=t.data&&t.data.items||[];return this.provinces=Array.isArray(e)?e:[],this.provinces.length>0},applyProvinceByName(i){const e=String(i||"").trim();if(!e||!Array.isArray(this.provinces)||0===this.provinces.length)return this.provinceId=0,void(this.provinceName=e||"辽宁");const r=this.provinces.find((t=>String(t&&t.name).includes(e)))||this.provinces.find((t=>e.includes(String(t&&t.name))))||this.provinces[0];this.provinceId=Number(r&&r.id)||0,this.provinceName=this.formatProvinceLabel(r&&r.name)||e||"辽宁",t.index$1.setStorageSync("hm_province_name",this.provinceName),this.currentCityId=0,this.currentCityName="",this.currentDistrictId=0,this.currentDistrictName="",this.districts=[]},async loadCities(){if(!this.provinceId)return this.cities=[],!1;let t;try{t=await i.areaApi.getChildren({pid:this.provinceId})}catch(r){return!1}if(!t||0!==t.code)return!1;const e=t.data&&t.data.items||[];return this.cities=Array.isArray(e)?e:[],!0},async loadDistricts(t){const e=Number(t)||0;if(!e)return this.districts=[],!1;let r;try{r=await i.areaApi.getChildren({pid:e})}catch(s){return!1}if(!r||0!==r.code)return!1;const a=r.data&&r.data.items||[];return this.districts=Array.isArray(a)?a:[],!0},async loadFilterOptions(t){const i=(this.filterOptionsReqId||0)+1;this.filterOptionsReqId=i,this.filterOptionsLoading=!0;const r=String(t&&t.category||(this.filterOpen?this.draft.category:this.filters.category)||"all").trim(),a={province:this.provinceName||"辽宁",city:this.currentCityName||"",district:this.currentDistrictName||"",category:r};let s;try{s=await e.propertyApi.getFilterOptions(a)}catch(n){return i===this.filterOptionsReqId&&(this.filterOptionsLoading=!1),!1}if(i===this.filterOptionsReqId&&(this.filterOptionsLoading=!1),!s||0!==s.code)return!1;if(i!==this.filterOptionsReqId)return!1;const o=s.data||{};return this.filterOptions={property_types:Array.isArray(o.property_types)?o.property_types:[],decoration_types:Array.isArray(o.decoration_types)?o.decoration_types:[],orientations:Array.isArray(o.orientations)?o.orientations:[],tags:Array.isArray(o.tags)?o.tags:[],stats:o.stats||{}},!0},onDraftCategoryChange(t){this.draft.category=t,this.loadFilterOptions({category:t})},toggleTag(i){const e=String(i||"").trim();if(!e)return;const r=Array.isArray(this.draft.more)?this.draft.more:[],a=r.indexOf(e);if(a>=0)return r.splice(a,1),void(this.draft.more=r);r.length>=6?t.index$1.showToast({title:"最多选择6个标签",icon:"none"}):(r.push(e),this.draft.more=r)},isNavActive(t){return!!t&&(""===t.key&&!this.currentCityId||(!("all_city"!==t.key||!this.currentCityId||this.currentDistrictId)||(t.key&&String(t.key).startsWith("city:")?!!this.currentCityId&&Number(t.id)===Number(this.currentCityId):!(!t.key||!String(t.key).startsWith("district:"))&&(!!this.currentCityId&&Number(t.id)===Number(this.currentDistrictId)))))},async onNavTab(t){if(!t)return;const i=String(t.key||"");return""===i||"back"===i?(this.currentCityId=0,this.currentCityName="",this.currentDistrictId=0,this.currentDistrictName="",this.districts=[],this.loadFilterOptions({category:this.filters.category}),void this.fetchList(!0)):"all_city"===i?(this.currentDistrictId=0,this.currentDistrictName="",this.loadFilterOptions({category:this.filters.category}),void this.fetchList(!0)):i.startsWith("city:")?(this.currentCityId=Number(t.id)||0,this.currentCityName=String(t.name||"").trim(),this.currentDistrictId=0,this.currentDistrictName="",await this.loadDistricts(this.currentCityId),this.loadFilterOptions({category:this.filters.category}),void this.fetchList(!0)):i.startsWith("district:")?(this.currentDistrictId=Number(t.id)||0,this.currentDistrictName=String(t.name||"").trim(),this.loadFilterOptions({category:this.filters.category}),void this.fetchList(!0)):void 0},handlePromote(i){const e=i&&i.title||"房源";t.index$1.showActionSheet({itemList:["生成获客海报","复制推广文案","模拟分享（占位）"],success:r=>{if(0!==r.tapIndex)if(1!==r.tapIndex)2===r.tapIndex&&t.index$1.showToast({title:"分享功能待接入",icon:"none"});else{const r=i&&(i.id||i.ID),a=r?`/pages/property_detail/property_detail?id=${encodeURIComponent(r)}`:"/pages/property_detail/property_detail",s=`【优质房源推荐】${e}\n点击查看详情：${a}`;t.index$1.setClipboardData({data:s,success:()=>{t.index$1.showToast({title:"已复制推广文案",icon:"none"})}})}else t.index$1.navigateTo({url:`/pages/marketing_posters/marketing_posters?title=${encodeURIComponent(e)}`})}})},async fetchList(i){if(this.loading)return!1;this.loading=!0,i&&(this.pagination.page=1,this.pagination.total=0,this.finished=!1,this.propertyList=[]);const r={page:this.pagination.page,pageSize:this.pagination.pageSize,province:this.provinceName||"辽宁",keyword:this.keyword||"",category:this.filters.category||"all",city:this.currentCityName||"",district:this.currentDistrictName||"",rooms:this.filters.rooms||"",sale_status:this.filters.sale_status||"",sort:this.filters.sort||"",hot_status:this.filters.hot_status,property_type:this.filters.property_type||"",decoration_type:this.filters.decoration_type||"",orientation:this.filters.orientation||"",build_year_min:this.filters.build_year_min||"",build_year_max:this.filters.build_year_max||"",price_min:this.filters.price_min||"",price_max:this.filters.price_max||"",area_min:this.filters.area_min||"",area_max:this.filters.area_max||"",filter:this.filters.smartLock?"smart_lock":"",more:Array.isArray(this.filters.more)?this.filters.more.join(","):""};let a;try{a=await e.propertyApi.getList(r)}catch(l){return t.index$1.getStorageSync("token")||t.index$1.reLaunch({url:"/pages/login/login"}),this.loading=!1,t.index$1.stopPullDownRefresh(),!1}if(this.loading=!1,t.index$1.stopPullDownRefresh(),!a||0!==a.code)return!1;const s=a.data||{},o=Array.isArray(s.items)?s.items:[],n=Number(s.total||0);return this.pagination.total=n,this.propertyList=i?o:(Array.isArray(this.propertyList)?this.propertyList:[]).concat(o),0===o.length?(this.finished=!0,!0):((n>0&&this.propertyList.length>=n||o.length<this.pagination.pageSize)&&(this.finished=!0),!0)},async loadMore(){if(this.loading||this.finished)return;const t=this.pagination.page;this.pagination.page=t+1;await this.fetchList(!1)||(this.pagination.page=t)},onSearchConfirm(){this.fetchList(!0)},openFilter(){this.filterOpen=!0,this.draft={category:this.filters.category,rooms:this.filters.rooms,smartLock:!!this.filters.smartLock,sale_status:this.filters.sale_status,sort:this.filters.sort,hot_status:this.filters.hot_status,property_type:this.filters.property_type,decoration_type:this.filters.decoration_type,orientation:this.filters.orientation,build_year_min:this.filters.build_year_min,build_year_max:this.filters.build_year_max,price_min:this.filters.price_min,price_max:this.filters.price_max,area_min:this.filters.area_min,area_max:this.filters.area_max,more:Array.isArray(this.filters.more)?[...this.filters.more]:[]},this.loadFilterOptions({category:this.draft.category})},closeFilter(){this.filterOpen=!1},resetFilter(){this.draft={category:"all",rooms:"",smartLock:!1,sale_status:"",sort:"",hot_status:"",property_type:"",decoration_type:"",orientation:"",build_year_min:"",build_year_max:"",price_min:"",price_max:"",area_min:"",area_max:"",more:[]},this.loadFilterOptions({category:this.draft.category})},applyFilter(){this.filters={category:this.draft.category,rooms:this.draft.rooms,smartLock:!!this.draft.smartLock,sale_status:this.draft.sale_status,sort:this.draft.sort,hot_status:this.draft.hot_status,property_type:this.draft.property_type,decoration_type:this.draft.decoration_type,orientation:this.draft.orientation,build_year_min:this.draft.build_year_min,build_year_max:this.draft.build_year_max,price_min:this.draft.price_min,price_max:this.draft.price_max,area_min:this.draft.area_min,area_max:this.draft.area_max,more:Array.isArray(this.draft.more)?[...this.draft.more]:[]},this.closeFilter(),this.loadFilterOptions({category:this.filters.category}),this.fetchList(!0)},goToDetail(i){const e=i&&(i.id||i.ID);e?t.index$1.navigateTo({url:`/pages/property_detail/property_detail?id=${encodeURIComponent(e)}`}):t.index$1.showToast({title:"房源ID缺失",icon:"none"})},ensureTags:t=>t?Array.isArray(t)?t.map((t=>t?"string"==typeof t?t.trim():"object"==typeof t?String(t.name||t.label||"").trim():String(t).trim():"")).filter(Boolean):"string"==typeof t?t.split(",").map((t=>t.trim())).filter(Boolean):[]:[],tagColorClass(t){const i=String(t||"").trim();return i?i.includes("地铁")||i.includes("交通")?"green":i.includes("学区")?"indigo":i.includes("降价")||i.includes("急售")?"orange":i.includes("智能")||i.includes("门锁")?"blue":i.includes("新")||i.includes("刚需")?"purple":"grey":"grey"},isSoldOrOff:t=>"sold"===t||"off_market"===t,getLayoutText(t){const i=Number(t&&t.rooms)||0,e=Number(t&&t.halls)||0,r=Number(t&&t.bathrooms)||0;if(!i&&!e&&!r)return"-";let a="";return i&&(a+=`${i}室`),e&&(a+=`${e}厅`),r&&(a+=`${r}卫`),a||"-"},extractDistrictFromAddress(t){const i=String(t||"").trim();if(!i)return"";const e=i.match(/(?:[^省]+省)?([^市]+市)([^区县]+(?:区|县|旗))/);if(e)return`${e[1]}${e[2]}`;const r=i.match(/([^市]+市)(.+?(?:区|县|旗))/);return r?`${r[1]}${r[2]}`:""},getDistrictText(t){const i=String(t&&t.address||"").trim();if(!i)return"-";const e=this.extractDistrictFromAddress(i);return e||(i.length>20?`${i.slice(0,20)}…`:i)},getUnitPriceText(t){const i=Number(t&&t.price),e=Number(t&&t.area);if(!i||!e)return"";let r=i;"万"===(t&&t.price_unit||"")&&(r=1e4*i);const a=r/e;return a&&isFinite(a)?`${Math.round(a).toLocaleString()}元/㎡`:""},getCommissionText(t){const i=String(t&&t.commission_rate||"").trim(),e=String(t&&t.commission_reward||"").trim(),r=!!i&&"0"!==i&&"0.0"!==i&&"0.00"!==i,a=!!e&&"0"!==e&&"0.0"!==e&&"0.00"!==e;return r&&a?`佣金${i}% 成交奖励¥${e}`:r?`佣金${i}%`:a?`成交奖励¥${e}`:"佣金待定"}}};if(!Array){(t.resolveComponent("TopHeader")+t.resolveComponent("BottomTabBar"))()}const a=t._export_sfc(r,[["render",function(i,e,r,a,s,o){return t.e({a:t.p({title:"房源"}),b:o.provincePickerLabels.length>0},o.provincePickerLabels.length>0?{c:t.t(s.provinceName),d:o.provincePickerLabels,e:o.provincePickerIndex,f:t.o(((...t)=>o.onProvincePickerChange&&o.onProvincePickerChange(...t)))}:{g:t.t(s.provinceName),h:t.o(((...t)=>o.reloadProvinces&&o.reloadProvinces(...t)))},{i:t.o([t=>s.keyword=t.detail.value,(...t)=>o.onKeywordInput&&o.onKeywordInput(...t)]),j:t.o(((...t)=>o.onSearchConfirm&&o.onSearchConfirm(...t))),k:s.keyword,l:o.hasActiveFilters},(o.hasActiveFilters,{}),{m:o.hasActiveFilters?1:"",n:t.o(((...t)=>o.openFilter&&o.openFilter(...t))),o:t.f(o.navTabs,((i,e,r)=>({a:t.t(i.label),b:i.key||e,c:o.isNavActive(i)?1:"",d:t.o((t=>o.onNavTab(i)),i.key||e)}))),p:t.f(o.displayList,((i,e,r)=>t.e({a:i.image,b:1===Number(i.has_smart_lock)},(Number(i.has_smart_lock),{}),{c:o.isSoldOrOff(i.sale_status)},o.isSoldOrOff(i.sale_status)?{d:t.t(i.sale_status_label||"")}:{},{e:o.isSoldOrOff(i.sale_status)?1:"",f:t.t(i.title),g:t.t(o.getLayoutText(i)),h:t.t(i.area||"-"),i:t.t(i.orientation||"-"),j:t.t(o.getDistrictText(i)),k:t.f(o.ensureTags(i.tags).slice(0,4),((i,e,r)=>({a:t.t(i),b:e,c:t.n(o.tagColorClass(i))}))),l:t.t(i.price),m:t.t(i.price_unit||""),n:t.t(o.getUnitPriceText(i)),o:t.t(i.view_count||0),p:t.t(i.follow_count||0),q:t.t(o.getCommissionText(i)),r:"off_market"!==i.sale_status},"off_market"!==i.sale_status?{s:t.o((t=>o.handlePromote(i)),i.id||e)}:{},{t:t.n(o.isSoldOrOff(i.sale_status)?"grey-footer":"orange-footer"),v:i.id||e,w:"off_market"===i.sale_status?1:"",x:t.o((t=>o.goToDetail(i)),i.id||e)}))),q:!s.loading&&0===o.displayList.length},(s.loading||o.displayList.length,{}),{r:s.loading},(s.loading||s.finished&&o.displayList.length,{}),{s:s.finished&&o.displayList.length>0,t:t.o(((...t)=>o.loadMore&&o.loadMore(...t))),v:t.p({active:"property"}),w:s.filterOpen},s.filterOpen?t.e({x:t.o(((...t)=>o.resetFilter&&o.resetFilter(...t))),y:t.f(s.categoryOptions,((i,e,r)=>({a:t.t(i.label),b:"cat-"+e,c:s.draft.category===i.value?1:"",d:t.o((t=>o.onDraftCategoryChange(i.value)),"cat-"+e)}))),z:t.f(s.roomOptions,((i,e,r)=>({a:t.t(i.label),b:"room-"+e,c:s.draft.rooms===i.value?1:"",d:t.o((t=>s.draft.rooms=i.value),"room-"+e)}))),A:s.draft.smartLock?1:"",B:t.o((t=>s.draft.smartLock=!s.draft.smartLock)),C:t.f(s.statusOptions,((i,e,r)=>({a:t.t(i.label),b:"status-"+e,c:s.draft.sale_status===i.value?1:"",d:t.o((t=>s.draft.sale_status=i.value),"status-"+e)}))),D:t.f(s.hotStatusOptions,((i,e,r)=>({a:t.t(i.label),b:"hot-"+e,c:s.draft.hot_status===i.value?1:"",d:t.o((t=>s.draft.hot_status=i.value),"hot-"+e)}))),E:s.filterOptionsLoading},s.filterOptionsLoading?{}:{F:t.f(o.propertyTypeOptions,((i,e,r)=>({a:t.t(i||"不限"),b:"ptype-"+e,c:s.draft.property_type===i?1:"",d:t.o((t=>s.draft.property_type=i),"ptype-"+e)})))},{G:s.filterOptionsLoading},s.filterOptionsLoading?{}:{H:t.f(o.decorationTypeOptions,((i,e,r)=>({a:t.t(i||"不限"),b:"dtype-"+e,c:s.draft.decoration_type===i?1:"",d:t.o((t=>s.draft.decoration_type=i),"dtype-"+e)})))},{I:s.filterOptionsLoading},s.filterOptionsLoading?{}:{J:t.f(o.orientationOptions,((i,e,r)=>({a:t.t(i||"不限"),b:"ori-"+e,c:s.draft.orientation===i?1:"",d:t.o((t=>s.draft.orientation=i),"ori-"+e)})))},{K:s.filterOptionsLoading},s.filterOptionsLoading?{}:t.e({L:t.f(o.tagOptions,((i,e,r)=>({a:t.t(i),b:"tag-"+e,c:s.draft.more.includes(i)?1:"",d:t.o((t=>o.toggleTag(i)),"tag-"+e)}))),M:0===o.tagOptions.length},(o.tagOptions.length,{})),{N:s.draft.more.length>0},s.draft.more.length>0?{O:t.t(s.draft.more.join("、"))}:{},{P:o.buildYearStatText},o.buildYearStatText?{Q:t.t(o.buildYearStatText)}:{},{R:t.f(o.buildYearRanges,((i,e,r)=>({a:t.t(i.label),b:"year-"+e,c:o.isRangeActive("year",i)?1:"",d:t.o((t=>o.selectRange("year",i)),"year-"+e)}))),S:o.priceStatText},o.priceStatText?{T:t.t(o.priceStatText)}:{},{U:t.f(o.priceRanges,((i,e,r)=>({a:t.t(i.label),b:"price-"+e,c:o.isRangeActive("price",i)?1:"",d:t.o((t=>o.selectRange("price",i)),"price-"+e)}))),V:o.areaStatText},o.areaStatText?{W:t.t(o.areaStatText)}:{},{X:t.f(o.areaRanges,((i,e,r)=>({a:t.t(i.label),b:"area-"+e,c:o.isRangeActive("area",i)?1:"",d:t.o((t=>o.selectRange("area",i)),"area-"+e)}))),Y:t.f(s.sortOptions,((i,e,r)=>t.e({a:t.t(i.label),b:s.draft.sort===i.value},(s.draft.sort,i.value,{}),{c:"sort-"+e,d:s.draft.sort===i.value?1:"",e:t.o((t=>s.draft.sort=i.value),"sort-"+e)}))),Z:t.o(((...t)=>o.closeFilter&&o.closeFilter(...t))),aa:t.o(((...t)=>o.applyFilter&&o.applyFilter(...t))),ab:t.o((()=>{})),ac:t.o(((...t)=>o.closeFilter&&o.closeFilter(...t)))}):{})}]]);wx.createPage(a);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/property_list/property_list.js.map
