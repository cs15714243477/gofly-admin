"use strict";const e=require("../../common/vendor.js"),t=require("../../api/user.js");const n={components:{TopHeader:()=>"../../components/TopHeader.js"},data:()=>({loading:!0,agent:{},styleIndex:0,styles:[{bg:"linear-gradient(135deg, #2d9cf0, #1e40af)",decor2:"rgba(249, 115, 22, 0.2)",badge:"PRO",badgeBg:"#f97316"},{bg:"linear-gradient(135deg, #06b6d4, #2563eb)",decor2:"rgba(255, 255, 255, 0.12)",badge:"TOP",badgeBg:"#22c55e"},{bg:"linear-gradient(135deg, #111827, #334155)",decor2:"rgba(45, 156, 240, 0.18)",badge:"VIP",badgeBg:"#2d9cf0"}]}),computed:{currentStyle(){return this.styles[this.styleIndex]||this.styles[0]}},onLoad(e){const t=e&&e.scene?decodeURIComponent(e.scene):"",n=Number(e.agent_id||0),a=function(e=""){const t=String(e||"").trim();if(t.includes("=")&&t.includes("&")){const e={};return t.split("&").forEach((t=>{const[n,a]=t.split("=");n&&(e[n]=a)})),{agentId:Number(e.a||e.agent_id||0),style:Number(e.s||0)}}const n=t.match(/a(\d+)_s(\d+)/);if(n)return{agentId:Number(n[1]||0),style:Number(n[2]||0)};const a=t.match(/a(\d+)/);return a?{agentId:Number(a[1]||0),style:0}:{agentId:0,style:0}}(t);this.styleIndex=Math.max(0,Number(e.style||a.style||0));const r=n||a.agentId;this.fetchAgent(r)},methods:{safeImage:e=>String(e||"").trim()||"/static/images/img_155372af18.png",async fetchAgent(e){this.loading=!0;try{if(!e)return void(this.agent={});const n=await t.userApi.getAgentCard({agent_id:e},!0);if(!n||0!==n.code)return void(this.agent={});this.agent=n.data||{}}finally{this.loading=!1}},callAgent(){const t=String(this.agent&&this.agent.mobile||"").trim();t&&e.index$1.makePhoneCall({phoneNumber:t})},copyMobile(){const t=String(this.agent&&this.agent.mobile||"").trim();t&&e.index$1.setClipboardData({data:t,success:()=>e.index$1.showToast({title:"已复制",icon:"none"})})}}};if(!Array){e.resolveComponent("TopHeader")()}const a=e._export_sfc(n,[["render",function(t,n,a,r,i,s){return e.e({a:e.p({title:"经纪人名片"}),b:s.currentStyle.decor2,c:e.t(i.agent.store_name||"未绑定门店"),d:e.t(s.currentStyle.badge),e:s.currentStyle.badgeBg,f:s.safeImage(i.agent.avatar),g:e.t(i.agent.name||"-"),h:e.t(i.agent.title||"置业顾问"),i:i.agent.store_address},i.agent.store_address?{j:e.t(i.agent.store_address)}:{},{k:i.agent.introduction},i.agent.introduction?{l:e.t(i.agent.introduction)}:{},{m:e.o(((...e)=>s.callAgent&&s.callAgent(...e))),n:!i.agent.mobile,o:e.o(((...e)=>s.copyMobile&&s.copyMobile(...e))),p:!i.agent.mobile,q:s.currentStyle.bg,r:i.loading},(i.loading||i.loading||i.agent.id,{}),{s:!i.loading&&!i.agent.id})}]]);wx.createPage(a);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/agent_public_card/agent_public_card.js.map
