"use strict";const e=require("../../common/vendor.js"),t=require("../../api/user.js"),a=require("../../store/index.js"),i=require("../../utils/config/index.js");function s(t=""){const a=(e=>{const t=[];for(let a=0;a<e.length;a++){let i=e.charCodeAt(a);i<128?t.push(i):i<2048?(t.push(192|i>>6),t.push(128|63&i)):(t.push(224|i>>12),t.push(128|i>>6&63),t.push(128|63&i))}return new Uint8Array(t)})(t).buffer;return void 0!==e.wx$1&&e.wx$1.arrayBufferToBase64?e.wx$1.arrayBufferToBase64(a):void 0!==e.index$1&&e.index$1.arrayBufferToBase64?e.index$1.arrayBufferToBase64(a):""}const o={components:{BottomTabBar:()=>"../../components/BottomTabBar.js",TopHeader:()=>"../../components/TopHeader.js"},onLoad(e){const t=e&&(e.tab||e.currentTab);"1"!==t&&1!==t&&"edit"!==t||(this.currentTab=1),this.initCanvasSize(),this.loadProfile().catch((()=>{}))},onShow(){this.loadProfile(!1).catch((()=>{}))},onShareAppMessage(){const e=this.profile&&this.profile.name||"我",t=Number(this.loadedUserId||0),a=Number(this.currentPreview||0);return{title:`${e}的名片`,path:`/pages/agent_public_card/agent_public_card?agent_id=${encodeURIComponent(t)}&style=${encodeURIComponent(a)}`}},data:()=>({currentTab:0,currentPreview:0,qrCodeUrl:"",styleChangeTimer:null,saving:!1,savingImage:!1,tagPopupVisible:!1,recommendPopupVisible:!1,newTagText:"",loadedUserId:0,storeOptions:[],recommendMaxCount:20,recommendCandidates:[],selectedRecommendIds:[],selectedRecommendProperties:[],pendingRecommendIds:[],savingRecommend:!1,canvasWidth:900,canvasHeight:1320,canvasScale:2,profile:{avatar:"",name:"",phone:"",wechat:"",role:"",store_id:0,store:"",store_address:"",email:"",intro:"",tags:[]},suggestTags:["学区房专家","二手房买卖","新房咨询","高端别墅","婚房首选","投资置业"],cardStyles:[{bg:"linear-gradient(135deg, #2d9cf0, #1e40af)",decor2:"rgba(249, 115, 22, 0.2)",badge:"PRO",badgeBg:"#f97316"},{bg:"linear-gradient(135deg, #06b6d4, #2563eb)",decor2:"rgba(255, 255, 255, 0.12)",badge:"TOP",badgeBg:"#22c55e"},{bg:"linear-gradient(135deg, #111827, #334155)",decor2:"rgba(45, 156, 240, 0.18)",badge:"VIP",badgeBg:"#2d9cf0"}]}),computed:{previewCards(){const e=this.profile||{},t=Array.isArray(e.tags)?e.tags.slice(0,3):[];return(this.cardStyles||[]).map((a=>({...a,name:e.name,role:e.role,phone:e.phone,wechat:e.wechat,store:e.store,avatar:e.avatar,tags:t})))}},watch:{currentTab(e){1===Number(e)&&(this.loadStores().catch((()=>{})),this.loadRecommendConfig(!1).catch((()=>{})))}},methods:{initCanvasSize(){try{const t=e.index$1.getSystemInfoSync?e.index$1.getSystemInfoSync():{},a=Number(t.pixelRatio||2);this.canvasWidth=900,this.canvasHeight=1320;const i=2e3;let s=Math.min(3,a||2);const o=Math.floor(i/this.canvasWidth),r=Math.floor(i/this.canvasHeight);s=Math.min(s,Math.max(1,o),Math.max(1,r)),this.canvasScale=Math.max(1,s)}catch(t){}},onPreviewChange(e){this.currentPreview=e.detail.current,this.persistDefaultStyle(),this.scheduleWxaCodeRefresh()},safeImage(e){const t=String(e||"").trim();return t?0===t.indexOf("/static/images/")?"":t:""},extrasStorageKey:e=>`wxapp_my_business_card_extras_${e||0}`,loadExtras(t){const a=this.extrasStorageKey(t),i=e.index$1.getStorageSync(a);if(!i)return{};try{return"string"==typeof i?JSON.parse(i):i||{}}catch(s){return{}}},saveExtras(t){const a=this.extrasStorageKey(t),i={wechat:String(this.profile.wechat||"").trim(),tags:Array.isArray(this.profile.tags)?this.profile.tags:[]};try{e.index$1.setStorageSync(a,JSON.stringify(i))}catch(s){e.index$1.setStorageSync(a,i)}},async loadProfile(i=!0){if(!e.index$1.getStorageSync("token")&&!a.$store("user").isLogin)return;const s=await t.userApi.getCardProfile(!!i);if(!s||0!==s.code)return;const o=s.data||{},r=Number(o.id||o.ID||0);this.loadedUserId=r,this.profile.avatar=o.avatar||"",this.profile.name=o.name||o.nickname||"",this.profile.phone=o.mobile||"",this.profile.role=o.title||o.role||"",this.profile.store_id=Number(o.store_id||0),this.profile.store=o.store_name||"",this.profile.store_address=o.store_address||"",this.profile.email=o.email||"",this.profile.intro=o.introduction||"";const n=Number(e.index$1.getStorageSync(this.styleStorageKey(r))||0);!Number.isNaN(n)&&n>=0&&(this.currentPreview=n);const d=this.loadExtras(r);d&&("string"==typeof d.wechat&&(this.profile.wechat=d.wechat),Array.isArray(d.tags)&&(this.profile.tags=d.tags)),this.loadWxaCode(!1).catch((()=>{})),this.loadRecommendConfig(!1).catch((()=>{}))},styleStorageKey:e=>`wxapp_my_business_card_style_${e||0}`,persistDefaultStyle(){this.loadedUserId&&e.index$1.setStorageSync(this.styleStorageKey(this.loadedUserId),Number(this.currentPreview||0))},scheduleWxaCodeRefresh(){this.styleChangeTimer&&(clearTimeout(this.styleChangeTimer),this.styleChangeTimer=null),this.styleChangeTimer=setTimeout((()=>{this.loadWxaCode(!1).catch((()=>{}))}),220)},async loadWxaCode(i=!0){if(!e.index$1.getStorageSync("token")&&!a.$store("user").isLogin)return;const s={style:Number(this.currentPreview||0)};(!("undefined"==typeof process||!process.env)||void 0!==e.wx$1&&e.wx$1.getAccountInfoSync&&["develop","trial"].includes((e.wx$1.getAccountInfoSync().miniProgram||{}).envVersion))&&(s.check_path=!1);const o=await t.userApi.getAgentWxaCode(s,!!i);o&&0===o.code&&(this.qrCodeUrl=o.data&&o.data.url||"")},previewQrCode(){if(!this.qrCodeUrl)return e.index$1.showToast({title:"小程序码生成中...",icon:"none"}),void this.loadWxaCode(!0).catch((()=>{}));e.index$1.previewImage({urls:[this.qrCodeUrl]})},async loadStores(){if(!e.index$1.getStorageSync("token")&&!a.$store("user").isLogin)return;const i=await t.userApi.getStores(!1);if(!i||0!==i.code)return;const s=Array.isArray(i.data)?i.data:[];this.storeOptions=s},onStorePickerChange(t){const a=Number(t&&t.detail?t.detail.value:-1);if(!Array.isArray(this.storeOptions)||0===this.storeOptions.length)return void e.index$1.showToast({title:"暂无可选门店",icon:"none"});if(a<0||a>=this.storeOptions.length)return;const i=this.storeOptions[a]||{};this.profile.store_id=Number(i.id||0),this.profile.store=i.name||"",this.profile.store_address=i.address||""},showUneditable(t){e.index$1.showToast({title:t||"不支持修改",icon:"none"})},openAddTag(){this.newTagText="",this.tagPopupVisible=!0},closeAddTag(){this.tagPopupVisible=!1,this.newTagText=""},confirmAddTag(){const t=String(this.newTagText||"").trim();t?(this.addTag(t),this.closeAddTag()):e.index$1.showToast({title:"请输入标签内容",icon:"none"})},addTag(t){const a=String(t||"").trim();a&&(Array.isArray(this.profile.tags)||(this.profile.tags=[]),this.profile.tags.includes(a)||(this.profile.tags.length>=6?e.index$1.showToast({title:"最多添加6个标签",icon:"none"}):this.profile.tags=this.profile.tags.concat([a])))},removeTag(e){Array.isArray(this.profile.tags)&&(this.profile.tags=this.profile.tags.filter(((t,a)=>a!==e)))},formatRecommendMeta(e){const t=e&&e.area?`${e.area}㎡`:"",a=Number(e&&e.rooms)||0,i=Number(e&&e.halls)||0,s=Number(e&&e.bathrooms)||0;let o="";(a||i||s)&&(o=`${a}室${i}厅${s}卫`);return[String(e&&e.community_name||"").trim(),o,t].filter(Boolean).join(" · ")||"基础信息"},async loadRecommendConfig(i=!1){if(!e.index$1.getStorageSync("token")&&!a.$store("user").isLogin)return;const s=await t.userApi.getAgentCardRecommendConfig(!!i);if(!s||0!==s.code)return;const o=s.data||{},r=Number(o.max_count||20)||20;this.recommendMaxCount=r,this.selectedRecommendIds=Array.isArray(o.selected_ids)?o.selected_ids.map((e=>Number(e)||0)).filter(Boolean):[],this.selectedRecommendProperties=Array.isArray(o.selected_properties)?o.selected_properties:[],this.recommendCandidates=Array.isArray(o.candidates)?o.candidates:[]},openRecommendPopup(){this.pendingRecommendIds=Array.isArray(this.selectedRecommendIds)?[...this.selectedRecommendIds]:[],this.recommendPopupVisible=!0,Array.isArray(this.recommendCandidates)&&0!==this.recommendCandidates.length||this.loadRecommendConfig(!0).catch((()=>{}))},closeRecommendPopup(){this.recommendPopupVisible=!1,this.pendingRecommendIds=[]},isRecommendSelected(e){const t=Number(e)||0;return!!t&&(Array.isArray(this.pendingRecommendIds)&&this.pendingRecommendIds.includes(t))},toggleRecommendItem(t){const a=Number(t&&t.id)||0;if(!a)return;Array.isArray(this.pendingRecommendIds)||(this.pendingRecommendIds=[]);this.pendingRecommendIds.includes(a)?this.pendingRecommendIds=this.pendingRecommendIds.filter((e=>e!==a)):this.pendingRecommendIds.length>=this.recommendMaxCount?e.index$1.showToast({title:`最多选择${this.recommendMaxCount}套`,icon:"none"}):this.pendingRecommendIds=this.pendingRecommendIds.concat([a])},async saveRecommendConfig(){if(!this.savingRecommend){this.savingRecommend=!0;try{const a=Array.isArray(this.pendingRecommendIds)?this.pendingRecommendIds:[],i=await t.userApi.saveAgentCardRecommendConfig({property_ids:a},!0);if(!i||0!==i.code)return;this.selectedRecommendIds=[...a];const s={};(this.recommendCandidates||[]).forEach((e=>{const t=Number(e&&e.id)||0;t&&(s[t]=e)})),this.selectedRecommendProperties=a.map((e=>s[e])).filter(Boolean),this.recommendPopupVisible=!1,this.pendingRecommendIds=[],e.index$1.showToast({title:"推荐房源已保存",icon:"none"})}finally{this.savingRecommend=!1}}},async saveProfile(){if(this.saving)return;const i=String(this.profile.name||"").trim();if(i){this.saving=!0;try{const s={avatar:this.profile.avatar,name:i,title:String(this.profile.role||"").trim(),introduction:String(this.profile.intro||"").trim(),store_id:Number(this.profile.store_id||0)},o=await t.userApi.updateCardProfile(s,!0);if(!o||0!==o.code)return;this.loadedUserId&&this.saveExtras(this.loadedUserId);const r=a.$store("user");r.setUserInfo({...r.userInfo||{},avatar:this.profile.avatar,name:this.profile.name}),e.index$1.showToast({title:"保存成功",icon:"none"})}finally{this.saving=!1}}else e.index$1.showToast({title:"请填写姓名",icon:"none"})},async changeAvatar(){this.saving||e.index$1.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:async e=>{const t=e&&e.tempFilePaths&&e.tempFilePaths[0];t&&await this.uploadAvatar(t)}})},uploadAvatar(t){return new Promise(((a,o)=>{const r=e.index$1.getStorageSync("token"),n=Math.floor(Date.now()/1e3),d={Accept:"text/json",Businessid:"1",apiverify:s(e.md5("gofly@888"+n)+"#"+n)};r&&(d.Authorization=`${r}`),e.index$1.uploadFile({url:`${i.baseUrl}/common/upload/upFile`,filePath:t,name:"file",formData:{filetype:"image"},header:d,success:t=>{try{const i=t&&t.data?t.data:"{}",s="string"==typeof i?JSON.parse(i):i;if(!s||0!==s.code)return e.index$1.showToast({title:s&&s.message||"上传失败",icon:"none"}),void o(s);const r=s&&s.data?s.data.url:"";this.profile.avatar=r||"",e.index$1.showToast({title:"头像已更新",icon:"none"}),a(s)}catch(i){e.index$1.showToast({title:"解析上传结果失败",icon:"none"}),o(i)}},fail:t=>{e.index$1.showToast({title:"上传失败",icon:"none"}),o(t)}})}))},saveCardImage(){this.saveCardToAlbum().catch((()=>{}))},copyCardLink(){this.copyUrlLink().catch((()=>{}))},async copyUrlLink(){const a=Number(this.currentPreview||0);let i="";if(void 0!==e.wx$1&&e.wx$1.getAccountInfoSync){const t=(e.wx$1.getAccountInfoSync().miniProgram||{}).envVersion;"develop"!==t&&"trial"!==t&&"release"!==t||(i=t)}const s=await t.userApi.getAgentUrlLink({style:a,env_version:i},!0),o=s&&0===s.code&&s.data?s.data.url_link:"";o?e.index$1.setClipboardData({data:o,success:()=>e.index$1.showToast({title:"已复制链接",icon:"none"})}):e.index$1.showToast({title:"获取链接失败",icon:"none"})},showMoreActions(){e.index$1.showActionSheet({itemList:["刷新资料","清空本地名片扩展信息"],success:async t=>{if(0===t.tapIndex&&await this.loadProfile(!0).catch((()=>{})),1===t.tapIndex){if(!this.loadedUserId)return;e.index$1.removeStorageSync(this.extrasStorageKey(this.loadedUserId)),this.profile.wechat="",this.profile.tags=[],e.index$1.showToast({title:"已清空",icon:"none"})}}})},getGradientColors(e){const t=String(e||"").match(/#(?:[0-9a-fA-F]{3}){1,2}/g)||[];return t.length>=2?[t[0],t[1]]:["#2d9cf0","#1e40af"]},drawRoundRectPath(e,t,a,i,s,o){const r=Math.max(0,Math.min(o,i/2,s/2));e.beginPath(),e.moveTo(t+r,a),e.arcTo(t+i,a,t+i,a+s,r),e.arcTo(t+i,a+s,t,a+s,r),e.arcTo(t,a+s,t,a,r),e.arcTo(t,a,t+i,a,r),e.closePath()},getImageInfo:t=>new Promise(((a,i)=>{if(!t)return i(new Error("empty src"));e.index$1.getImageInfo({src:t,success:e=>a(e),fail:e=>i(e)})})),async saveCardToAlbum(){if(!this.savingImage){this.savingImage=!0;try{if(this.qrCodeUrl||await this.loadWxaCode(!0).catch((()=>{})),!this.qrCodeUrl)return void e.index$1.showToast({title:"小程序码生成失败",icon:"none"});const t=this.previewCards[this.currentPreview]||this.previewCards[0],a=this.canvasWidth*this.canvasScale,i=this.canvasHeight*this.canvasScale,s=this.canvasScale,o=e=>Number(e)*(a/900),r=e=>Math.round(Number(e)*(a/900)),n=e.index$1.createCanvasContext("cardCanvas",this);n.save(),this.drawRoundRectPath(n,0,0,a,i,o(40)),n.clip();const[d,c]=this.getGradientColors(t.bg),l=n.createLinearGradient(0,0,a,i);l.addColorStop(0,d),l.addColorStop(1,c),n.setFillStyle(l),n.fillRect(0,0,a,i),n.setFillStyle("rgba(255,255,255,0.10)"),n.beginPath(),n.arc(a-o(80),o(80),o(140),0,2*Math.PI),n.fill(),n.setFillStyle(String(t.decor2||"rgba(249,115,22,0.18)")),n.beginPath(),n.arc(o(80),i-o(120),o(180),0,2*Math.PI),n.fill(),n.setFillStyle("rgba(255,255,255,0.22)"),this.drawRoundRectPath(n,o(40),o(40),o(520),o(70),o(16)),n.fill(),n.setFillStyle("#ffffff"),n.setFontSize(r(28)),n.fillText(String(t.store||"未绑定门店"),o(60),o(86)),n.setFillStyle(String(t.badgeBg||"#f97316")),this.drawRoundRectPath(n,a-o(180),o(44),o(140),o(60),o(30)),n.fill(),n.setFillStyle("#ffffff"),n.setFontSize(r(22)),n.fillText(String(t.badge||"PRO"),a-o(140),o(82));const h=this.safeImage(t.avatar),m=o(200),g=(a-m)/2,f=o(170);if(h){const e=await this.getImageInfo(h);n.save(),n.beginPath(),n.arc(a/2,f+m/2,m/2,0,2*Math.PI),n.clip(),n.drawImage(e.path,g,f,m,m),n.restore()}else n.setFillStyle("rgba(255,255,255,0.24)"),n.beginPath(),n.arc(a/2,f+m/2,m/2,0,2*Math.PI),n.fill(),n.setFillStyle("rgba(255,255,255,0.92)"),n.setFontSize(r(72)),n.fillText("人",(a-n.measureText("人").width)/2,f+m/2+r(24));n.setStrokeStyle("rgba(255,255,255,0.28)"),n.setLineWidth(Math.max(2,o(6))),n.beginPath(),n.arc(a/2,f+m/2,m/2,0,2*Math.PI),n.stroke(),n.setFillStyle("#ffffff"),n.setFontSize(r(44));const p=String(t.name||"");n.fillText(p,(a-n.measureText(p).width)/2,o(430)),n.setFontSize(r(28)),n.setFillStyle("rgba(255,255,255,0.85)");const u=String(t.role||"置业顾问");n.fillText(u,(a-n.measureText(u).width)/2,o(475)),n.setFillStyle("rgba(255,255,255,0.12)"),this.drawRoundRectPath(n,o(60),o(520),a-o(120),o(120),o(24)),n.fill(),n.setFillStyle("rgba(255,255,255,0.72)"),n.setFontSize(r(22)),n.fillText("电话",o(90),o(570)),n.setFillStyle("#ffffff"),n.setFontSize(r(30));const y=String(t.phone||"");n.fillText(y,o(90),o(612)),n.setFillStyle("rgba(255,255,255,0.92)"),n.setFontSize(r(26));const v="微信号："+String(t.wechat||"");n.fillText(v,o(70),i-o(230));const x="门店："+String(t.store||"");n.fillText(x,o(70),i-o(190));const b=await this.getImageInfo(this.qrCodeUrl);n.setFillStyle("#ffffff"),this.drawRoundRectPath(n,a-o(260),i-o(300),o(200),o(200),o(16)),n.fill(),n.drawImage(b.path,a-o(250),i-o(290),o(180),o(180)),n.setFillStyle("rgba(255,255,255,0.78)"),n.setFontSize(r(20)),n.fillText("微信识别进入",a-o(250),i-o(80)),n.restore(),await new Promise((e=>n.draw(!1,e)));const w=await new Promise(((t,o)=>{const r=Math.round(a*s),n=Math.round(i*s);e.index$1.canvasToTempFilePath({canvasId:"cardCanvas",x:0,y:0,width:r,height:n,destWidth:r,destHeight:n,fileType:"png",quality:1,success:e=>t(e),fail:e=>o(e)},this)}));await new Promise(((t,a)=>{e.index$1.saveImageToPhotosAlbum({filePath:w.tempFilePath,success:()=>t(!0),fail:e=>a(e)})})),e.index$1.showToast({title:"已保存到相册",icon:"none"})}catch(t){e.index$1.showModal({title:"保存失败",content:"请允许保存到相册权限后重试",confirmText:"去设置",cancelText:"取消",success:t=>{t.confirm&&e.index$1.openSetting({})}})}finally{this.savingImage=!1}}}}};if(!Array){(e.resolveComponent("TopHeader")+e.resolveComponent("BottomTabBar"))()}const r=e._export_sfc(o,[["render",function(t,a,i,s,o,r){return e.e({a:e.p({title:"获客"}),b:0===o.currentTab?1:"",c:e.o((e=>o.currentTab=0)),d:1===o.currentTab?1:"",e:e.o((e=>o.currentTab=1)),f:0===o.currentTab},0===o.currentTab?{g:e.f(r.previewCards,((e,t,a)=>({a:t,b:o.currentPreview===t?1:""}))),h:e.f(r.previewCards,((t,a,i)=>e.e({a:t.decor2,b:e.t(t.store||"未绑定门店"),c:e.t(t.badge),d:t.badgeBg,e:r.safeImage(t.avatar)},r.safeImage(t.avatar)?{f:r.safeImage(t.avatar)}:{},{g:e.t(t.name),h:e.t(t.role),i:e.f(t.tags,((t,a,i)=>({a:e.t(t),b:a}))),j:e.t(t.phone),k:e.t(t.wechat),l:e.t(t.store)},o.qrCodeUrl?{m:o.qrCodeUrl}:{},{n:e.o(((...e)=>r.previewQrCode&&r.previewQrCode(...e)),a),o:t.bg,p:a}))),i:o.qrCodeUrl,j:o.currentPreview,k:e.o(((...e)=>r.onPreviewChange&&r.onPreviewChange(...e)))}:{},{l:1===o.currentTab},1===o.currentTab?e.e({m:r.safeImage(o.profile.avatar)},r.safeImage(o.profile.avatar)?{n:r.safeImage(o.profile.avatar)}:{},{o:e.o(((...e)=>r.changeAvatar&&r.changeAvatar(...e))),p:o.profile.name,q:e.o((e=>o.profile.name=e.detail.value)),r:e.t(o.profile.phone),s:e.o((e=>r.showUneditable("手机号由平台绑定，不支持修改"))),t:o.profile.wechat,v:e.o((e=>o.profile.wechat=e.detail.value)),w:o.profile.role,x:e.o((e=>o.profile.role=e.detail.value)),y:e.t(o.profile.store||"请选择门店"),z:o.storeOptions,A:e.o(((...e)=>r.onStorePickerChange&&r.onStorePickerChange(...e))),B:o.profile.store_address},o.profile.store_address?{C:e.t(o.profile.store_address)}:{},{D:o.profile.intro,E:e.o((e=>o.profile.intro=e.detail.value)),F:e.o(((...e)=>r.openAddTag&&r.openAddTag(...e))),G:e.f(o.profile.tags,((t,a,i)=>({a:e.t(t),b:"active-"+a,c:e.o((e=>r.removeTag(a)),"active-"+a)}))),H:e.f(o.suggestTags,((t,a,i)=>({a:e.t(t),b:"suggest-"+a,c:e.o((e=>r.addTag(t)),"suggest-"+a)}))),I:e.o(((...e)=>r.openRecommendPopup&&r.openRecommendPopup(...e))),J:o.selectedRecommendProperties.length>0},o.selectedRecommendProperties.length>0?{K:e.f(o.selectedRecommendProperties,((t,a,i)=>({a:e.t(t.title||"-"),b:"sel-"+t.id})))}:{},{L:e.t(o.recommendMaxCount)}):{},{M:0===o.currentTab},0===o.currentTab?{N:e.o(((...e)=>r.saveCardImage&&r.saveCardImage(...e))),O:e.o(((...e)=>r.copyCardLink&&r.copyCardLink(...e))),P:e.o(((...e)=>r.showMoreActions&&r.showMoreActions(...e)))}:{},{Q:1===o.currentTab},1===o.currentTab?{R:e.t(o.saving?"保存中...":"保存修改"),S:o.saving,T:e.o(((...e)=>r.saveProfile&&r.saveProfile(...e)))}:{},{U:o.tagPopupVisible},o.tagPopupVisible?{V:o.newTagText,W:e.o((e=>o.newTagText=e.detail.value)),X:e.o(((...e)=>r.closeAddTag&&r.closeAddTag(...e))),Y:e.o(((...e)=>r.confirmAddTag&&r.confirmAddTag(...e))),Z:e.o((()=>{})),aa:e.o(((...e)=>r.closeAddTag&&r.closeAddTag(...e)))}:{},{ab:o.recommendPopupVisible},o.recommendPopupVisible?{ac:e.t(o.recommendMaxCount),ad:e.f(o.recommendCandidates,((t,a,i)=>({a:e.t(t.title||"-"),b:e.t(r.formatRecommendMeta(t)),c:e.t(r.isRecommendSelected(t.id)?"check_circle":"radio_button_unchecked"),d:r.isRecommendSelected(t.id)?1:"",e:"cand-"+t.id,f:e.o((e=>r.toggleRecommendItem(t)),"cand-"+t.id)}))),ae:e.o(((...e)=>r.closeRecommendPopup&&r.closeRecommendPopup(...e))),af:e.t(o.savingRecommend?"保存中...":"保存"),ag:o.savingRecommend,ah:e.o(((...e)=>r.saveRecommendConfig&&r.saveRecommendConfig(...e))),ai:e.o((()=>{})),aj:e.o(((...e)=>r.closeRecommendPopup&&r.closeRecommendPopup(...e)))}:{},{ak:e.p({active:"marketing"}),al:o.canvasWidth+"px",am:o.canvasHeight+"px",an:o.canvasWidth*o.canvasScale,ao:o.canvasHeight*o.canvasScale})}]]);o.__runtimeHooks=2,wx.createPage(r);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/my_business_card/my_business_card.js.map
