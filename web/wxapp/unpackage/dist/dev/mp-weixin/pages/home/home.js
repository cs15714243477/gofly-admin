"use strict";const e=require("../../common/vendor.js"),t={components:{BottomTabBar:()=>"../../components/BottomTabBar.js",TopHeader:()=>"../../components/TopHeader.js"},onLoad(){const t=e.index$1.getStorageSync("hm_province_name");this.provinceName=t||"辽宁",e.index$1.getLocation({type:"wgs84",success:()=>{},fail:()=>{this.provinceName=this.provinceName||"辽宁"}})},data:()=>({provinceName:"辽宁",provinceOptions:["辽宁","北京","上海","广东","浙江","江苏"],locationOpen:!1,locationCities:[{key:"shenyang",label:"沈阳",districts:[{key:"heping",label:"和平区"},{key:"shenhe",label:"沈河区"},{key:"huanggu",label:"皇姑区"},{key:"tiexi",label:"铁西区"}]},{key:"dalian",label:"大连",districts:[{key:"zhongshan",label:"中山区"},{key:"xigang",label:"西岗区"},{key:"shahekou",label:"沙河口区"},{key:"ganjingzi",label:"甘井子区"}]},{key:"anshan",label:"鞍山",districts:[{key:"tiedong",label:"铁东区"},{key:"tiexi",label:"铁西区"},{key:"lixian",label:"立山区"}]}],locDraft:{city:"",district:""},filters:{location:"",filter:"",sort:"",more:[]},panelOpen:!1,panelType:"",panelDraft:{location:"",filter:"",sort:"",more:[]},filterOptions:{filter:[{value:"",label:"筛选"},{value:"smart_lock",label:"智能锁"},{value:"near_subway",label:"近地铁"},{value:"new",label:"新上"},{value:"price_drop",label:"降价"}],sort:[{value:"",label:"排序"},{value:"recommend",label:"推荐优先"},{value:"price_asc",label:"租金从低到高"},{value:"price_desc",label:"租金从高到低"},{value:"latest",label:"最新发布"}],more:[{value:"whole_rent",label:"整租"},{value:"shared",label:"合租"},{value:"elevator",label:"有电梯"},{value:"south",label:"朝南"},{value:"pet",label:"可养宠"}]},bannerImages:["/static/images/img_28f6b412d7.png","/static/images/img_2abd9934e1.png","/static/images/img_48afe8538f.png"],followedProperties:[{name:"阳光花园 · 2室1厅",area:"朝阳区",size:"85",price:"6,500",type:"住宅",priceChange:"降价 ¥200",image:"/static/images/img_48afe8538f.png"},{name:"金域华府 A2",area:"东城区",size:"65",price:"5,800",status:"待看",image:"/static/images/img_cd1f0409ce.png"}],recommendedProperties:[{name:"远洋万和城 · 3室2厅",price:"9,200",region:"海淀区",size:"120",desc:"近公园",status:"急租",tags:["近地铁","新上"],image:"/static/images/img_28f6b412d7.png"},{name:"柳溪公寓 · 开间",price:"4,100",region:"丰台区",size:"45",desc:"西向",tags:["随时入住","免中介费"],image:"/static/images/img_f7b0d6455a.png"}]}),computed:{filterLabelLocation(){if(!this.filters.location)return"市/区";const[e,t]=String(this.filters.location).split("|"),i=this.locationCities.find((t=>t.key===e));if(!i)return"市/区";const l=(i.districts||[]).find((e=>e.key===t));return l?`${i.label} · ${l.label}`:i.label},currentDistricts(){const e=this.locationCities.find((e=>e.key===this.locDraft.city))||this.locationCities[0];return e&&e.districts||[]},filterLabelFilter(){const e=this.filterOptions.filter.find((e=>e.value===this.filters.filter));return e?e.label:"筛选"},filterLabelSort(){const e=this.filterOptions.sort.find((e=>e.value===this.filters.sort));return e?e.label:"排序"},filterLabelMore(){return this.filters.more&&0!==this.filters.more.length?`更多(${this.filters.more.length})`:"更多"},panelTitle(){return"location"===this.panelType?"选择位置":"filter"===this.panelType?"选择筛选":"sort"===this.panelType?"选择排序":"more"===this.panelType?"更多条件":""},panelOptions(){return this.filterOptions&&this.filterOptions[this.panelType]||[]}},methods:{selectProvince(){e.index$1.showActionSheet({itemList:this.provinceOptions,success:t=>{const i=this.provinceOptions[t.tapIndex];i&&(this.provinceName=i,e.index$1.setStorageSync("hm_province_name",i))}})},openLocationPicker(){this.locationOpen=!0;const[e,t]=String(this.filters.location||"").split("|");if(this.locDraft.city=e||this.locationCities[0]&&this.locationCities[0].key||"",this.locDraft.district=t||"",!this.locDraft.district){const e=this.locationCities.find((e=>e.key===this.locDraft.city))||this.locationCities[0],t=e&&e.districts&&e.districts[0];this.locDraft.district=t&&t.key||""}},closeLocationPicker(){this.locationOpen=!1},resetLocationPicker(){const e=this.locationCities[0];this.locDraft.city=e&&e.key||"",this.locDraft.district=e&&e.districts&&e.districts[0]&&e.districts[0].key||""},selectLocCity(e){this.locDraft.city=e;const t=this.locationCities.find((t=>t.key===e))||this.locationCities[0],i=t&&t.districts&&t.districts[0];this.locDraft.district=i&&i.key||""},applyLocationPicker(){this.locDraft.city?this.filters.location=`${this.locDraft.city}|${this.locDraft.district||""}`:this.filters.location="",this.closeLocationPicker()},openPanel(e){this.panelType=e,this.panelOpen=!0,this.panelDraft={location:this.filters.location,filter:this.filters.filter,sort:this.filters.sort,more:Array.isArray(this.filters.more)?[...this.filters.more]:[]}},closePanel(){this.panelOpen=!1,this.panelType=""},resetPanel(){"location"===this.panelType&&(this.panelDraft.location=""),"filter"===this.panelType&&(this.panelDraft.filter=""),"sort"===this.panelType&&(this.panelDraft.sort=""),"more"===this.panelType&&(this.panelDraft.more=[])},applyPanel(){this.filters={location:this.panelDraft.location,filter:this.panelDraft.filter,sort:this.panelDraft.sort,more:Array.isArray(this.panelDraft.more)?[...this.panelDraft.more]:[]},this.closePanel()},isOptionActive(e){return!!e&&("location"===this.panelType?this.panelDraft.location===e.value:"filter"===this.panelType?this.panelDraft.filter===e.value:"sort"===this.panelType&&this.panelDraft.sort===e.value)},selectSingle(e){e&&("location"===this.panelType&&(this.panelDraft.location=e.value),"filter"===this.panelType&&(this.panelDraft.filter=e.value),"sort"===this.panelType&&(this.panelDraft.sort=e.value))},isMoreSelected(e){return!!e&&(this.panelDraft.more||[]).includes(e.value)},toggleMore(e){if(!e)return;const t=Array.isArray(this.panelDraft.more)?this.panelDraft.more:[],i=t.indexOf(e.value);i>=0?t.splice(i,1):t.push(e.value),this.panelDraft.more=t},selectCity(){e.index$1.__f__("log","at pages/home/home.vue:500","选择城市")},viewAllFollowed(){e.index$1.navigateTo({url:"/pages/property_list/property_list"})},goToDetail(t){e.index$1.navigateTo({url:"/pages/property_detail/property_detail"})}}};if(!Array){(e.resolveComponent("TopHeader")+e.resolveComponent("BottomTabBar"))()}const i=e._export_sfc(t,[["render",function(t,i,l,a,o,s){return e.e({a:e.p({title:"推荐"}),b:e.t(o.provinceName),c:e.o(((...e)=>s.selectProvince&&s.selectProvince(...e))),d:o.filters.more.length>0},(o.filters.more.length,{}),{e:o.filters.more.length>0?1:"",f:e.o((e=>s.openPanel("more"))),g:e.f(o.bannerImages,((e,t,i)=>({a:e,b:t}))),h:e.t(s.filterLabelLocation),i:o.filters.location?1:"",j:e.o(((...e)=>s.openLocationPicker&&s.openLocationPicker(...e))),k:e.t(s.filterLabelFilter),l:o.filters.filter?1:"",m:e.o((e=>s.openPanel("filter"))),n:e.t(s.filterLabelSort),o:o.filters.sort?1:"",p:e.o((e=>s.openPanel("sort"))),q:e.o(((...e)=>s.viewAllFollowed&&s.viewAllFollowed(...e))),r:e.f(o.followedProperties,((t,i,l)=>e.e({a:e.t(t.type),b:t.priceChange},t.priceChange?{c:e.t(t.priceChange)}:{},{d:t.status},t.status?{e:e.t(t.status)}:{},{f:"url("+t.image+")",g:e.t(t.name),h:e.t(t.area),i:e.t(t.size),j:e.t(t.price),k:i,l:e.o((e=>s.goToDetail(t)),i)}))),s:e.f(o.recommendedProperties,((t,i,l)=>e.e({a:t.status},t.status?{b:e.t(t.status)}:{},{c:"url("+t.image+")",d:e.t(t.name),e:e.t(t.price),f:e.t(t.region),g:e.t(t.size),h:e.t(t.desc),i:e.f(t.tags,((t,i,l)=>({a:e.t(t),b:i,c:"新上"===t?1:""}))),j:i,k:e.o((e=>s.goToDetail(t)),i)}))),t:e.p({active:"home"}),v:o.panelOpen},o.panelOpen?e.e({w:e.t(s.panelTitle),x:e.o(((...e)=>s.resetPanel&&s.resetPanel(...e))),y:"more"!==o.panelType},"more"!==o.panelType?{z:e.f(s.panelOptions,((t,i,l)=>e.e({a:e.t(t.label),b:s.isOptionActive(t)},(s.isOptionActive(t),{}),{c:i,d:s.isOptionActive(t)?1:"",e:e.o((e=>s.selectSingle(t)),i)})))}:{A:e.f(s.panelOptions,((t,i,l)=>e.e({a:e.t(t.label),b:s.isMoreSelected(t)},(s.isMoreSelected(t),{}),{c:i,d:s.isMoreSelected(t)?1:"",e:e.o((e=>s.toggleMore(t)),i)})))},{B:e.o(((...e)=>s.closePanel&&s.closePanel(...e))),C:e.o(((...e)=>s.applyPanel&&s.applyPanel(...e))),D:e.o((()=>{})),E:e.o(((...e)=>s.closePanel&&s.closePanel(...e)))}):{},{F:o.locationOpen},o.locationOpen?{G:e.o(((...e)=>s.resetLocationPicker&&s.resetLocationPicker(...e))),H:e.f(o.locationCities,((t,i,l)=>({a:e.t(t.label),b:t.key,c:o.locDraft.city===t.key?1:"",d:e.o((e=>s.selectLocCity(t.key)),t.key)}))),I:e.f(s.currentDistricts,((t,i,l)=>({a:e.t(t.label),b:t.key,c:o.locDraft.district===t.key?1:"",d:e.o((e=>o.locDraft.district=t.key),t.key)}))),J:e.o(((...e)=>s.closeLocationPicker&&s.closeLocationPicker(...e))),K:e.o(((...e)=>s.applyLocationPicker&&s.applyLocationPicker(...e))),L:e.o((()=>{})),M:e.o(((...e)=>s.closeLocationPicker&&s.closeLocationPicker(...e)))}:{})}]]);wx.createPage(i);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/home/home.js.map
